// Code generated by archesai. DO NOT EDIT.

package app

import (
	authapp "github.com/archesai/archesai/pkg/auth/app"
	configapp "github.com/archesai/archesai/pkg/config/app"
	"github.com/archesai/archesai/pkg/database"
	"github.com/archesai/archesai/pkg/events"
	serverapp "github.com/archesai/archesai/pkg/server/app"
	"github.com/archesai/examples/authentication/database/postgres/repositories"
	sqliterepos "github.com/archesai/examples/authentication/database/sqlite/repositories"
)

// NewPorts creates Ports by composing internal package ports.
func NewPorts(db *database.Database) *Ports {
	publisher := events.NewNoOpPublisher()

	if db.IsSQLite() {
		sqlDB := db.SQLDB()
		return &Ports{
			Auth: &authapp.Ports{
				APIKeyRepo:       sqliterepos.NewSQLiteAPIKeyRepository(sqlDB),
				AccountRepo:      sqliterepos.NewSQLiteAccountRepository(sqlDB),
				InvitationRepo:   sqliterepos.NewSQLiteInvitationRepository(sqlDB),
				MemberRepo:       sqliterepos.NewSQLiteMemberRepository(sqlDB),
				OrganizationRepo: sqliterepos.NewSQLiteOrganizationRepository(sqlDB),
				SessionRepo:      sqliterepos.NewSQLiteSessionRepository(sqlDB),
				UserRepo:         sqliterepos.NewSQLiteUserRepository(sqlDB),
				Publisher:        publisher,
			},
			Config: &configapp.Ports{},
			Server: &serverapp.Ports{},
		}
	}

	pool := db.PgxPool()
	return &Ports{
		Auth: &authapp.Ports{
			APIKeyRepo:       repositories.NewPostgresAPIKeyRepository(pool),
			AccountRepo:      repositories.NewPostgresAccountRepository(pool),
			InvitationRepo:   repositories.NewPostgresInvitationRepository(pool),
			MemberRepo:       repositories.NewPostgresMemberRepository(pool),
			OrganizationRepo: repositories.NewPostgresOrganizationRepository(pool),
			SessionRepo:      repositories.NewPostgresSessionRepository(pool),
			UserRepo:         repositories.NewPostgresUserRepository(pool),
			Publisher:        publisher,
		},
		Config: &configapp.Ports{},
		Server: &serverapp.Ports{},
	}
}
