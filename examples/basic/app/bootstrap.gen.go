// Code generated by archesai. DO NOT EDIT.

package app

import (
	"context"
	"log/slog"
	"net/http"
	"os"
	"os/signal"
	"time"

	"github.com/archesai/archesai/pkg/config"
	configschemas "github.com/archesai/archesai/pkg/config/schemas"
	"github.com/archesai/archesai/pkg/database"
	"github.com/archesai/archesai/pkg/logger"
	"github.com/archesai/archesai/pkg/server"

	postgresdb "github.com/archesai/examples/basic/database/postgres"
	sqlitedb "github.com/archesai/examples/basic/database/sqlite"
)

// openAPISpec contains the bundled OpenAPI specification.
var openAPISpec = []byte(`openapi: 3.1.0
x-project-name: github.com/archesai/examples/basic
info:
  title: My API
  description: A basic example API for managing todo items
  version: 1.0.0
tags:
  - name: Todo
    description: Todo item management
paths:
  /api-keys:
    get:
      operationId: ListAPIKeys
      summary: List API keys
      description: List API keys for the authenticated user
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - APIKey
      parameters:
        - $ref: '#/components/parameters/APIKeysFilter'
        - $ref: '#/components/parameters/PageQuery'
        - $ref: '#/components/parameters/APIKeysSort'
      responses:
        '200':
          $ref: '#/components/responses/APIKeyListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    post:
      operationId: CreateAPIKey
      summary: Create an API key
      description: Create a new API key for the authenticated user
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - APIKey
      requestBody:
        description: API key creation data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  description: A friendly name for the API key
                  type: string
                  minLength: 1
                  maxLength: 255
                  pattern: ^[\w\s\-.,!?()@#+/']+$
                  example: Production API Key
                expiresAt:
                  description: When this API key expires
                  type: string
                  format: date-time
                  maxLength: 255
                  example: '2025-01-15T09:30:00Z'
                organizationID:
                  description: The organization this API key belongs to
                  type: string
                  format: uuid
                  minLength: 36
                  maxLength: 36
                  example: 550e8400-e29b-41d4-a716-446655440000
                rateLimit:
                  description: Requests per minute allowed for this API key
                  type: integer
                  default: 60
                  format: int32
                  minimum: 1
                  maximum: 2147483647
                  example: 1000
                scopes:
                  description: List of scopes for the API key
                  type: array
                  default: []
                  items:
                    type: string
                    maxLength: 255
                    pattern: ^[a-z]+:[a-z]+$
                  maxItems: 1000
                  example:
                    - read:users
                    - write:workflows
              required:
                - organizationID
      responses:
        '201':
          $ref: '#/components/responses/APIKeyResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /api-keys
  /api-keys/{id}:
    get:
      operationId: GetAPIKey
      summary: Get an API key
      description: Get an API key by ID
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - APIKey
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '200':
          $ref: '#/components/responses/APIKeyResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    delete:
      operationId: DeleteAPIKey
      summary: Delete an API key
      description: Delete an API key
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - APIKey
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    patch:
      operationId: UpdateAPIKey
      summary: Update an API key
      description: Update an API key
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - APIKey
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      requestBody:
        description: API key update data
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  description: A friendly name for the API key
                  type: string
                  minLength: 1
                  maxLength: 255
                  pattern: ^[\w\s\-.,!?()@#+/']+$
                  example: Production API Key
                expiresAt:
                  description: When this API key expires
                  type: string
                  format: date-time
                  maxLength: 255
                  example: '2025-01-15T09:30:00Z'
                rateLimit:
                  description: Requests per minute allowed for this API key
                  type: integer
                  format: int32
                  minimum: 1
                  maximum: 2147483647
                  example: 1000
                scopes:
                  description: List of scopes for the API key
                  type: array
                  items:
                    type: string
                    maxLength: 255
                    pattern: ^[a-z]+:[a-z]+$
                  maxItems: 1000
                  example:
                    - read:users
                    - write:workflows
      responses:
        '200':
          $ref: '#/components/responses/APIKeyResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /api-keys/{id}
  /auth/accounts:
    get:
      operationId: ListAccounts
      summary: List linked accounts
      description: List all linked authentication providers for the current user
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - Account
      parameters:
        - $ref: '#/components/parameters/PageQuery'
      responses:
        '200':
          $ref: '#/components/responses/AccountListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /auth/accounts
  /auth/accounts/{id}:
    get:
      operationId: GetAccount
      summary: Find an account
      description: Get an account
      security:
        - bearerAuth: []
      tags:
        - Account
      parameters:
        - name: id
          description: The unique identifier of the resource
          required: true
          schema:
            description: UUID identifier
            type: string
            format: uuid
            minLength: 36
            maxLength: 36
            example: 550e8400-e29b-41d4-a716-446655440000
          in: path
      responses:
        '200':
          $ref: '#/components/responses/AccountResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    delete:
      operationId: DeleteAccount
      summary: Delete an account
      description: Delete an account
      security:
        - bearerAuth: []
      tags:
        - Auth
      parameters:
        - name: id
          description: The unique identifier of the resource
          required: true
          schema:
            description: UUID identifier
            type: string
            format: uuid
            minLength: 36
            maxLength: 36
            example: 550e8400-e29b-41d4-a716-446655440000
          in: path
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    patch:
      operationId: UpdateAccount
      summary: Update an account
      description: Update an account
      security:
        - bearerAuth: []
      tags:
        - Auth
      parameters:
        - name: id
          description: The unique identifier of the resource
          required: true
          schema:
            description: UUID identifier
            type: string
            format: uuid
            minLength: 36
            maxLength: 36
            example: 550e8400-e29b-41d4-a716-446655440000
          in: path
      requestBody:
        description: Account update request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  description: The account type
                  type: string
                  maxLength: 255
                  pattern: ^[\w\s\-.,!?()@#+/]*$
                  example: oauth
                provider:
                  description: The account provider
                  type: string
                  maxLength: 255
                  pattern: ^[a-z][a-z0-9-]*$
                  example: google
                providerAccountIdentifier:
                  description: The provider account ID
                  type: string
                  maxLength: 255
                  pattern: ^[a-z][a-z0-9-]*$
                  example: user1234567890
              additionalProperties: false
              maxProperties: 3
      responses:
        '200':
          $ref: '#/components/responses/AccountResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/accounts/{id}
  /auth/change-email:
    post:
      operationId: RequestEmailChange
      summary: Request e-mail change
      description: This endpoint will request your e-mail change with a token
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - Auth
      requestBody:
        description: Email change request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                newEmail:
                  description: The e-mail to send the confirmation token to
                  type: string
                  format: email
                  minLength: 1
                  maxLength: 255
                  example: user@example.com
                userID:
                  description: The user ID of the user requesting the email change
                  type: string
                  format: uuid
                  minLength: 36
                  maxLength: 36
                  example: 550e8400-e29b-41d4-a716-446655440000
              required:
                - newEmail
                - userID
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/change-email
  /auth/confirm-email:
    post:
      operationId: ConfirmEmailChange
      summary: Verify e-mail change
      description: This endpoint will verify your e-mail change with a token
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - Auth
      requestBody:
        description: Email change confirmation request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                newEmail:
                  description: The e-mail to send the confirmation token to
                  type: string
                  format: email
                  minLength: 1
                  maxLength: 255
                  example: user@example.com
                token:
                  description: The password reset token
                  type: string
                  minLength: 1
                  maxLength: 512
                  pattern: ^[A-Za-z0-9_-]+$
                  example: example-string
                userID:
                  description: The user ID of the user requesting the email change
                  type: string
                  format: uuid
                  minLength: 36
                  maxLength: 36
                  example: 550e8400-e29b-41d4-a716-446655440000
              required:
                - newEmail
                - token
                - userID
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/confirm-email
  /auth/forgot-password:
    post:
      operationId: RequestPasswordReset
      summary: Request password reset
      description: This endpoint will request a password reset link
      security:
        - {}
      tags:
        - Auth
      requestBody:
        description: Password reset request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  description: The e-mail to send the password reset token to
                  type: string
                  format: email
                  minLength: 1
                  maxLength: 255
                  example: user@example.com
              required:
                - email
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
      x-public-endpoint: true
    x-path: /auth/forgot-password
  /auth/link:
    post:
      operationId: LinkAccount
      summary: Link authentication provider
      description: Link an additional authentication provider to the current user account
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - Auth
      requestBody:
        description: Account linking request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                provider:
                  description: The authentication provider to link
                  type: string
                  enum:
                    - google
                    - github
                    - microsoft
                    - apple
                  example: github
                redirectUrl:
                  description: URL to redirect to after successful linking
                  type: string
                  format: uri
                  maxLength: 2048
                  example: https://app.archesai.com/settings/security
              required:
                - provider
      responses:
        '200':
          description: Provider linking initiated
          headers:
            X-RateLimit-Limit:
              description: The maximum number of requests allowed per time window
              schema:
                type: integer
                format: int32
                minimum: 1
                maximum: 1000000
                example: 1000
            X-RateLimit-Remaining:
              description: The number of requests remaining in the current time window
              schema:
                type: integer
                format: int32
                minimum: 0
                maximum: 1000000
                example: 999
            X-RateLimit-Reset:
              description: The time at which the current rate limit window resets (Unix timestamp)
              schema:
                type: integer
                format: int64
                minimum: 0
                maximum: 9223372036854775807
                example: 1640995200
          content:
            application/json:
              schema:
                type: object
                properties:
                  authorizationUrl:
                    description: URL to redirect the user to for provider authorization
                    type: string
                    format: uri
                    minLength: 1
                    maxLength: 2048
                    example: https://github.com/login/oauth/authorize?client_id=...
                additionalProperties: false
                required:
                  - authorizationUrl
              example:
                authorizationUrl: https://github.com/login/oauth/authorize?client_id=abc123
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          $ref: '#/components/responses/Conflict'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/link
  /auth/login:
    post:
      operationId: Login
      summary: Login
      description: Authenticate user and create a session
      security:
        - {}
      tags:
        - Auth
      requestBody:
        description: User login credentials
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  description: The email address associated with the account
                  type: string
                  format: email
                  minLength: 1
                  maxLength: 255
                  example: user@example.com
                password:
                  description: The password for the account
                  type: string
                  minLength: 1
                  maxLength: 72
                  pattern: ^[\w\s\-.,!?()@#+/]*$
                  example: secure-password-123
                rememberMe:
                  description: Whether to create a long-lived session
                  type: boolean
                  default: false
                  example: true
              required:
                - email
                - password
      responses:
        '201':
          $ref: '#/components/responses/SessionCreated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
      x-public-endpoint: true
    x-path: /auth/login
  /auth/logout:
    post:
      operationId: Logout
      summary: Logout
      description: Logout from current session
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - Auth
      responses:
        '200':
          $ref: '#/components/responses/LogoutResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/logout
  /auth/logout-all:
    post:
      operationId: LogoutAll
      summary: Logout all sessions
      description: Logout from all sessions across all devices
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - Auth
      responses:
        '200':
          $ref: '#/components/responses/LogoutResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/logout-all
  /auth/magic-links/request:
    post:
      operationId: RequestMagicLink
      summary: Request a magic link
      description: Request a magic link to be sent via email or generate an OTP code
      security:
        - {}
      tags:
        - Auth
      requestBody:
        description: Magic link authentication request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                deliveryMethod:
                  description: How to deliver the magic link
                  type: string
                  enum:
                    - email
                    - console
                    - otp
                    - webhook
                  default: email
                  example: email
                identifier:
                  description: Email address or username
                  type: string
                  minLength: 1
                  maxLength: 255
                  pattern: ^[\w\s\-.,!?()@#+/]*$
                  example: user@example.com
                redirectUrl:
                  description: URL to redirect to after successful authentication
                  type: string
                  format: uri
                  minLength: 1
                  maxLength: 2048
                  example: https://app.archesai.com/dashboard
              required:
                - identifier
      responses:
        '200':
          description: Magic link requested successfully
          headers:
            Set-Cookie:
              $ref: '#/components/headers/SetCookie'
            X-RateLimit-Limit:
              $ref: '#/components/headers/RateLimitLimit'
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
          content:
            application/json:
              schema:
                type: object
                properties:
                  expiresIn:
                    description: Token expiry in seconds
                    type: integer
                    format: int32
                    minimum: 1
                    maximum: 2147483647
                    example: 900
                  message:
                    type: string
                    minLength: 1
                    maxLength: 500
                    pattern: ^[\w\s\-.,!?()@]+$
                    example: Magic link sent to user@example.com
                  otpCode:
                    description: OTP code (only returned if deliveryMethod is 'otp')
                    type: string
                    minLength: 6
                    maxLength: 6
                    pattern: ^[A-Za-z0-9_-]+$
                    example: '123456'
                  token:
                    $ref: '#/components/schemas/MagicLinkToken'
              example:
                expiresIn: 900
                message: Magic link sent to user@example.com
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
      x-public-endpoint: true
    x-path: /auth/magic-links/request
  /auth/magic-links/verify:
    post:
      operationId: VerifyMagicLink
      summary: Verify a magic link token
      description: Verify a magic link token or OTP code and create a session
      security:
        - {}
      tags:
        - Auth
      requestBody:
        description: Magic link verification request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  description: OTP code (alternative to token)
                  type: string
                  minLength: 6
                  maxLength: 6
                  pattern: ^[0-9]{6}$
                  example: '123456'
                identifier:
                  description: Required when using OTP code
                  type: string
                  minLength: 1
                  maxLength: 255
                  pattern: ^[\w\s\-.,!?()@#+/]*$
                  example: user@example.com
                token:
                  description: Magic link token from URL
                  type: string
                  minLength: 32
                  maxLength: 512
                  pattern: ^[A-Za-z0-9_-]+$
                  example: abc123def456789ghi012jkl345mno678pqr901stu234
      responses:
        '201':
          $ref: '#/components/responses/SessionCreated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
      x-public-endpoint: true
    x-path: /auth/magic-links/verify
  /auth/me:
    get:
      operationId: GetCurrentUser
      summary: Get current user
      description: Get the currently authenticated user's profile
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - User
      responses:
        '200':
          $ref: '#/components/responses/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    delete:
      operationId: DeleteCurrentUser
      summary: Delete current user
      description: Delete the currently authenticated user's account (cascades to all sessions and accounts)
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - User
      parameters:
        - name: X-Confirm
          description: Confirmation header to prevent accidental deletion
          required: true
          schema:
            type: string
            enum:
              - DELETE_MY_ACCOUNT
            example: DELETE_MY_ACCOUNT
          in: header
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    patch:
      operationId: UpdateCurrentUser
      summary: Update current user
      description: Update the currently authenticated user's profile
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - User
      requestBody:
        description: User profile update data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  description: The user's display name
                  type: string
                  minLength: 1
                  maxLength: 255
                  pattern: ^[\w\s\-.,!?()@#+/]*$
                  example: John Doe
                image:
                  description: The user's avatar image URL
                  type: string
                  format: uri
                  minLength: 5
                  maxLength: 2048
                  example: https://example.com/avatar.jpg
      responses:
        '200':
          $ref: '#/components/responses/UserResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/me
  /auth/oauth/{provider}/authorize:
    get:
      operationId: OauthAuthorize
      summary: Start OAuth authorization flow
      description: Redirect user to OAuth provider authorization page
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - Auth
      parameters:
        - name: provider
          description: The OAuth provider to use for authorization
          required: true
          schema:
            type: string
            enum:
              - google
              - github
              - microsoft
            example: google
          in: path
        - name: redirect_uri
          description: Where to redirect after authorization (optional, uses default if not provided)
          required: false
          schema:
            type: string
            format: uri
            maxLength: 2048
            example: http://localhost:3000/auth/callback
          in: query
        - name: scope
          description: OAuth scopes to request (optional, uses default if not provided)
          required: false
          schema:
            type: string
            maxLength: 255
            pattern: ^[\w\s\-.,!?()@#+/:]*$
            example: read:user
          in: query
        - name: state
          description: State parameter for CSRF protection
          required: false
          schema:
            type: string
            maxLength: 255
            pattern: ^[\w\-]+$
            example: random_state_123
          in: query
      responses:
        '200':
          description: Authorization URL generated successfully
          headers:
            X-RateLimit-Limit:
              $ref: '#/components/headers/RateLimitLimit'
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
          content:
            application/json:
              schema:
                type: object
                properties:
                  authorizationUrl:
                    description: URL to redirect user for OAuth authorization
                    type: string
                    format: uri
                    minLength: 1
                    maxLength: 2048
                    example: https://accounts.google.com/oauth/authorize?client_id=...
                required:
                  - authorizationUrl
        '302':
          description: Redirect to OAuth provider
          headers:
            Location:
              description: The OAuth provider authorization URL
              schema:
                type: string
                format: uri
                maxLength: 2048
                example: https://accounts.google.com/oauth/authorize?client_id=...
            X-RateLimit-Limit:
              $ref: '#/components/headers/RateLimitLimit'
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/oauth/{provider}/authorize
  /auth/oauth/{provider}/callback:
    get:
      operationId: OauthCallback
      summary: Handle OAuth callback
      description: Handle the callback from OAuth provider and complete authentication
      tags:
        - Auth
      parameters:
        - name: provider
          description: The OAuth provider handling the callback
          required: true
          schema:
            type: string
            enum:
              - google
              - github
              - microsoft
            example: google
          in: path
        - name: code
          description: Authorization code from OAuth provider
          required: false
          schema:
            type: string
            maxLength: 1024
            pattern: ^[\w\-]+$
            example: authorization_code_123
          in: query
        - name: state
          description: State parameter for CSRF protection
          required: false
          schema:
            type: string
            maxLength: 255
            pattern: ^[\w\-]+$
            example: random_state_123
          in: query
        - name: error
          description: Error code if authorization failed
          required: false
          schema:
            type: string
            maxLength: 100
            pattern: ^[\w\-_]+$
            example: access_denied
          in: query
        - name: error_description
          description: Human-readable error description
          required: false
          schema:
            type: string
            maxLength: 500
            pattern: ^[\w\s\-.,!?()@#+/]*$
            example: The user denied the request
          in: query
      responses:
        '200':
          $ref: '#/components/responses/SessionCreated'
        '302':
          description: Redirect to frontend with authentication result
          headers:
            Location:
              description: Redirect URL to frontend
              schema:
                type: string
                format: uri
                maxLength: 2048
                example: http://localhost:3000/auth/success
            Set-Cookie:
              description: Session cookies for authentication
              schema:
                type: string
                minLength: 1
                maxLength: 4096
                pattern: ^[\w\-=;,. ]+$
            X-RateLimit-Limit:
              $ref: '#/components/headers/RateLimitLimit'
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/oauth/{provider}/callback
  /auth/register:
    post:
      operationId: Register
      summary: Register
      description: Register a new user account with email and password
      security:
        - {}
      tags:
        - Auth
      requestBody:
        description: User registration details
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  description: The name of the user
                  type: string
                  minLength: 1
                  maxLength: 255
                  pattern: ^[\w\s\-.,!?()@#+/]*$
                  example: John Doe
                email:
                  description: The email address for the new account
                  type: string
                  format: email
                  minLength: 1
                  maxLength: 255
                  pattern: ^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$
                  example: user@example.com
                password:
                  description: The password for the account
                  type: string
                  minLength: 8
                  maxLength: 72
                  pattern: ^[\w\s\-.,!?()@#+/]*$
                  example: secure-password-123
              required:
                - email
                - name
                - password
      responses:
        '201':
          $ref: '#/components/responses/SessionCreated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          $ref: '#/components/responses/Conflict'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
      x-public-endpoint: true
    x-path: /auth/register
  /auth/request-verification:
    post:
      operationId: RequestEmailVerification
      summary: Request e-mail verification
      description: This endpoint will send an e-mail verification link to you. ADMIN ONLY.
      security:
        - bearerAuth: []
      tags:
        - Auth
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/request-verification
  /auth/reset-password:
    post:
      operationId: ConfirmPasswordReset
      summary: Verify password reset
      description: This endpoint will verify your password change with a token
      security:
        - {}
      tags:
        - Auth
      requestBody:
        description: Password reset confirmation request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                newPassword:
                  description: The new password
                  type: string
                  minLength: 8
                  maxLength: 72
                  pattern: ^[\w\s\-.,!?()@#+/]*$
                  example: secure-new-password-123
                token:
                  description: The password reset token
                  type: string
                  minLength: 1
                  maxLength: 512
                  pattern: ^[A-Za-z0-9_-]+$
                  example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9
              required:
                - newPassword
                - token
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
      x-public-endpoint: true
    x-path: /auth/reset-password
  /auth/sessions:
    get:
      operationId: ListSessions
      summary: List sessions
      description: List all active sessions for the current user
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - Session
      parameters:
        - $ref: '#/components/parameters/PageQuery'
        - $ref: '#/components/parameters/SessionsSort'
      responses:
        '200':
          $ref: '#/components/responses/SessionListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /auth/sessions
  /auth/sessions/{id}:
    get:
      operationId: GetSession
      summary: Find a session
      description: Find a session
      security:
        - bearerAuth: []
      tags:
        - Session
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '200':
          $ref: '#/components/responses/SessionResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    delete:
      operationId: DeleteSession
      summary: Delete session (Logout)
      description: Delete a specific session (logout from that session)
      security:
        - bearerAuth: []
      tags:
        - Auth
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    patch:
      operationId: UpdateSession
      summary: Update Session
      description: This endpoint will update the active organization for the current session
      security:
        - bearerAuth: []
        - sessionCookie: []
      tags:
        - Auth
      requestBody:
        description: Session update data
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                organizationID:
                  description: The organization ID to set as active for this session
                  type: string
                  format: uuid
                  minLength: 36
                  maxLength: 36
                  example: 550e8400-e29b-41d4-a716-446655440000
              required:
                - organizationID
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '200':
          $ref: '#/components/responses/SessionResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/sessions/{id}
  /auth/verify-email:
    post:
      operationId: ConfirmEmailVerification
      summary: Confirm e-mail verification
      description: This endpoint will confirm your e-mail with a token
      security:
        - bearerAuth: []
      tags:
        - Auth
      requestBody:
        description: Email verification request with token
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  description: The email verification token
                  type: string
                  minLength: 1
                  maxLength: 512
                  pattern: ^[A-Za-z0-9_-]+$
                  example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9
              required:
                - token
      responses:
        '200':
          $ref: '#/components/responses/EmailVerificationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: auth
    x-path: /auth/verify-email
  /config:
    get:
      operationId: GetConfig
      summary: Get the configuration
      description: Get the configuration of the application
      security:
        - {}
      tags:
        - Config
      responses:
        '200':
          $ref: '#/components/responses/ConfigResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: config
    x-path: /config
  /health:
    get:
      operationId: GetHealth
      summary: Get health status
      description: Check the health status of the application
      security:
        - {}
      tags:
        - Health
      responses:
        '200':
          $ref: '#/components/responses/HealthResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: server
    x-path: /health
  /organizations:
    get:
      operationId: ListOrganizations
      summary: List organizations
      description: List organizations
      security:
        - bearerAuth: []
      tags:
        - Organization
      parameters:
        - $ref: '#/components/parameters/OrganizationsFilter'
        - $ref: '#/components/parameters/PageQuery'
        - $ref: '#/components/parameters/OrganizationsSort'
      responses:
        '200':
          $ref: '#/components/responses/OrganizationListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    post:
      operationId: CreateOrganization
      summary: Create an organization
      description: Create an organization
      security:
        - bearerAuth: []
      tags:
        - Organization
      requestBody:
        description: Organization creation request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                billingEmail:
                  description: The billing email to use for the organization
                  type: string
                  format: email
                  minLength: 1
                  maxLength: 255
                  example: example@archesai.com
                organizationID:
                  description: UUID identifier
                  type: string
                  format: uuid
                  minLength: 36
                  maxLength: 36
                  example: 550e8400-e29b-41d4-a716-446655440000
              required:
                - billingEmail
                - organizationID
      responses:
        '201':
          $ref: '#/components/responses/OrganizationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /organizations
  /organizations/{id}:
    get:
      operationId: GetOrganization
      summary: Get an organization
      description: Get an organization
      security:
        - bearerAuth: []
      tags:
        - Organization
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '200':
          $ref: '#/components/responses/OrganizationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    delete:
      operationId: DeleteOrganization
      summary: Delete an organization
      description: Delete an organization
      security:
        - bearerAuth: []
      tags:
        - Organization
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    patch:
      operationId: UpdateOrganization
      summary: Update an organization
      description: Update an organization
      security:
        - bearerAuth: []
      tags:
        - Organization
      requestBody:
        description: Organization update data
        content:
          application/json:
            schema:
              type: object
              properties:
                billingEmail:
                  description: The billing email to use for the organization
                  type: string
                  format: email
                  maxLength: 255
                  example: example@archesai.com
                organizationID:
                  description: UUID identifier
                  type: string
                  format: uuid
                  minLength: 36
                  maxLength: 36
                  example: 550e8400-e29b-41d4-a716-446655440000
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '200':
          $ref: '#/components/responses/OrganizationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /organizations/{id}
  /organizations/{organizationID}/invitations:
    get:
      operationId: ListInvitations
      summary: List invitations
      description: List invitations
      security:
        - bearerAuth: []
      tags:
        - Invitation
      parameters:
        - $ref: '#/components/parameters/OrganizationID'
        - $ref: '#/components/parameters/InvitationsFilter'
        - $ref: '#/components/parameters/PageQuery'
        - $ref: '#/components/parameters/InvitationsSort'
      responses:
        '200':
          $ref: '#/components/responses/InvitationListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    post:
      operationId: CreateInvitation
      summary: Create an invitation
      description: Create an invitation
      security:
        - bearerAuth: []
      tags:
        - Invitation
      parameters:
        - $ref: '#/components/parameters/OrganizationID'
      requestBody:
        description: Invitation creation request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  description: The email of the invitated user
                  type: string
                  minLength: 1
                  maxLength: 255
                  pattern: ^[\w\s\-.,!?()@#+/]*$
                  example: example-string
                role:
                  description: The role of the invitation
                  type: string
                  enum:
                    - admin
                    - owner
                    - member
                  example: admin
              required:
                - email
                - role
      responses:
        '201':
          $ref: '#/components/responses/InvitationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /organizations/{organizationID}/invitations
  /organizations/{organizationID}/invitations/{id}:
    get:
      operationId: GetInvitation
      summary: Get an invitation
      description: Get an invitation
      security:
        - bearerAuth: []
      tags:
        - Invitation
      parameters:
        - $ref: '#/components/parameters/OrganizationID'
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '200':
          $ref: '#/components/responses/InvitationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    delete:
      operationId: DeleteInvitation
      summary: Delete an invitation
      description: Delete an invitation
      security:
        - bearerAuth: []
      tags:
        - Invitation
      parameters:
        - $ref: '#/components/parameters/OrganizationID'
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    patch:
      operationId: UpdateInvitation
      summary: Update an invitation
      description: Update an invitation
      security:
        - bearerAuth: []
      tags:
        - Invitation
      requestBody:
        description: Invitation update data
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  description: The email of the invitated user
                  type: string
                  maxLength: 255
                  pattern: ^[\w\s\-.,!?()@#+/]*$
                  example: example-string
                role:
                  description: The role of the invitation
                  type: string
                  enum:
                    - admin
                    - owner
                    - member
                  example: admin
      parameters:
        - $ref: '#/components/parameters/OrganizationID'
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '200':
          $ref: '#/components/responses/InvitationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /organizations/{organizationID}/invitations/{id}
  /organizations/{organizationID}/members:
    get:
      operationId: ListMembers
      summary: List members
      description: List members
      security:
        - bearerAuth: []
      tags:
        - Member
      parameters:
        - name: organizationID
          description: Organization ID
          required: true
          schema:
            type: string
            format: uuid
            maxLength: 36
          in: path
        - $ref: '#/components/parameters/MembersFilter'
        - $ref: '#/components/parameters/PageQuery'
        - $ref: '#/components/parameters/MembersSort'
      responses:
        '200':
          $ref: '#/components/responses/MemberListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    post:
      operationId: CreateMember
      summary: Create a member
      description: Create a member
      security:
        - bearerAuth: []
      tags:
        - Member
      parameters:
        - name: organizationID
          description: Organization ID
          required: true
          schema:
            type: string
            format: uuid
            maxLength: 36
          in: path
      requestBody:
        description: Member creation request
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                role:
                  description: The role of the member
                  type: string
                  enum:
                    - admin
                    - owner
                    - member
                  example: admin
              required:
                - role
      responses:
        '201':
          $ref: '#/components/responses/MemberResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /organizations/{organizationID}/members
  /organizations/{organizationID}/members/{id}:
    get:
      operationId: GetMember
      summary: Get a member
      description: Get a member
      security:
        - bearerAuth: []
      tags:
        - Member
      parameters:
        - $ref: '#/components/parameters/OrganizationID'
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '200':
          $ref: '#/components/responses/MemberResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    delete:
      operationId: DeleteMember
      summary: Delete a member
      description: Delete a member
      security:
        - bearerAuth: []
      tags:
        - Member
      parameters:
        - $ref: '#/components/parameters/OrganizationID'
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    patch:
      operationId: UpdateMember
      summary: Update a member
      description: Update a member
      security:
        - bearerAuth: []
      tags:
        - Member
      requestBody:
        description: Member update data
        content:
          application/json:
            schema:
              type: object
              properties:
                role:
                  description: The role of the member
                  type: string
                  enum:
                    - admin
                    - owner
                    - member
                  example: admin
      parameters:
        - $ref: '#/components/parameters/OrganizationID'
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '200':
          $ref: '#/components/responses/MemberResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /organizations/{organizationID}/members/{id}
  /todos:
    get:
      operationId: ListTodos
      summary: List todo items
      security:
        - bearerAuth: []
      tags:
        - Todo
      parameters:
        - $ref: '#/components/parameters/TodosFilter'
        - $ref: '#/components/parameters/PageQuery'
        - $ref: '#/components/parameters/TodosSort'
      responses:
        '200':
          $ref: '#/components/responses/TodoListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      operationId: CreateTodo
      summary: Create a todo item
      security:
        - bearerAuth: []
      tags:
        - Todo
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTodoBody'
      responses:
        '201':
          $ref: '#/components/responses/TodoResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /todos/{id}:
    get:
      operationId: GetTodo
      summary: Get a todo item
      security:
        - bearerAuth: []
      tags:
        - Todo
      parameters:
        - $ref: '#/components/parameters/ID'
      responses:
        '200':
          $ref: '#/components/responses/TodoResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      operationId: UpdateTodo
      summary: Update a todo item
      security:
        - bearerAuth: []
      tags:
        - Todo
      parameters:
        - $ref: '#/components/parameters/ID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTodoBody'
      responses:
        '200':
          $ref: '#/components/responses/TodoResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      operationId: DeleteTodo
      summary: Delete a todo item
      security:
        - bearerAuth: []
      tags:
        - Todo
      parameters:
        - $ref: '#/components/parameters/ID'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /users:
    get:
      operationId: ListUsers
      summary: List users
      description: List users
      security:
        - bearerAuth: []
      tags:
        - User
      parameters:
        - $ref: '#/components/parameters/UsersFilter'
        - $ref: '#/components/parameters/PageQuery'
        - $ref: '#/components/parameters/UsersSort'
      responses:
        '200':
          $ref: '#/components/responses/UserListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /users
  /users/{id}:
    get:
      operationId: GetUser
      summary: Get a user
      description: Get a user
      security:
        - bearerAuth: []
      tags:
        - User
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '200':
          $ref: '#/components/responses/UserResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    delete:
      operationId: DeleteUser
      summary: Delete a user
      description: Delete a user
      security:
        - bearerAuth: []
      tags:
        - User
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    patch:
      operationId: UpdateUser
      summary: Update an user
      description: Update an user
      security:
        - bearerAuth: []
      tags:
        - User
      requestBody:
        description: User update data
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  description: The user's e-mail
                  type: string
                  format: email
                  minLength: 1
                  maxLength: 255
                  example: user@example.com
                image:
                  description: The user's avatar image URL
                  type: string
                  format: uri
                  maxLength: 2048
                  pattern: ^https?://[\w\-\.]+[\w\-\./:?#@!$&'()*+,;=]*$
                  example: https://example.com/avatar.jpg
      parameters:
        - $ref: '#/components/parameters/ResourceID'
      responses:
        '200':
          $ref: '#/components/responses/UserResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-internal: auth
    x-path: /users/{id}
components:
  schemas:
    APIKey:
      title: APIKey
      description: Schema for API Key entity
      allOf:
        - $ref: '#/components/schemas/Base'
        - type: object
          properties:
            name:
              oneOf:
                - type: string
                  minLength: 1
                  maxLength: 255
                  pattern: ^[\w\s\-.,!?()@#+/']+$
                - type: 'null'
              example: Production API Key
            expiresAt:
              description: When this API key expires
              oneOf:
                - type: string
                  format: date-time
                  minLength: 1
                  maxLength: 255
                - type: 'null'
              example: '2025-01-15T09:30:00Z'
            keyHash:
              description: Hashed version of the API key for secure storage
              type: string
              minLength: 1
              maxLength: 255
              pattern: ^[a-zA-Z0-9]+$
              example: hashedskliveabc123
            lastUsedAt:
              description: When this API key was last used
              oneOf:
                - type: string
                  format: date-time
                  minLength: 1
                  maxLength: 255
                - type: 'null'
              example: '2024-01-15T09:30:00Z'
            organizationID:
              description: The organization this API key belongs to
              type: string
              format: uuid
              minLength: 36
              maxLength: 36
              example: 550e8400-e29b-41d4-a716-446655440000
            prefix:
              oneOf:
                - type: string
                  minLength: 1
                  maxLength: 255
                  pattern: ^[a-z]+$
                - type: 'null'
              example: sklive
            rateLimit:
              description: Requests per minute allowed for this API key
              type: integer
              default: 60
              format: int32
              minimum: 1
              maximum: 2147483647
              example: 1000
            scopes:
              type: array
              default: []
              items:
                type: string
                maxLength: 255
                pattern: ^[a-z]+:[a-z]+$
              maxItems: 1000
              example:
                - read:users
                - write:workflows
            userID:
              description: The user who owns this API key
              type: string
              format: uuid
              minLength: 36
              maxLength: 36
              example: 550e8400-e29b-41d4-a716-446655440000
          required:
            - scopes
            - rateLimit
            - keyHash
            - organizationID
            - userID
            - name
            - prefix
            - lastUsedAt
            - expiresAt
      unevaluatedProperties: false
      x-codegen:
        repository:
          excludeFromCreate:
            - CreatedAt
            - UpdatedAt
            - LastUsedAt
          excludeFromUpdate:
            - CreatedAt
            - UpdatedAt
            - UserID
            - OrganizationID
            - KeyHash
            - Prefix
            - LastUsedAt
          indices:
            - organizationID
            - userID
            - keyHash
            - lastUsedAt
          relations:
            - field: organizationID
              onDelete: CASCADE
              onUpdate: NO_ACTION
              references: organization
            - field: userID
              onDelete: CASCADE
              onUpdate: NO_ACTION
              references: user
      x-codegen-schema-type: entity
      x-internal: auth
    Account:
      title: Account
      description: Schema for Account entity (authentication provider account)
      allOf:
        - $ref: '#/components/schemas/Base'
        - type: object
          properties:
            accessToken:
              description: The OAuth access token
              oneOf:
                - type: string
                  minLength: 1
                  maxLength: 512
                  pattern: ^[A-Za-z0-9_\-\.]+$
                - type: 'null'
              example: ya29.a0AfH6SMBa...
              x-sensitive: true
            accessTokenExpiresAt:
              description: The access token expiration timestamp
              oneOf:
                - type: string
                  format: date-time
                  minLength: 1
                  maxLength: 255
                - type: 'null'
              example: '2024-12-31T23:59:59Z'
            accountIdentifier:
              description: The unique identifier for the account from the provider
              type: string
              minLength: 1
              maxLength: 255
              pattern: ^[a-zA-Z0-9_\-\.@]+$
              example: google123456789
            idToken:
              description: The OpenID Connect ID token
              oneOf:
                - type: string
                  minLength: 1
                  maxLength: 2048
                  pattern: ^[A-Za-z0-9_\-\.]+$
                - type: 'null'
              example: eyJhbGciOiJSUzI1NiIs...
              x-sensitive: true
            provider:
              description: The authentication provider identifier
              type: string
              enum:
                - local
                - google
                - github
                - microsoft
                - apple
              example: google
            refreshToken:
              description: The OAuth refresh token
              oneOf:
                - type: string
                  minLength: 1
                  maxLength: 512
                  pattern: ^[A-Za-z0-9_\-\./]+$
                - type: 'null'
              example: 1//0fM8N5...
              x-sensitive: true
            refreshTokenExpiresAt:
              description: The refresh token expiration timestamp
              oneOf:
                - type: string
                  format: date-time
                  minLength: 1
                  maxLength: 255
                - type: 'null'
              example: '2025-12-31T23:59:59Z'
            scope:
              description: The OAuth scope granted
              oneOf:
                - type: string
                  minLength: 1
                  maxLength: 255
                  pattern: ^[\w\s\-:]+$
                - type: 'null'
              example: openid profile email
              # password:
              #   description: The hashed password for local authentication
              #   type: [string, 'null']
              #   minLength: 1
              #   x-sensitive: true
              #   maxLength: 255
            userID:
              description: The user ID this account belongs to
              type: string
              format: uuid
              minLength: 36
              maxLength: 36
              example: 550e8400-e29b-41d4-a716-446655440000
          required:
            - accessToken
            - accessTokenExpiresAt
            - accountIdentifier
            - userID
            - provider
            - idToken
            # - password
            - refreshToken
            - refreshTokenExpiresAt
            - scope
      unevaluatedProperties: false
      x-codegen:
        repository:
          additionalMethods:
            - name: GetAccountByProvider
              params:
                - name: provider
                  type: string
                - name: accountIdentifier
                  type: string
              returns: single
            - name: ListAccountsByUserID
              params:
                - name: userID
                  type: string
                  format: uuid
                  maxLength: 36
              returns: multiple
          excludeFromUpdate:
            - AccountIdentifier
            - Provider
            - UserID
          indices:
            - userID
          operations:
            - create
            - read
            - update
            - delete
            - list
          relations:
            - field: userID
              onDelete: CASCADE
              onUpdate: NO_ACTION
              references: user
      x-codegen-schema-type: entity
      x-internal: auth
    Base:
      title: Base
      description: Base schema for all entities with common fields
      type: object
      properties:
        createdAt:
          description: The date and time when the resource was created
          type: string
          format: date-time
          minLength: 1
          maxLength: 255
          example: '2024-01-15T09:30:00Z'
        id:
          description: Unique identifier for the resource
          type: string
          format: uuid
          minLength: 36
          maxLength: 36
          example: 550e8400-e29b-41d4-a716-446655440000
        updatedAt:
          description: The date and time when the resource was last updated
          type: string
          format: date-time
          minLength: 1
          maxLength: 255
          example: '2024-01-15T10:45:00Z'
      required:
        - id
        - createdAt
        - updatedAt
      x-internal: server
    Config:
      title: Config
      description: Arches AI configuration schema
      type: object
      properties:
        api:
          $ref: '#/components/schemas/ConfigAPI'
        auth:
          $ref: '#/components/schemas/ConfigAuth'
        billing:
          $ref: '#/components/schemas/ConfigBilling'
        database:
          $ref: '#/components/schemas/ConfigDatabase'
        generation:
          $ref: '#/components/schemas/ConfigGeneration'
        intelligence:
          $ref: '#/components/schemas/ConfigIntelligence'
        kubernetes:
          $ref: '#/components/schemas/ConfigKubernetes'
        logging:
          $ref: '#/components/schemas/ConfigLogging'
        platform:
          $ref: '#/components/schemas/ConfigPlatform'
        redis:
          $ref: '#/components/schemas/ConfigRedis'
        storage:
          $ref: '#/components/schemas/ConfigStorage'
      additionalProperties: false
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAPI:
      title: ConfigAPI
      description: Configuration schema for the API server
      type: object
      properties:
        cors:
          description: A comma-separated list of allowed origins for CORS requests
          type: string
          default: localhost
          minLength: 1
          maxLength: 2048
          pattern: ^[\w\-\.,:/@]+$
          example: localhost,https://platform.archesai.com
        docs:
          description: Enable or disable API documentation
          type: boolean
          default: true
          example: true
        email:
          $ref: '#/components/schemas/ConfigEmail'
        environment:
          description: Deployment environment (development, staging, production)
          type: string
          enum:
            - development
            - staging
            - production
          default: development
          example: development
        host:
          description: The host address on which the API server will listen
          type: string
          default: 0.0.0.0
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-\.:]+$
          example: 0.0.0.0
        image:
          $ref: '#/components/schemas/ConfigImage'
        port:
          description: The port on which the API server will listen
          type: integer
          default: 3001
          format: int32
          minimum: 1
          maximum: 65535
          example: 3001
        resources:
          $ref: '#/components/schemas/ConfigResource'
        url:
          description: The public URL for the API
          type: string
          default: http://localhost:3001
          format: uri
          maxLength: 2048
          example: http://localhost:3001
        validation:
          description: Enable or disable request validation
          type: boolean
          default: true
          example: true
      additionalProperties: false
      required:
        - cors
        - docs
        - environment
        - host
        - port
        - validation
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuth:
      title: ConfigAuth
      description: Authentication configuration for the API server
      type: object
      properties:
        enabled:
          description: Enable authentication
          type: boolean
          default: true
          example: true
        github:
          $ref: '#/components/schemas/ConfigAuthGithub'
        google:
          $ref: '#/components/schemas/ConfigAuthGoogle'
        local:
          $ref: '#/components/schemas/ConfigAuthLocal'
        magicLink:
          $ref: '#/components/schemas/ConfigAuthMagicLink'
        microsoft:
          $ref: '#/components/schemas/ConfigAuthMicrosoft'
        twitter:
          $ref: '#/components/schemas/ConfigAuthTwitter'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthGithub:
      title: ConfigAuthGithub
      description: GitHub OAuth configuration
      type: object
      properties:
        clientId:
          description: GitHub OAuth App client ID
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\.\-]+$
          example: Iv1.abc123def456ghi7
        clientSecret:
          description: GitHub OAuth App client secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
          example: abc123def456ghi789jkl012mno345pqr678stu901
        enabled:
          description: Enable GitHub OAuth
          type: boolean
          default: false
          example: false
        redirectUrl:
          description: OAuth callback URL
          type: string
          format: uri
          maxLength: 2048
          example: http://localhost:8080/auth/oauth/github/callback
        scopes:
          description: OAuth scopes to request
          type: array
          default:
            - user:email
          items:
            type: string
            maxLength: 255
            pattern: ^[\w\s\-:]+$
          maxItems: 1000
          example:
            - read:user
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthGoogle:
      title: ConfigAuthGoogle
      description: Google OAuth configuration
      type: object
      properties:
        clientId:
          description: Google OAuth client ID
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\.\-]+$
          example: 123456789012-abcdefghijklmnopqrstuvwxyz123456.apps.googleusercontent.com
        clientSecret:
          description: Google OAuth client secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
          example: GOCSPX-abc123def456ghi789jkl012
        enabled:
          description: Enable Google OAuth
          type: boolean
          default: false
          example: false
        redirectUrl:
          description: OAuth callback URL
          type: string
          format: uri
          maxLength: 2048
          example: http://localhost:8080/auth/oauth/google/callback
        scopes:
          description: OAuth scopes to request
          type: array
          default:
            - openid
            - profile
            - email
          items:
            type: string
            minLength: 1
            maxLength: 255
            pattern: ^[\w\s\-:\.]+$
          maxItems: 1000
          example:
            - openid
            - profile
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthLocal:
      title: ConfigAuthLocal
      description: Local username/password authentication
      type: object
      properties:
        accessTokenTTL:
          description: Access token time-to-live duration (e.g., "15m", "1h")
          type: string
          default: 15m
          minLength: 2
          maxLength: 20
          pattern: ^(\d+[smhd])+$
          example: 15m
        enabled:
          description: Enable local authentication
          type: boolean
          default: true
          example: true
        jwtSecret:
          description: Secret key for JWT token signing
          type: string
          default: change-me-in-production
          minLength: 32
          maxLength: 512
          pattern: ^[\w\-+=/.]+$
          example: your-256-bit-secret-key-here-change-in-production
        refreshTokenTTL:
          description: Refresh token time-to-live duration (e.g., "7d", "168h")
          type: string
          default: 168h
          minLength: 2
          maxLength: 20
          pattern: ^(\d+[smhd])+$
          example: 168h
      additionalProperties: false
      required:
        - enabled
        - jwtSecret
        - accessTokenTTL
        - refreshTokenTTL
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthMagicLink:
      title: ConfigAuthMagicLink
      description: Magic link authentication configuration
      type: object
      properties:
        deliveryMethods:
          description: Available delivery methods
          type: object
          properties:
            console:
              type: object
              properties:
                enabled:
                  description: Enable console output (development only)
                  type: boolean
                  default: false
                  example: false
              additionalProperties: false
            email:
              type: object
              properties:
                enabled:
                  type: boolean
                  default: true
                  example: true
                from:
                  type: string
                  format: email
                  maxLength: 255
                  example: noreply@archesai.com
              additionalProperties: false
            otp:
              type: object
              properties:
                enabled:
                  type: boolean
                  default: true
                  example: true
              additionalProperties: false
            webhook:
              type: object
              properties:
                enabled:
                  type: boolean
                  default: false
                  example: false
                url:
                  type: string
                  format: uri
                  maxLength: 2048
                  example: https://hooks.example.com/magic-link
              additionalProperties: false
          additionalProperties: false
        enabled:
          description: Enable magic link authentication
          type: boolean
          default: false
          example: true
        otpLength:
          description: Length of OTP code
          type: integer
          default: 6
          format: int32
          minimum: 4
          maximum: 8
          example: 6
        rateLimit:
          description: Rate limiting configuration
          type: object
          properties:
            maxAttempts:
              description: Maximum number of attempts within window
              type: integer
              default: 5
              format: int32
              minimum: 1
              maximum: 2147483647
              example: 5
            windowMinutes:
              description: Time window in minutes
              type: integer
              default: 15
              format: int32
              minimum: 1
              maximum: 2147483647
              example: 15
          additionalProperties: false
        tokenExpiry:
          description: Token expiry duration in minutes
          type: integer
          default: 15
          format: int32
          minimum: 1
          maximum: 60
          example: 15
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthMicrosoft:
      title: ConfigAuthMicrosoft
      description: Microsoft/Azure AD OAuth configuration
      type: object
      properties:
        clientId:
          description: Azure AD Application (client) ID
          type: string
          format: uuid
          minLength: 1
          maxLength: 255
          example: 12345678-1234-1234-1234-123456789012
        clientSecret:
          description: Azure AD client secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-~]+$
          example: abc~def123GHI456jkl789MNO012pqr345
        enabled:
          description: Enable Microsoft OAuth
          type: boolean
          default: false
          example: false
        redirectUrl:
          description: OAuth callback URL
          type: string
          format: uri
          maxLength: 2048
          example: http://localhost:8080/auth/oauth/microsoft/callback
        scopes:
          description: OAuth scopes to request
          type: array
          default:
            - openid
            - profile
            - email
            - User.Read
          items:
            type: string
            maxLength: 255
            pattern: ^[\w\s\-:\.]+$
          maxItems: 1000
          example:
            - openid
            - profile
        tenant:
          description: Azure AD tenant ID (use 'common' for multi-tenant)
          type: string
          default: common
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
          example: common
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthTwitter:
      title: ConfigAuthTwitter
      description: Twitter OAuth configuration
      type: object
      properties:
        callbackURL:
          description: OAuth callback URL
          type: string
          format: uri
          minLength: 1
          maxLength: 2048
          example: http://localhost:8080/auth/oauth/twitter/callback
        consumerKey:
          description: Twitter API consumer key
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
        consumerSecret:
          description: Twitter API consumer secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
        enabled:
          description: Enable Twitter OAuth
          type: boolean
          default: false
          example: true
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigBilling:
      title: ConfigBilling
      description: Billing configuration for Stripe
      type: object
      properties:
        enabled:
          description: Enable billing functionality
          type: boolean
          default: false
          example: true
        stripe:
          $ref: '#/components/schemas/ConfigStripe'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigDatabase:
      title: ConfigDatabase
      description: Database configuration for PostgreSQL
      type: object
      properties:
        type:
          description: Database type (postgresql or sqlite)
          type: string
          enum:
            - postgresql
            - sqlite
          default: postgresql
          example: postgresql
        connMaxIdleTime:
          description: Maximum connection idle time (e.g., "5m")
          type: string
          minLength: 2
          maxLength: 20
          pattern: ^(\d+[smh])+$
          example: 5m
        connMaxLifetime:
          description: Maximum connection lifetime (e.g., "30m")
          type: string
          minLength: 2
          maxLength: 20
          pattern: ^(\d+[smh])+$
          example: 30m
        enabled:
          description: Enable database
          type: boolean
          default: true
          example: true
        healthCheckPeriod:
          description: Health check period for connections (PostgreSQL)
          type: string
          minLength: 2
          maxLength: 20
          pattern: ^(\d+[smh])+$
          example: 30s
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed database deployment
          type: boolean
          default: false
          example: true
        maxConns:
          description: Maximum number of connections in pool (PostgreSQL)
          type: integer
          default: 25
          format: int32
          minimum: 1
          maximum: 2147483647
          example: 25
        minConns:
          description: Minimum number of connections in pool (PostgreSQL)
          type: integer
          default: 5
          format: int32
          minimum: 0
          maximum: 2147483647
          example: 5
        persistence:
          $ref: '#/components/schemas/ConfigPersistence'
        resources:
          $ref: '#/components/schemas/ConfigResource'
        runMigrations:
          description: Automatically run database migrations on startup
          type: boolean
          default: false
          example: true
        url:
          description: Database connection url/string
          type: string
          default: postgresql://admin:password@127.0.0.1:5432/archesai
          format: uri
          minLength: 1
          maxLength: 2048
          example: postgresql://admin:password@127.0.0.1:5432/archesai
      additionalProperties: false
      required:
        - enabled
        - url
        - type
        - maxConns
        - minConns
        - runMigrations
        - managed
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigEmail:
      title: ConfigEmail
      description: Email configuration for sending emails
      type: object
      properties:
        enabled:
          description: Enable email functionality
          type: boolean
          default: false
          example: true
        password:
          description: Password for the email service
          type: string
          maxLength: 255
          pattern: ^[\w\s\-.,!?()@#+/=]*$
          example: secret-password-123
        service:
          description: Email service provider (e.g., "gmail", "sendgrid", etc.)
          type: string
          maxLength: 255
          pattern: ^[\w\-]+$
          example: sendgrid
        user:
          description: Username for the email service
          type: string
          format: email
          maxLength: 255
          pattern: ^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$
          example: user@example.com
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigGeneration:
      title: ConfigGeneration
      description: Code generation configuration
      type: object
      properties:
        style:
          description: File output style
          type: string
          enum:
            - multi
            - single
          default: multi
        groups:
          description: Generator groups to enable (all enabled by default)
          type: object
          properties:
            schemas:
              description: Generate model schemas
              type: boolean
              default: true
            http:
              description: Generate HTTP handlers
              type: boolean
              default: true
            module:
              description: Generate go.mod and main.go
              type: boolean
              default: true
            operations:
              description: Generate operation types (use cases)
              type: boolean
              default: true
            postgres:
              description: Generate PostgreSQL repositories and migrations
              type: boolean
              default: true
            sqlite:
              description: Generate SQLite repositories
              type: boolean
              default: true
            web:
              description: Generate frontend web files
              type: boolean
              default: true
            wire:
              description: Generate app bootstrap and wiring
              type: boolean
              default: true
          additionalProperties: false
        includes:
          description: Built-in package includes
          type: array
          items:
            type: string
            enum:
              - server
              - auth
              - config
              - pipelines
              - executor
              - storage
          maxItems: 10
        lint:
          description: Enable strict linting
          type: boolean
        output:
          description: Output directory for generated files
          type: string
          minLength: 1
          maxLength: 4096
          pattern: ^[a-zA-Z0-9_./-]+$
        spec:
          description: Path to the OpenAPI specification file
          type: string
          minLength: 1
          maxLength: 4096
          pattern: ^[a-zA-Z0-9_./-]+$
      additionalProperties: false
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigGrafana:
      title: ConfigGrafana
      description: Grafana monitoring dashboard configuration
      type: object
      properties:
        enabled:
          description: Enable Grafana
          type: boolean
          default: false
          example: true
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed Grafana deployment
          type: boolean
          default: false
          example: true
        resources:
          $ref: '#/components/schemas/ConfigResource'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigImage:
      title: ConfigImage
      description: Container image configuration
      type: object
      properties:
        pullPolicy:
          description: Kubernetes image pull policy
          type: string
          enum:
            - Always
            - IfNotPresent
            - Never
          default: IfNotPresent
          example: Always
        repository:
          description: Container image repository
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[a-z0-9]+(([._]|__|[-]+)[a-z0-9]+)*(\/[a-z0-9]+(([._]|__|[-]+)[a-z0-9]+)*)*$
          example: archesai/archesai
        tag:
          description: Container image tag
          type: string
          default: latest
          minLength: 1
          maxLength: 255
          pattern: ^[a-zA-Z0-9_][a-zA-Z0-9._-]*$
          example: v1.0.0
      additionalProperties: false
      required:
        - pullPolicy
        - tag
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigImages:
      title: ConfigImages
      description: Container image configuration
      type: object
      properties:
        imagePullSecrets:
          description: List of Kubernetes secrets for pulling private images
          type: array
          default: []
          items:
            type: string
            minLength: 1
            maxLength: 255
            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
            example: regcred
          maxItems: 1000
        imageRegistry:
          description: Custom container registry URL (leave empty for Docker Hub)
          type: string
          default: ''
          maxLength: 2048
          pattern: ^(|[a-z0-9]([-a-z0-9\.]*[a-z0-9])?(:[0-9]+)?)$
          example: gcr.io
      additionalProperties: false
      required:
        - imagePullSecrets
        - imageRegistry
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigInfrastructure:
      title: ConfigInfrastructure
      description: Infrastructure configuration for Kubernetes deployments
      type: object
      properties:
        images:
          $ref: '#/components/schemas/ConfigImages'
        migrations:
          $ref: '#/components/schemas/ConfigMigrations'
        namespace:
          description: Kubernetes namespace where all resources will be deployed
          type: string
          default: arches-system
          minLength: 1
          maxLength: 255
          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
          example: arches-system
        serviceAccount:
          $ref: '#/components/schemas/ConfigServiceAccount'
      additionalProperties: false
      required:
        - images
        - migrations
        - namespace
        - serviceAccount
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigIngress:
      title: ConfigIngress
      description: Ingress configuration
      type: object
      properties:
        domain:
          description: Primary domain name for ingress routing
          type: string
          default: archesai.dev
          format: hostname
          minLength: 1
          maxLength: 255
          example: archesai.dev
        enabled:
          description: Enable ingress
          type: boolean
          default: false
          example: true
        tls:
          $ref: '#/components/schemas/ConfigTLS'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigIntelligence:
      title: ConfigIntelligence
      description: Intelligence configuration (LLMs, embeddings, scraper, speech, etc.)
      type: object
      properties:
        embedding:
          $ref: '#/components/schemas/ConfigLLM'
        llm:
          $ref: '#/components/schemas/ConfigLLM'
        runpod:
          $ref: '#/components/schemas/ConfigRunPod'
        scraper:
          $ref: '#/components/schemas/ConfigScraper'
        speech:
          $ref: '#/components/schemas/ConfigSpeech'
        unstructured:
          $ref: '#/components/schemas/ConfigUnstructured'
      additionalProperties: false
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigKubernetes:
      title: ConfigKubernetes
      description: Kubernetes-specific deployment configuration
      type: object
      properties:
        infrastructure:
          $ref: '#/components/schemas/ConfigInfrastructure'
        ingress:
          $ref: '#/components/schemas/ConfigIngress'
        monitoring:
          $ref: '#/components/schemas/ConfigMonitoring'
      additionalProperties: false
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigLLM:
      title: ConfigLLM
      description: Large Language Model configuration
      type: object
      properties:
        type:
          description: LLM provider type
          type: string
          enum:
            - ollama
            - openai
          default: ollama
          example: ollama
        endpoint:
          description: LLM service endpoint URL
          type: string
          format: uri
          minLength: 1
          maxLength: 2048
          example: http://localhost:11434
        token:
          description: Authentication token for LLM service
          type: string
          minLength: 1
          maxLength: 512
          pattern: ^[a-zA-Z0-9_\-\.]+$
          example: sk-...
      additionalProperties: false
      required:
        - type
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigLogging:
      title: ConfigLogging
      description: Logging configuration
      type: object
      properties:
        level:
          description: Minimum log level to output
          type: string
          enum:
            - fatal
            - error
            - warn
            - info
            - debug
            - trace
            - silent
          default: info
          example: fatal
        pretty:
          description: Enable pretty-printed logs for development
          type: boolean
          default: false
          example: true
      additionalProperties: false
      required:
        - level
        - pretty
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigLoki:
      title: ConfigLoki
      description: Loki log aggregation service configuration
      type: object
      properties:
        enabled:
          description: Enable Loki
          type: boolean
          default: false
          example: true
        host:
          description: Loki host URL
          type: string
          default: http://localhost:3100
          format: uri
          minLength: 1
          maxLength: 2048
          example: http://localhost:3100
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed Loki deployment
          type: boolean
          default: false
          example: true
        resources:
          $ref: '#/components/schemas/ConfigResource'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigMigrations:
      title: ConfigMigrations
      description: Database migration configuration
      type: object
      properties:
        enabled:
          description: Enable automatic DB migrations
          type: boolean
          default: false
          example: true
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigMonitoring:
      title: ConfigMonitoring
      description: Monitoring configuration for Grafana and Loki
      type: object
      properties:
        grafana:
          $ref: '#/components/schemas/ConfigGrafana'
        loki:
          $ref: '#/components/schemas/ConfigLoki'
      additionalProperties: false
      required:
        - grafana
        - loki
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigPersistence:
      title: ConfigPersistence
      description: Persistent storage configuration
      type: object
      properties:
        enabled:
          description: Enable persistent storage
          type: boolean
          default: true
          example: true
        size:
          description: Size of persistent volume
          type: string
          default: 10Gi
          minLength: 1
          maxLength: 255
          pattern: ^[0-9]+(Ei|Pi|Ti|Gi|Mi|Ki|E|P|T|G|M|K)?$
          example: 10Gi
      additionalProperties: false
      required:
        - enabled
        - size
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigPlatform:
      title: ConfigPlatform
      description: Platform configuration (host, image, resources)
      type: object
      properties:
        enabled:
          description: Enable platform service
          type: boolean
          default: false
          example: true
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed platform deployment
          type: boolean
          default: false
          example: true
        resources:
          $ref: '#/components/schemas/ConfigResource'
        url:
          description: Platform URL
          type: string
          default: http://localhost:3000
          format: uri
          maxLength: 2048
          example: https://platform.archesai.dev
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigRedis:
      title: ConfigRedis
      description: Redis configuration
      type: object
      properties:
        auth:
          description: Redis authentication password
          type: string
          default: password
          minLength: 1
          maxLength: 72
          pattern: ^[\w\-@./#&+!*()]+$
          example: secure-redis-password
        ca:
          description: Certificate Authority for TLS (optional)
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\s\-./]+$
          example: /etc/ssl/certs/ca.pem
        enabled:
          description: Enable Redis
          type: boolean
          default: false
          example: true
        host:
          description: Redis hostname or IP
          type: string
          default: localhost
          minLength: 1
          maxLength: 255
          pattern: ^[a-zA-Z0-9.\-]+$
          example: redis.example.com
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed Redis deployment
          type: boolean
          default: false
          example: true
        persistence:
          $ref: '#/components/schemas/ConfigPersistence'
        port:
          description: Redis port number
          type: integer
          default: 6379
          format: int32
          minimum: 1
          maximum: 65535
          example: 6379
        resources:
          $ref: '#/components/schemas/ConfigResource'
      additionalProperties: false
      required:
        - enabled
        - auth
        - host
        - port
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigResource:
      title: ConfigResource
      description: Kubernetes resource configuration
      type: object
      properties:
        limits:
          description: Resource limits
          type: object
          properties:
            cpu:
              description: Maximum CPU allocation
              type: string
              default: 1000m
              minLength: 1
              maxLength: 255
              pattern: ^\d+m?$
              example: 1000m
            memory:
              description: Maximum memory allocation
              type: string
              default: 1Gi
              minLength: 1
              maxLength: 255
              pattern: ^\d+(Mi|Gi|Ki)?$
              example: 1Gi
          additionalProperties: false
          required:
            - cpu
            - memory
        requests:
          description: Resource requests
          type: object
          properties:
            cpu:
              description: Requested CPU allocation
              type: string
              default: 100m
              minLength: 1
              maxLength: 255
              pattern: ^\d+m?$
              example: 100m
            memory:
              description: Requested memory allocation
              type: string
              default: 128Mi
              minLength: 1
              maxLength: 255
              pattern: ^\d+(Mi|Gi|Ki)?$
              example: 128Mi
          additionalProperties: false
          required:
            - cpu
            - memory
      additionalProperties: false
      required:
        - limits
        - requests
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigRunPod:
      title: ConfigRunPod
      description: RunPod serverless GPU configuration
      type: object
      properties:
        enabled:
          description: Enable RunPod integration
          type: boolean
          default: false
          example: true
        token:
          description: RunPod API token
          type: string
          minLength: 1
          maxLength: 512
          pattern: ^[a-zA-Z0-9_\-\.]+$
          example: rp-...
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigScraper:
      title: ConfigScraper
      description: Web scraping service configuration
      type: object
      properties:
        enabled:
          description: Enable scraper service
          type: boolean
          default: false
          example: true
        endpoint:
          description: Web scraper service endpoint URL
          type: string
          format: uri
          minLength: 1
          maxLength: 2048
          example: http://scraper:8080
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed scraper deployment
          type: boolean
          default: false
          example: true
        resources:
          $ref: '#/components/schemas/ConfigResource'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigServiceAccount:
      title: ConfigServiceAccount
      description: Kubernetes service account configuration
      type: object
      properties:
        name:
          description: Custom service account name
          type: string
          default: ''
          maxLength: 255
          pattern: ^(|[a-z0-9]([-a-z0-9]*[a-z0-9])?)$
          example: archesai-sa
        create:
          description: Create dedicated service account
          type: boolean
          default: true
          example: true
      additionalProperties: false
      required:
        - create
        - name
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigSpeech:
      title: ConfigSpeech
      description: Speech recognition and TTS services
      type: object
      properties:
        enabled:
          description: Enable speech services
          type: boolean
          default: false
          example: true
        token:
          description: Speech-to-text service API token
          type: string
          minLength: 1
          maxLength: 512
          pattern: ^[a-zA-Z0-9_\-\.]+$
          example: sk-...
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigStorage:
      title: ConfigStorage
      description: Object storage configuration for MinIO or S3-compatible services
      type: object
      properties:
        accesskey:
          description: MinIO/S3 access key ID
          type: string
          default: minioadmin
          minLength: 1
          maxLength: 255
          pattern: ^[A-Z0-9]+$
          example: AKIAIOSFODNN7EXAMPLE
        bucket:
          description: S3 bucket name
          type: string
          default: archesai
          minLength: 1
          maxLength: 255
          pattern: ^[a-z0-9][a-z0-9\-]*[a-z0-9]$
          example: archesai
        enabled:
          description: Enable object storage
          type: boolean
          default: false
          example: true
        endpoint:
          description: MinIO server endpoint URL
          type: string
          default: http://localhost:9000
          format: uri
          minLength: 1
          maxLength: 2048
          example: http://localhost:9000
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed storage deployment
          type: boolean
          default: false
          example: true
        persistence:
          $ref: '#/components/schemas/ConfigPersistence'
        resources:
          $ref: '#/components/schemas/ConfigResource'
        secretkey:
          description: MinIO/S3 secret access key
          type: string
          default: minioadmin
          minLength: 1
          maxLength: 255
          pattern: ^[A-Za-z0-9+/=]+$
          example: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
      additionalProperties: false
      required:
        - enabled
        - accesskey
        - bucket
        - endpoint
        - secretkey
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigStripe:
      title: ConfigStripe
      description: Stripe payment configuration
      type: object
      properties:
        token:
          description: Stripe secret API key
          type: string
          minLength: 1
          maxLength: 512
          pattern: ^[a-zA-Z0-9_]+$
          example: sk_test_51H...
        whsec:
          description: Stripe webhook endpoint secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[a-zA-Z0-9_]+$
          example: whsec_...
      additionalProperties: false
      required:
        - token
        - whsec
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigTLS:
      title: ConfigTLS
      description: TLS configuration
      type: object
      properties:
        enabled:
          description: Enable TLS/SSL
          type: boolean
          default: true
          example: true
        issuer:
          description: Cert-manager ClusterIssuer
          type: string
          default: letsencrypt-staging
          minLength: 1
          maxLength: 255
          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
          example: letsencrypt-prod
        secretName:
          description: Kubernetes secret name for TLS certificates
          type: string
          default: archesai-tls
          minLength: 1
          maxLength: 255
          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
          example: archesai-tls
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigUnstructured:
      title: ConfigUnstructured
      description: Unstructured.io service for document parsing
      type: object
      properties:
        enabled:
          description: Enable unstructured document parsing
          type: boolean
          default: false
          example: true
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed unstructured deployment
          type: boolean
          default: false
          example: true
        resources:
          $ref: '#/components/schemas/ConfigResource'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    CreateTodoBody:
      title: CreateTodoBody
      type: object
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\s\-.,!?()@#+/']+$
        completed:
          type: boolean
          default: false
      required:
        - title
    FilterNode:
      title: FilterNode
      description: A recursive filter node that can be a condition or group
      type: object
      properties:
        type:
          description: The type of filter operation
          type: string
          enum:
            - and
            - or
            - eq
            - ne
            - gt
            - gte
            - lt
            - lte
            - contains
            - startsWith
            - endsWith
          example: eq
        field:
          description: The field to filter on (for leaf conditions)
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[a-zA-Z_][a-zA-Z0-9_]*$
          example: name
        value:
          description: The value to compare against (for leaf conditions)
          oneOf:
            - type: string
              maxLength: 1000
              pattern: ^[\w\s\-.,!?()@#+/':;]+$
            - type: integer
              format: int64
              minimum: -9223372036854775808
              maximum: 9223372036854775807
            - type: boolean
          example: example-value
      required:
        - type
      x-codegen-schema-type: valueobject
      x-internal: server
    Health:
      title: Health
      description: Health check response
      type: object
      properties:
        services:
          type: object
          properties:
            database:
              type: string
              enum:
                - healthy
                - unhealthy
                - degraded
              example: healthy
            email:
              type: string
              enum:
                - healthy
                - unhealthy
                - degraded
              example: healthy
            redis:
              type: string
              enum:
                - healthy
                - unhealthy
                - degraded
              example: healthy
          additionalProperties: false
          required:
            - database
            - email
            - redis
        timestamp:
          type: string
          format: date-time
          maxLength: 64
          example: '2024-01-15T09:30:00Z'
        uptime:
          description: System uptime in seconds
          type: integer
          format: int64
          minimum: 0
          maximum: 9223372036854775807
          example: 86400
      additionalProperties: false
      required:
        - services
        - timestamp
        - uptime
      x-codegen-schema-type: valueobject
      x-internal: server
    Invitation:
      title: Invitation
      description: Schema for Invitation entity
      allOf:
        - $ref: '#/components/schemas/Base'
        - type: object
          properties:
            email:
              description: The email of the invitated user
              type: string
              format: email
              minLength: 1
              maxLength: 255
              example: user@example.com
            expiresAt:
              description: The date and time when the invitation expires
              type: string
              format: date-time
              minLength: 1
              maxLength: 255
              example: '2023-12-31T23:59:59Z'
            inviterID:
              description: The ID of the user who sent this invitation
              type: string
              format: uuid
              minLength: 36
              maxLength: 36
              example: 550e8400-e29b-41d4-a716-446655440000
            organizationID:
              description: The organization the user is being invited to join
              type: string
              format: uuid
              minLength: 36
              maxLength: 36
              example: 550e8400-e29b-41d4-a716-446655440000
            role:
              description: The role of the invitation
              type: string
              enum:
                - admin
                - owner
                - basic
              default: basic
              example: admin
            status:
              description: The status of the invitation, e.g., pending, accepted, declined
              type: string
              enum:
                - pending
                - accepted
                - declined
                - expired
              default: pending
              example: pending
          required:
            - email
            - expiresAt
            - inviterID
            - organizationID
            - role
            - status
      unevaluatedProperties: false
      x-codegen:
        repository:
          additionalMethods:
            - name: ListInvitationsByOrganization
              params:
                - name: organizationID
                  type: string
                  format: uuid
                  maxLength: 36
              returns: multiple
            - name: GetInvitationByEmail
              params:
                - name: email
                  type: string
                - name: organizationID
                  type: string
                  format: uuid
                  maxLength: 36
              returns: single
            - name: ListInvitationsByInviter
              params:
                - name: inviterID
                  type: string
                  format: uuid
                  maxLength: 36
              returns: multiple
          excludeFromUpdate:
            - InviterID
            - OrganizationID
          indices:
            - organizationID
            - inviterID
          relations:
            - field: inviterID
              onDelete: CASCADE
              onUpdate: NO_ACTION
              references: user
            - field: organizationID
              onDelete: CASCADE
              onUpdate: NO_ACTION
              references: organization
      x-codegen-schema-type: entity
      x-internal: auth
    MagicLinkToken:
      title: MagicLinkToken
      description: Schema for MagicLinkToken entity
      type: object
      properties:
        code:
          description: Optional 6-digit OTP code
          oneOf:
            - type: string
              minLength: 6
              maxLength: 6
              pattern: ^[0-9]{6}$
            - type: 'null'
          example: '123456'
        createdAt:
          description: When the token was created
          oneOf:
            - type: string
              format: date-time
              minLength: 1
              maxLength: 512
            - type: 'null'
          example: '2023-10-05T14:48:00Z'
        deliveryMethod:
          description: How the magic link was delivered
          type: [string, 'null']
          enum:
            - email
            - console
            - webhook
            - otp
            - file
          example: email
        expiresAt:
          description: When the token expires
          type: string
          format: date-time
          minLength: 1
          maxLength: 512
          example: '2023-10-05T14:48:00Z'
        id:
          description: Unique identifier for the magic link token
          type: string
          format: uuid
          minLength: 36
          maxLength: 36
          example: 550e8400-e29b-41d4-a716-446655440000
        identifier:
          description: Email or username for authentication
          type: string
          format: email
          minLength: 1
          maxLength: 255
          example: user@example.com
        ipAddress:
          description: IP address of the request
          oneOf:
            - type: string
              format: ipv4
              minLength: 7
              maxLength: 45
            - type: 'null'
          example: 192.168.1.1
        token:
          description: The raw magic link token
          type: string
          minLength: 32
          maxLength: 512
          pattern: ^[a-zA-Z0-9]+$
          example: abc123def456789ghi012jkl345mno678pqr901stu234
        tokenHash:
          description: SHA256 hash of the magic link token
          type: string
          minLength: 64
          maxLength: 64
          pattern: ^[a-f0-9]{64}$
          example: a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3
        usedAt:
          description: When the token was used (null if unused)
          oneOf:
            - type: string
              format: date-time
              minLength: 1
              maxLength: 512
            - type: 'null'
          example: '2023-10-05T14:48:00Z'
        userAgent:
          description: User agent of the request
          oneOf:
            - type: string
              minLength: 1
              maxLength: 512
              pattern: ^[\w\s\-.,!?()@#+/\(\):;]+$
            - type: 'null'
          example: Mozilla/5.0
        userID:
          description: User ID if token is for existing user
          oneOf:
            - type: string
              format: uuid
              minLength: 36
              maxLength: 36
            - type: 'null'
          example: 550e8400-e29b-41d4-a716-446655440000
      additionalProperties: false
      required:
        - id
        - tokenHash
        - identifier
        - expiresAt
        - createdAt
      x-codegen-schema-type: valueobject
      x-internal: auth
    Member:
      title: Member
      description: Schema for Member entity
      allOf:
        - $ref: '#/components/schemas/Base'
        - type: object
          properties:
            organizationID:
              description: The organization this member belongs to
              type: string
              format: uuid
              minLength: 36
              maxLength: 36
              example: 550e8400-e29b-41d4-a716-446655440000
            role:
              description: The role of the member
              type: string
              enum:
                - admin
                - owner
                - basic
              default: basic
              example: admin
            userID:
              description: The user who is a member of the organization
              type: string
              format: uuid
              minLength: 36
              maxLength: 36
              example: 550e8400-e29b-41d4-a716-446655440000
          required:
            - organizationID
            - role
            - userID
      unevaluatedProperties: false
      x-codegen:
        repository:
          additionalMethods:
            - name: ListMembersByOrganization
              params:
                - name: organizationID
                  type: string
                  format: uuid
                  maxLength: 36
              returns: multiple
            - name: ListMembersByUser
              params:
                - name: userID
                  type: string
                  format: uuid
                  maxLength: 36
              returns: multiple
            - name: GetMemberByUserAndOrganization
              params:
                - name: userID
                  type: string
                  format: uuid
                  maxLength: 36
                - name: organizationID
                  type: string
                  format: uuid
                  maxLength: 36
              returns: single
          excludeFromUpdate:
            - OrganizationID
            - UserID
          indices:
            - organizationID
            - userID
          relations:
            - field: organizationID
              onDelete: CASCADE
              onUpdate: NO_ACTION
              references: organization
            - field: userID
              onDelete: CASCADE
              onUpdate: NO_ACTION
              references: user
      x-codegen-schema-type: entity
      x-internal: auth
    Organization:
      title: Organization
      description: Schema for Organization entity
      allOf:
        - $ref: '#/components/schemas/Base'
        - type: object
          properties:
            name:
              description: The organization's display name
              type: string
              minLength: 1
              maxLength: 255
              pattern: ^[\w\s\-.,!?()@#+/'&]+$
              example: Acme Corporation
            billingEmail:
              description: Email address for billing communications
              oneOf:
                - type: string
                  format: email
                  minLength: 5
                  maxLength: 255
                - type: 'null'
              example: billing@acme.com
            credits:
              description: Available credits for this organization
              type: integer
              default: 0
              format: int32
              minimum: 0
              maximum: 2147483647
              example: 1000
            logo:
              description: The organization's logo URL
              oneOf:
                - type: string
                  format: uri
                  minLength: 1
                  maxLength: 2048
                - type: 'null'
              example: https://example.com/org-logo.png
            plan:
              description: The current subscription plan
              type: string
              enum:
                - FREE
                - BASIC
                - STANDARD
                - PREMIUM
                - UNLIMITED
              default: FREE
              example: STANDARD
            slug:
              description: URL-friendly unique identifier for the organization
              type: string
              minLength: 3
              maxLength: 50
              pattern: ^[a-z0-9]+(?:-[a-z0-9]+)*$
              example: acme-corp
            stripeCustomerIdentifier:
              description: Stripe customer identifier
              type: string
              minLength: 1
              maxLength: 255
              pattern: ^cus_[a-zA-Z0-9]+$
              example: cus_1234567890
              x-sensitive: true
          required:
            - name
            - slug
            - plan
            - credits
            - stripeCustomerIdentifier
            - logo
            - billingEmail
      unevaluatedProperties: false
      x-codegen:
        repository:
          additionalMethods:
            - name: GetOrganizationBySlug
              params:
                - name: slug
                  type: string
              returns: single
            - name: GetOrganizationByStripeCustomerID
              params:
                - name: stripeCustomerIdentifier
                  type: string
              returns: single
          excludeFromUpdate:
            - Slug
            - StripeCustomerIdentifier
          indices:
            - slug
            - stripeCustomerIdentifier
      x-codegen-schema-type: entity
      x-internal: auth
    Page:
      title: Page
      description: Pagination parameters (limit & offset)
      type: object
      properties:
        limit:
          description: Maximum number of items to return
          type: integer
          default: 10
          format: int32
          minimum: 1
          maximum: 100
          example: 10
        offset:
          description: Number of items to skip before starting to collect the result set
          type: integer
          default: 0
          format: int32
          minimum: 0
          maximum: 9007199254740991
          example: 0
      additionalProperties: false
      x-codegen-schema-type: valueobject
      x-internal: server
    PaginationMeta:
      title: PaginationMeta
      # yaml-language-server: $schema=https://spec.openapis.org/oas/3.2/schema/2025-09-17#/$defs/schema
      description: Pagination metadata
      type: object
      properties:
        total:
          description: Total number of items in the collection
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
          example: 42
      additionalProperties: false
      required:
        - total
      x-codegen-schema-type: valueobject
      x-internal: server
    Problem:
      title: Problem
      description: RFC 7807 (Problem Details) compliant error response
      type: object
      properties:
        title:
          description: Short, human-readable summary
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\s\-.,!?()]+$
          example: Validation Failed
        type:
          description: URI identifying the problem type
          type: string
          default: about:blank
          format: uri
          minLength: 1
          maxLength: 2048
          example: https://api.example.com/errors/validation-failed
        detail:
          description: Human-readable explanation specific to this occurrence
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\s\-.,!?()]+$
          example: The request body contains invalid fields
        instance:
          description: URI identifying the specific occurrence
          type: string
          format: uri
          maxLength: 2048
          example: https://api.example.com/auth/users/123
        status:
          description: HTTP status code
          type: integer
          format: int32
          minimum: 100
          maximum: 599
          example: 400
      additionalProperties: false
      required:
        - status
        - title
      x-codegen-schema-type: valueobject
      x-internal: server
    Session:
      title: Session
      description: Schema for Session entity
      allOf:
        - $ref: '#/components/schemas/Base'
        - type: object
          properties:
            authMethod:
              description: The authentication method used (magic_link, oauth_google, oauth_github, etc.)
              oneOf:
                - type: string
                  minLength: 1
                  maxLength: 100
                  pattern: ^[a-z_]+$
                - type: 'null'
              example: magic_link
            authProvider:
              description: The authentication provider (google, github, microsoft, local)
              type: [string, 'null']
              enum:
                - local
                - google
                - github
                - microsoft
                - apple
              example: local
            expiresAt:
              description: The expiration date of the session
              type: string
              format: date-time
              minLength: 1
              maxLength: 255
              example: '2023-10-05T14:48:00Z'
            ipAddress:
              description: The IP address of the session
              oneOf:
                - type: string
                  format: ipv4
                  minLength: 7
                  maxLength: 45
                - type: 'null'
              example: 192.168.1.1
            organizationID:
              description: The organization ID for this session (nullable for users without org)
              oneOf:
                - type: string
                  format: uuid
                  minLength: 36
                  maxLength: 36
                - type: 'null'
              example: 550e8400-e29b-41d4-a716-446655440000
            token:
              description: The session token
              type: string
              minLength: 1
              maxLength: 512
              pattern: ^[A-Za-z0-9_\-\.]+$
              example: eyJhbGciOiJIUzI1NiIs...
            userAgent:
              description: The user agent of the session
              oneOf:
                - type: string
                  minLength: 1
                  maxLength: 255
                  pattern: ^[\w\s\-.,!?()@#+/\(\):;]+$
                - type: 'null'
              example: Mozilla/5.0 (Windows NT 10.0; Win64; x64)
            userID:
              description: The user who owns this session
              type: string
              format: uuid
              minLength: 36
              maxLength: 36
              example: 550e8400-e29b-41d4-a716-446655440000
          required:
            - expiresAt
            - token
            - userID
            - organizationID
            - authMethod
            - authProvider
            - ipAddress
            - userAgent
      unevaluatedProperties: false
      example:
        authMethod: magic_link
        authProvider: local
        createdAt: '2023-10-05T14:48:00Z'
        expiresAt: '2023-10-05T14:48:00Z'
        id: 550e8400-e29b-41d4-a716-446655440000
        ipAddress:
        organizationID: 550e8400-e29b-41d4-a716-446655440000
        updatedAt: '2023-10-05T14:48:00Z'
      x-codegen:
        repository:
          excludeFromUpdate:
            - IPAddress
            - UserID
            - UserAgent
            - Token
          indices:
            - userID
            - token
          relations:
            - field: userID
              onDelete: CASCADE
              onUpdate: NO_ACTION
              references: user
      x-codegen-schema-type: entity
      x-internal: auth
    Todo:
      title: Todo
      allOf:
        - $ref: '#/components/schemas/Base'
        - type: object
          properties:
            title:
              type: string
              minLength: 1
              maxLength: 255
              pattern: ^[\w\s\-.,!?()@#+/']+$
            completed:
              type: boolean
          required:
            - title
            - completed
      x-codegen-schema-type: entity
    UUID:
      title: UUID
      description: UUID identifier
      type: string
      format: uuid
      minLength: 36
      maxLength: 36
      example: 550e8400-e29b-41d4-a716-446655440000
      x-codegen-schema-type: valueobject
      x-internal: server
    UpdateTodoBody:
      title: UpdateTodoBody
      type: object
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\s\-.,!?()@#+/']+$
        completed:
          type: boolean
    User:
      title: User
      description: Schema for User entity
      allOf:
        - $ref: '#/components/schemas/Base'
        - type: object
          properties:
            name:
              description: The user's display name
              type: string
              minLength: 1
              maxLength: 255
              pattern: ^[\w\s\-.,!?()@#+/']+$
              example: John Doe
            email:
              description: The user's email address
              type: string
              format: email
              minLength: 5
              maxLength: 255
              example: user@example.com
            emailVerified:
              description: Whether the user's email has been verified
              type: boolean
              default: false
              example: true
            image:
              description: The user's avatar image URL
              oneOf:
                - type: string
                  format: uri
                  minLength: 5
                  maxLength: 2048
                - type: 'null'
              example: https://example.com/avatar.jpg
          required:
            - email
            - emailVerified
            - name
            - image
      unevaluatedProperties: false
      x-codegen:
        repository:
          additionalMethods:
            - name: GetUserByEmail
              params:
                - name: email
                  type: string
              returns: single
            - name: GetUserBySessionID
              params:
                - name: sessionID
                  type: string
                  format: uuid
                  maxLength: 36
              returns: single
          indices:
            - email
      x-codegen-schema-type: entity
      x-internal: auth
  responses:
    APIKeyListResponse:
      description: API keys retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/APIKey'
                maxItems: 10000
              meta:
                $ref: '#/components/schemas/PaginationMeta'
            additionalProperties: false
            required:
              - data
              - meta
    APIKeyResponse:
      description: API key retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: '#/components/schemas/APIKey'
            additionalProperties: false
            required:
              - data
    AccountListResponse:
      description: Accounts retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/Account'
                maxItems: 10000
              meta:
                $ref: '#/components/schemas/PaginationMeta'
            additionalProperties: false
            required:
              - data
              - meta
    AccountResponse:
      description: Account retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: '#/components/schemas/Account'
            additionalProperties: false
            required:
              - data
    BadRequest:
      description: 400 Bad Request
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    ConfigResponse:
      description: Current configuration
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            description: Configuration object
            type: object
            properties:
              data:
                $ref: '#/components/schemas/Config'
    Conflict:
      description: 409 Conflict
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    EmailVerificationResponse:
      description: Email verified successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              session:
                $ref: '#/components/schemas/Session'
              user:
                $ref: '#/components/schemas/User'
            additionalProperties: false
            required:
              - session
              - user
    HealthResponse:
      description: Health status retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Health'
    InternalServerError:
      description: Internal server error
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    InvitationListResponse:
      description: Invitations retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/Invitation'
                maxItems: 10000
              meta:
                $ref: '#/components/schemas/PaginationMeta'
            additionalProperties: false
            required:
              - data
              - meta
    InvitationResponse:
      description: Invitation retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: '#/components/schemas/Invitation'
            additionalProperties: false
            required:
              - data
    LogoutResponse:
      description: Logout successful
      headers:
        Set-Cookie:
          $ref: '#/components/headers/SetCookie'
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                minLength: 1
                maxLength: 255
                pattern: ^[\w\s\-.,!?()]+$
                example: Successfully logged out
            additionalProperties: false
            required:
              - message
          example:
            message: Successfully logged out
    MemberListResponse:
      description: Members retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/Member'
                maxItems: 10000
              meta:
                $ref: '#/components/schemas/PaginationMeta'
            additionalProperties: false
            required:
              - data
              - meta
    MemberResponse:
      description: Member retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: '#/components/schemas/Member'
            additionalProperties: false
            required:
              - data
    NoContent:
      description: 204 No Content
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
    NotFound:
      description: 404 Not Found
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    OrganizationListResponse:
      description: Organizations retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/Organization'
                maxItems: 10000
              meta:
                $ref: '#/components/schemas/PaginationMeta'
            additionalProperties: false
            required:
              - data
              - meta
          example:
            data:
              - name: Acme Corporation
                billingEmail: billing@acme.com
                createdAt: '2024-01-15T09:30:00Z'
                credits: 1000
                id: 550e8400-e29b-41d4-a716-446655440000
                logo: https://example.com/org-logo.png
                plan: STANDARD
                slug: acme-corp
                stripeCustomerIdentifier: cus_1234567890
                updatedAt: '2024-01-15T09:30:00Z'
            meta:
              total: 1
    OrganizationResponse:
      description: Organization retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: '#/components/schemas/Organization'
            additionalProperties: false
            required:
              - data
          example:
            data:
              name: Acme Corporation
              billingEmail: billing@acme.com
              createdAt: '2024-01-15T09:30:00Z'
              credits: 1000
              id: 550e8400-e29b-41d4-a716-446655440000
              logo: https://example.com/org-logo.png
              plan: STANDARD
              slug: acme-corp
              stripeCustomerIdentifier: cus_1234567890
              updatedAt: '2024-01-15T09:30:00Z'
    SessionCreated:
      description: Login successful
      headers:
        Set-Cookie:
          $ref: '#/components/headers/SetCookie'
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Session'
    SessionListResponse:
      description: Sessions retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/Session'
                maxItems: 10000
              meta:
                $ref: '#/components/schemas/PaginationMeta'
            additionalProperties: false
            required:
              - data
              - meta
    SessionResponse:
      description: Session retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: '#/components/schemas/Session'
            additionalProperties: false
            required:
              - data
    TodoListResponse:
      description: A list of todo items
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/Todo'
                maxItems: 1000
              meta:
                $ref: '#/components/schemas/PaginationMeta'
            required:
              - data
              - meta
    TodoResponse:
      description: A single todo item
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: '#/components/schemas/Todo'
            required:
              - data
    TooManyRequests:
      description: Too many requests - rate limit exceeded
      headers:
        Retry-After:
          $ref: '#/components/headers/RetryAfter'
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    Unauthorized:
      description: 401 Unauthorized
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    UnprocessableEntity:
      description: 422 Unprocessable Entity
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    UserListResponse:
      description: Users retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/User'
                maxItems: 10000
              meta:
                $ref: '#/components/schemas/PaginationMeta'
            additionalProperties: false
            required:
              - data
              - meta
          example:
            data:
              - name: John Doe
                createdAt: '2024-01-15T09:30:00Z'
                email: john@example.com
                emailVerified: true
                id: 550e8400-e29b-41d4-a716-446655440001
                image: https://example.com/avatar.jpg
                updatedAt: '2024-01-15T09:30:00Z'
            meta:
              total: 1
    UserResponse:
      description: User retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: '#/components/schemas/User'
            additionalProperties: false
            required:
              - data
          example:
            data:
              name: John Doe
              createdAt: '2024-01-15T09:30:00Z'
              email: user@example.com
              emailVerified: true
              id: 550e8400-e29b-41d4-a716-446655440000
              image: https://example.com/avatar.jpg
              updatedAt: '2024-01-15T09:30:00Z'
  parameters:
    APIKeysFilter:
      name: filter
      description: Filter by field values
      required: false
      schema:
        $ref: '#/components/schemas/FilterNode'
      example:
        type: eq
        field: userID
        value: 550e8400-e29b-41d4-a716-446655440000
      in: query
      style: deepObject
      explode: true
    APIKeysSort:
      name: sort
      description: The sort parameter
      required: false
      schema:
        type: array
        items:
          type: object
          properties:
            field:
              type: string
              enum:
                - createdAt
                - id
                - updatedAt
                - userID
                - organizationID
                - keyHash
                - name
                - prefix
                - rateLimit
                - lastUsedAt
                - expiresAt
              example: createdAt
            order:
              type: string
              enum:
                - asc
                - desc
              example: desc
          required:
            - field
            - order
        maxItems: 10
      example:
        - field: createdAt
          order: desc
      in: query
      style: form
      explode: true
    AccountsFilter:
      name: filter
      description: Filter by field values
      required: false
      schema:
        $ref: '#/components/schemas/FilterNode'
      example:
        type: eq
        field: providerID
        value: google
      in: query
      style: deepObject
      explode: true
    AccountsSort:
      name: sort
      description: The sort parameter
      required: false
      schema:
        type: array
        items:
          type: object
          properties:
            field:
              type: string
              enum:
                - createdAt
                - id
                - updatedAt
                - accessToken
                - accessTokenExpiresAt
                - accountID
                - idToken
                - providerID
                - refreshToken
                - refreshTokenExpiresAt
                - scope
                - userID
              example: createdAt
            order:
              type: string
              enum:
                - asc
                - desc
              example: asc
          required:
            - field
            - order
        maxItems: 10
      example:
        - field: createdAt
          order: desc
      in: query
      style: form
      explode: true
    ID:
      name: id
      description: The unique identifier of the resource
      required: true
      schema:
        description: UUID identifier
        type: string
        format: uuid
        minLength: 36
        maxLength: 36
        example: 550e8400-e29b-41d4-a716-446655440000
      in: path
    InvitationsFilter:
      name: filter
      description: Filter by field values
      required: false
      schema:
        $ref: '#/components/schemas/FilterNode'
      example:
        type: eq
        field: status
        value: PENDING
      in: query
      style: deepObject
      explode: true
    InvitationsSort:
      name: sort
      description: The sort parameter
      required: false
      schema:
        type: array
        items:
          type: object
          properties:
            field:
              type: string
              enum:
                - createdAt
                - id
                - updatedAt
                - email
                - expiresAt
                - inviterID
                - organizationID
                - role
                - status
              example: createdAt
            order:
              type: string
              enum:
                - asc
                - desc
              example: asc
          required:
            - field
            - order
        maxItems: 10
      example:
        - field: createdAt
          order: desc
      in: query
      style: form
      explode: true
    MembersFilter:
      name: filter
      description: Filter by field values
      required: false
      schema:
        $ref: '#/components/schemas/FilterNode'
      example:
        type: eq
        field: role
        value: ADMIN
      in: query
      style: deepObject
      explode: true
    MembersSort:
      name: sort
      description: The sort parameter
      required: false
      schema:
        type: array
        items:
          type: object
          properties:
            field:
              type: string
              enum:
                - createdAt
                - id
                - updatedAt
                - organizationID
                - role
                - userID
              example: createdAt
            order:
              type: string
              enum:
                - asc
                - desc
              example: asc
          required:
            - field
            - order
        maxItems: 10
      example:
        - field: createdAt
          order: desc
      in: query
      style: form
      explode: true
    OrganizationID:
      name: organizationID
      description: Organization ID
      required: true
      schema:
        type: string
        format: uuid
        maxLength: 36
      in: path
    OrganizationsFilter:
      name: filter
      description: Filter by field values
      required: false
      schema:
        $ref: '#/components/schemas/FilterNode'
      example:
        type: eq
        field: name
        value: Example Organization
      in: query
      style: deepObject
      explode: true
    OrganizationsSort:
      name: sort
      description: The sort parameter
      required: false
      schema:
        type: array
        items:
          type: object
          properties:
            field:
              type: string
              enum:
                - createdAt
                - id
                - updatedAt
                - billingEmail
                - credits
                - logo
                - metadata
                - name
                - plan
                - slug
                - stripeCustomerIdentifier
              example: createdAt
            order:
              type: string
              enum:
                - asc
                - desc
              example: asc
          required:
            - field
            - order
        maxItems: 10
      example:
        - field: createdAt
          order: desc
      in: query
      style: form
      explode: true
    PageQuery:
      name: page
      description: The page parameter
      required: false
      schema:
        $ref: '#/components/schemas/Page'
      example:
        limit: 10
        offset: 0
      in: query
      style: form
      explode: true
    ResourceID:
      name: id
      description: The unique identifier of the resource.
      required: true
      schema:
        $ref: '#/components/schemas/UUID'
      in: path
    SessionsFilter:
      name: filter
      description: Filter by field values
      required: false
      schema:
        $ref: '#/components/schemas/FilterNode'
      example:
        type: eq
        field: userID
        value: 550e8400-e29b-41d4-a716-446655440000
      in: query
      style: deepObject
      explode: true
    SessionsSort:
      name: sort
      description: The sort parameter
      required: false
      schema:
        type: array
        items:
          type: object
          properties:
            field:
              type: string
              enum:
                - createdAt
                - id
                - updatedAt
                - organizationID
                - expiresAt
                - ipAddress
                - token
                - userAgent
                - userID
              example: createdAt
            order:
              type: string
              enum:
                - asc
                - desc
              example: asc
          required:
            - field
            - order
        maxItems: 10
      example:
        - field: createdAt
          order: desc
      in: query
      style: form
      explode: true
    TodosFilter:
      name: filter
      description: Filter criteria for todos
      required: false
      schema:
        $ref: '#/components/schemas/FilterNode'
      in: query
      style: deepObject
      explode: true
    TodosSort:
      name: sort
      description: Sort criteria for todos
      required: false
      schema:
        type: array
        items:
          type: object
          properties:
            field:
              type: string
              enum:
                - id
                - createdAt
                - updatedAt
                - title
                - completed
              minLength: 1
              maxLength: 255
            order:
              type: string
              enum:
                - asc
                - desc
              minLength: 1
              maxLength: 4
          required:
            - field
            - order
        maxItems: 10
      in: query
      style: deepObject
      explode: true
    UsersFilter:
      name: filter
      description: Filter by field values
      required: false
      schema:
        $ref: '#/components/schemas/FilterNode'
      example:
        type: eq
        field: email
        value: user@example.com
      in: query
      style: deepObject
      explode: true
    UsersSort:
      name: sort
      description: The sort parameter
      required: false
      schema:
        type: array
        items:
          type: object
          properties:
            field:
              type: string
              enum:
                - createdAt
                - id
                - updatedAt
                - email
                - emailVerified
                - image
                - name
              example: createdAt
            order:
              type: string
              enum:
                - asc
                - desc
              example: asc
          required:
            - field
            - order
        maxItems: 10
      example:
        - field: createdAt
          order: desc
      in: query
      style: form
      explode: true
  headers:
    RateLimitLimit:
      description: The maximum number of requests allowed per time window
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 1000000
        example: 1000
    RateLimitRemaining:
      description: The number of requests remaining in the current time window
      schema:
        type: integer
        format: int32
        minimum: 0
        maximum: 1000000
        example: 999
    RateLimitReset:
      description: The time at which the current rate limit window resets (Unix timestamp)
      schema:
        type: integer
        format: int64
        minimum: 0
        maximum: 9223372036854775807
        example: 1640995200
    RetryAfter:
      description: Number of seconds to wait before making a new request
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 3600
        example: 60
    SetCookie:
      description: Session cookies for authentication
      schema:
        type: string
        minLength: 1
        maxLength: 4096
        pattern: ^[\w\-=;,. ]+$
  securitySchemes:
    bearerAuth:
      description: API Token for authenticated requests
      type: http
      scheme: bearer
    sessionCookie:
      name: __Secure-better-auth.session_token
      description: Session cookie for authenticated requests
      type: apiKey
      in: cookie
`)

// App provides unified initialization and startup.
type App struct {
	config    *config.Configuration[configschemas.Config]
	db        *database.Database
	apiServer *server.APIServer
	http      *HTTP
}

// NewApp creates a new App.
func NewApp() *App {
	return &App{}
}

// Initialize loads configuration, sets up logging, database, and prepares the server.
func (a *App) Initialize() error {
	// Load configuration
	cfg, err := config.NewParser[configschemas.Config]().Load()
	if err != nil {
		return err
	}
	a.config = cfg

	// Configure logging
	slog.SetDefault(logger.New(logger.Config{
		Level:  cfg.Config.Logging.Level.String(),
		Pretty: cfg.Config.Logging.Pretty,
	}))

	// Initialize database based on configured type
	db, err := database.Open(cfg.Config.Database.Type.String(), cfg.Config.Database.URL)
	if err != nil {
		return err
	}
	a.db = db

	// Run migrations if configured
	if cfg.Config.Database.RunMigrations {
		slog.Info("running database migrations")
		var runner *database.MigrationRunner
		switch cfg.Config.Database.Type {
		case configschemas.ConfigDatabaseTypePostgresql:
			runner = database.NewMigrationRunner(db, postgresdb.Migrations)
		case configschemas.ConfigDatabaseTypeSqlite:
			runner = database.NewMigrationRunner(db, sqlitedb.Migrations)
		}
		if runner != nil {
			if err := runner.Up(); err != nil {
				return err
			}
			slog.Info("database migrations completed")
		}
	}

	// Create ports, operations, and HTTP handlers
	ports := NewPorts(db)
	ops := NewOperations(ports)
	a.http = NewHTTP(ops)

	// Create API server
	a.apiServer = server.NewAPIServer(&server.APIConfig{
		Port: int(cfg.Config.API.Port),
		Cors: cfg.Config.API.Cors,
	})

	// Register HTTP routes
	RegisterHTTP(a.apiServer.Mux(), a.http)

	// Register API documentation routes
	server.RegisterScalarRoutes(a.apiServer.Mux(), openAPISpec, "My API")

	// Apply middleware
	a.apiServer.ApplyMiddleware()

	return nil
}

// Start starts the application and blocks until shutdown signal is received.
func (a *App) Start() error {
	// Start server in goroutine
	go func() {
		slog.Info("starting server", "port", a.config.Config.API.Port)
		if err := a.apiServer.ListenAndServe(); err != nil && err != http.ErrServerClosed {
			slog.Error("server error", "error", err)
			os.Exit(1)
		}
	}()

	// Wait for interrupt signal
	quit := make(chan os.Signal, 1)
	signal.Notify(quit, os.Interrupt)
	<-quit

	slog.Info("shutting down server...")

	// Graceful shutdown with timeout
	ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)
	defer cancel()

	if err := a.apiServer.Shutdown(ctx); err != nil {
		slog.Error("server forced to shutdown", "error", err)
		return err
	}

	// Close database connections
	if a.db != nil {
		if a.db.PgxPool() != nil {
			a.db.PgxPool().Close()
		}
		if a.db.SQLDB() != nil {
			a.db.SQLDB().Close()
		}
	}

	slog.Info("server shutdown complete")
	return nil
}

// HTTP returns the HTTP handlers.
func (a *App) HTTP() *HTTP {
	return a.http
}
