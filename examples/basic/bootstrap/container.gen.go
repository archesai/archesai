// Code generated by archesai. DO NOT EDIT.

package bootstrap

import (
	"github.com/archesai/archesai/pkg/database"
	"github.com/archesai/archesai/pkg/events"
	serverbootstrap "github.com/archesai/archesai/pkg/server/bootstrap"
)

// Services holds shared dependencies for all handlers.
type Services struct {
	DB        *database.Database
	Publisher events.Publisher
}

// NewHandlers creates all handlers with the given services.
// This wires up all internal package dependencies using the infrastructure layer.
func NewHandlers(services *Services) *Handlers {
	db := services.DB.SQLDB()

	if services.DB.IsSQLite() {
		return &Handlers{
			Server: serverbootstrap.NewHTTPHandlers(serverbootstrap.NewApplicationHandlers()),
		}
	}

	// PostgreSQL
	pool := services.DB.PgxPool()
	return &Handlers{
		Server: serverbootstrap.NewHTTPHandlers(serverbootstrap.NewApplicationHandlers()),
	}
}
