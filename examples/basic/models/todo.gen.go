// Code generated by archesai. DO NOT EDIT.

package models

import (
	"fmt"
	"time"

	"github.com/archesai/archesai/pkg/events"
	"github.com/google/uuid"
)

var (
	// ErrTodoNotFound is returned when a Todo entity is not found.
	ErrTodoNotFound = fmt.Errorf("todo not found")
)

// Todo represents a Todo
type Todo struct {

	// ID Unique identifier for the resource
	ID uuid.UUID `json:"id" yaml:"id"`

	// CreatedAt The date and time when the resource was created
	CreatedAt time.Time `json:"createdAt" yaml:"createdAt"`

	// UpdatedAt The date and time when the resource was last updated
	UpdatedAt time.Time `json:"updatedAt" yaml:"updatedAt"`
	Completed bool      `json:"completed" yaml:"completed"`
	Title     string    `json:"title" yaml:"title"`

	events []events.Event `json:"-" yaml:"-"`
}

// NewTodo creates a new Todo entity.
// All required fields must be provided and valid.
func NewTodo(
	completed bool,
	title string,
) (*Todo, error) {
	// Validate required fields
	if title == "" {
		return nil, fmt.Errorf("Title cannot be empty")
	}
	now := time.Now().UTC()
	id := uuid.New()
	todo := &Todo{
		ID:        id,
		CreatedAt: now,
		UpdatedAt: now,
		Completed: completed,
		Title:     title,
		events:    []events.Event{},
	}
	todo.addEvent(NewTodoCreatedEvent(id))

	return todo, nil
}

// ZeroTodo returns the zero value for Todo.
// This is useful for comparisons and as a default value.
func ZeroTodo() Todo {
	return Todo{}
}

// GetID returns the ID
func (e *Todo) GetID() uuid.UUID {
	return e.ID
}

// GetCreatedAt returns the CreatedAt
func (e *Todo) GetCreatedAt() time.Time {
	return e.CreatedAt
}

// GetUpdatedAt returns the UpdatedAt
func (e *Todo) GetUpdatedAt() time.Time {
	return e.UpdatedAt
}

// GetCompleted returns the Completed
func (e *Todo) GetCompleted() bool {
	return e.Completed
}

// GetTitle returns the Title
func (e *Todo) GetTitle() string {
	return e.Title
}

// Events returns the domain events
func (e *Todo) Events() []events.Event {
	return e.events
}

// ClearEvents clears the domain events
func (e *Todo) ClearEvents() {
	e.events = []events.Event{}
}

// addEvent adds a domain event
func (e *Todo) addEvent(event events.Event) {
	e.events = append(e.events, event)
}

// Event type constants for Todo.
const (
	EventTodoCreated = "todo.created"
	EventTodoUpdated = "todo.updated"
	EventTodoDeleted = "todo.deleted"
)

// TodoCreatedEvent represents a created event for Todo.
type TodoCreatedEvent struct {
	events.BaseEvent
	TodoID uuid.UUID `json:"todo_id"`
}

// NewTodoCreatedEvent creates a new Todo created event.
func NewTodoCreatedEvent(id uuid.UUID) *TodoCreatedEvent {
	return &TodoCreatedEvent{
		BaseEvent: events.NewBaseEvent("todo", EventTodoCreated),
		TodoID:    id,
	}
}

// EventType returns the type of this event.
func (e *TodoCreatedEvent) EventType() string {
	return EventTodoCreated
}

// EventData returns the event data.
func (e *TodoCreatedEvent) EventData() any {
	return e
}

// TodoUpdatedEvent represents an updated event for Todo.
type TodoUpdatedEvent struct {
	events.BaseEvent
	TodoID uuid.UUID `json:"todo_id"`
}

// NewTodoUpdatedEvent creates a new Todo updated event.
func NewTodoUpdatedEvent(id uuid.UUID) *TodoUpdatedEvent {
	return &TodoUpdatedEvent{
		BaseEvent: events.NewBaseEvent("todo", EventTodoUpdated),
		TodoID:    id,
	}
}

// EventType returns the type of this event.
func (e *TodoUpdatedEvent) EventType() string {
	return EventTodoUpdated
}

// EventData returns the event data.
func (e *TodoUpdatedEvent) EventData() any {
	return e
}

// TodoDeletedEvent represents a deleted event for Todo.
type TodoDeletedEvent struct {
	events.BaseEvent
	TodoID uuid.UUID `json:"todo_id"`
}

// NewTodoDeletedEvent creates a new Todo deleted event.
func NewTodoDeletedEvent(id uuid.UUID) *TodoDeletedEvent {
	return &TodoDeletedEvent{
		BaseEvent: events.NewBaseEvent("todo", EventTodoDeleted),
		TodoID:    id,
	}
}

// EventType returns the type of this event.
func (e *TodoDeletedEvent) EventType() string {
	return EventTodoDeleted
}

// EventData returns the event data.
func (e *TodoDeletedEvent) EventData() any {
	return e
}
