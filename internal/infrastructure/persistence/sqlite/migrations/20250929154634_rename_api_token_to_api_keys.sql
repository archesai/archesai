-- SQLite schema (auto-generated from PostgreSQL)
-- Generated by internal/database/migrations/convert.go
-- DO NOT EDIT MANUALLY - Edit PostgreSQL schema and regenerate

-- +goose Up
-- +goose StatementBegin
-- Rename api_token table to api_keys
ALTER TABLE api_token RENAME TO api_keys;

-- Rename constraints to match new table name
ALTER TABLE api_keys RENAME CONSTRAINT api_token_pkey TO api_keys_pkey;
ALTER TABLE api_keys RENAME CONSTRAINT api_token_user_id_fkey TO api_keys_user_id_fkey;
ALTER TABLE api_keys RENAME CONSTRAINT api_token_organization_id_fkey TO api_keys_organization_id_fkey;

-- Rename indexes to match new table name
ALTER INDEX idx_api_token_user_id RENAME TO idx_api_keys_user_id;
ALTER INDEX idx_api_token_organization_id RENAME TO idx_api_keys_organization_id;
ALTER INDEX idx_api_token_last_used_at RENAME TO idx_api_keys_last_used_at;
ALTER INDEX idx_api_token_key_hash RENAME TO idx_api_keys_key_hash;
-- +goose StatementEnd

-- +goose Down
-- +goose StatementBegin
-- Rename api_keys table back to api_token
ALTER TABLE api_keys RENAME TO api_token;

-- Rename constraints back to original names
ALTER TABLE api_token RENAME CONSTRAINT api_keys_pkey TO api_token_pkey;
ALTER TABLE api_token RENAME CONSTRAINT api_keys_user_id_fkey TO api_token_user_id_fkey;
ALTER TABLE api_token RENAME CONSTRAINT api_keys_organization_id_fkey TO api_token_organization_id_fkey;

-- Rename indexes back to original names
ALTER INDEX idx_api_keys_user_id RENAME TO idx_api_token_user_id;
ALTER INDEX idx_api_keys_organization_id RENAME TO idx_api_token_organization_id;
ALTER INDEX idx_api_keys_last_used_at RENAME TO idx_api_token_last_used_at;
ALTER INDEX idx_api_keys_key_hash RENAME TO idx_api_token_key_hash;
-- +goose StatementEnd
