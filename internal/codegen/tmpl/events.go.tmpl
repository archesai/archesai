{{- /*
Template: events.tmpl
Generates: A single events file per entity
Expected data: EventsTemplateData
*/ -}}
{{template "header" .}}
package core

import (
	"github.com/google/uuid"
	"github.com/archesai/archesai/pkg/events"
)

// Event type constants for {{ .Entity.Name }}.
const (
	Event{{ .Entity.Name }}Created = "{{lower .Entity.Name}}.created"
	Event{{ .Entity.Name }}Updated = "{{lower .Entity.Name}}.updated"
	Event{{ .Entity.Name }}Deleted = "{{lower .Entity.Name}}.deleted"
)

// {{ .Entity.Name }}CreatedEvent represents a created event for {{ .Entity.Name }}.
type {{ .Entity.Name }}CreatedEvent struct {
	events.BaseEvent
	{{ .Entity.Name }}ID uuid.UUID `json:"{{lower .Entity.Name}}_id"`
}

// New{{ .Entity.Name }}CreatedEvent creates a new {{ .Entity.Name }} created event.
func New{{ .Entity.Name }}CreatedEvent(id uuid.UUID) *{{ .Entity.Name }}CreatedEvent {
	return &{{ .Entity.Name }}CreatedEvent{
		BaseEvent: events.NewBaseEvent("{{lower .Entity.Name}}", Event{{ .Entity.Name }}Created),
		{{ .Entity.Name }}ID: id,
	}
}

// EventType returns the type of this event.
func (e *{{ .Entity.Name }}CreatedEvent) EventType() string {
	return Event{{ .Entity.Name }}Created
}

// EventData returns the event data.
func (e *{{ .Entity.Name }}CreatedEvent) EventData() any {
	return e
}

// {{ .Entity.Name }}UpdatedEvent represents an updated event for {{ .Entity.Name }}.
type {{ .Entity.Name }}UpdatedEvent struct {
	events.BaseEvent
	{{ .Entity.Name }}ID uuid.UUID `json:"{{lower .Entity.Name}}_id"`
}

// New{{ .Entity.Name }}UpdatedEvent creates a new {{ .Entity.Name }} updated event.
func New{{ .Entity.Name }}UpdatedEvent(id uuid.UUID) *{{ .Entity.Name }}UpdatedEvent {
	return &{{ .Entity.Name }}UpdatedEvent{
		BaseEvent: events.NewBaseEvent("{{lower .Entity.Name}}", Event{{ .Entity.Name }}Updated),
		{{ .Entity.Name }}ID: id,
	}
}

// EventType returns the type of this event.
func (e *{{ .Entity.Name }}UpdatedEvent) EventType() string {
	return Event{{ .Entity.Name }}Updated
}

// EventData returns the event data.
func (e *{{ .Entity.Name }}UpdatedEvent) EventData() any {
	return e
}

// {{ .Entity.Name }}DeletedEvent represents a deleted event for {{ .Entity.Name }}.
type {{ .Entity.Name }}DeletedEvent struct {
	events.BaseEvent
	{{ .Entity.Name }}ID uuid.UUID `json:"{{lower .Entity.Name}}_id"`
}

// New{{ .Entity.Name }}DeletedEvent creates a new {{ .Entity.Name }} deleted event.
func New{{ .Entity.Name }}DeletedEvent(id uuid.UUID) *{{ .Entity.Name }}DeletedEvent {
	return &{{ .Entity.Name }}DeletedEvent{
		BaseEvent: events.NewBaseEvent("{{lower .Entity.Name}}", Event{{ .Entity.Name }}Deleted),
		{{ .Entity.Name }}ID: id,
	}
}

// EventType returns the type of this event.
func (e *{{ .Entity.Name }}DeletedEvent) EventType() string {
	return Event{{ .Entity.Name }}Deleted
}

// EventData returns the event data.
func (e *{{ .Entity.Name }}DeletedEvent) EventData() any {
	return e
}

