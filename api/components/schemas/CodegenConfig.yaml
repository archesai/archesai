# yaml-language-server: $schema=https://json-schema.org/draft-07/schema
x-codegen:
  domain: codegen
description: Schema for codegen.yaml configuration file
type: object
properties:
  openapi:
    type: string
    description: Path to the OpenAPI specification file
    example: 'api/openapi.bundled.yaml'
    default: 'api/openapi.bundled.yaml'

  output:
    type: string
    description: Output directory for generated files
    default: 'internal'
    example: 'internal'

  generators:
    type: object
    description: Generator configuration with output paths
    properties:
      repository:
        type: object
        description: Repository generation configuration
        properties:
          interface:
            type: string
            description: Path for repository interfaces (ports)
            example: 'ports.gen.go'
          postgres:
            type: string
            description: Path for PostgreSQL repository implementation
            example: 'postgres_repository.gen.go'
          sqlite:
            type: string
            description: Path for SQLite repository implementation
            example: 'sqlite_repository.gen.go'
        additionalProperties: false
      cache:
        type: object
        description: Cache generation paths
        properties:
          interface:
            type: string
            description: Path for cache interface
            example: 'cache.gen.go'
          memory:
            type: string
            description: Path for in-memory cache implementation
            example: 'cache_memory.gen.go'
          redis:
            type: string
            description: Path for Redis cache implementation
            example: 'cache_redis.gen.go'
        additionalProperties: false
      events:
        type: object
        description: Event system generation paths
        properties:
          interface:
            type: string
            description: Path for event definitions and interface
            example: 'events.gen.go'
          redis:
            type: string
            description: Path for Redis event publisher
            example: 'events_redis.gen.go'
          nats:
            type: string
            description: Path for NATS event publisher
            example: 'events_nats.gen.go'
        additionalProperties: false
      service:
        type: string
        description: Path for service layer generation
        default: 'service.gen.go'
        example: 'service.gen.go'
      sql:
        type: object
        description: SQL generation configuration
        properties:
          schema_dir:
            type: string
            description: Directory for SQL schema files
            example: 'internal/database/schema'
          query_dir:
            type: string
            description: Directory for SQL query files
            example: 'internal/database/queries'
          dialect:
            type: string
            description: SQL dialect to use
            enum: ['postgresql', 'sqlite', 'mysql']
            default: 'postgresql'
        additionalProperties: false
      types:
        type: string
        description: Path for OpenAPI type definitions
        example: 'types.gen.go'
        default: 'types.gen.go'
      echo_server:
        type: string
        description: Path for Echo server handlers
        example: 'handler.gen.go'
        default: 'handler.gen.go'
    additionalProperties: false

required:
  - openapi

additionalProperties: false
