# yaml-language-server: $schema=https://json-schema.org/draft/2020-12/schema
description: Schema for codegen.yaml configuration file
type: object
properties:
  openapi:
    type: string
    description: Path to the OpenAPI specification file
    example: "api/openapi.bundled.yaml"

  output:
    type: string
    description: Output directory for generated files
    default: "internal"
    example: "internal"

  domains:
    type: object
    description: Domain configuration mapping
    additionalProperties:
      type: object
      properties:
        tags:
          type: array
          items:
            type: string
          description: OpenAPI tags that belong to this domain
          example: ["Auth", "Users", "Sessions"]
        schemas:
          type: array
          items:
            type: string
          description: Specific schema names to include (optional)
          example: ["User", "Session"]
      additionalProperties: false
    example:
      auth:
        tags: ["Auth", "Users", "Sessions", "Accounts"]
      organizations:
        tags: ["Organizations"]

  generators:
    type: object
    description: Which generators to enable
    properties:
      repository:
        type: boolean
        default: true
        description: Generate repository interfaces and implementations
      cache:
        type: boolean
        default: true
        description: Generate cache interfaces and implementations
      events:
        type: boolean
        default: true
        description: Generate event interfaces and implementations
      handlers:
        type: boolean
        default: true
        description: Generate HTTP handler stubs
      adapters:
        type: boolean
        default: true
        description: Generate type adapters/mappers
      defaults:
        type: boolean
        default: true
        description: Generate configuration defaults
    additionalProperties: false

  settings:
    type: object
    description: Global generation settings
    properties:
      overwrite:
        type: boolean
        default: true
        description: Whether to overwrite existing generated files
      generate_tests:
        type: boolean
        default: false
        description: Whether to generate test files
      header:
        type: string
        description: Custom header to prepend to generated files
        example: |
          // Code generated by archesai-codegen. DO NOT EDIT.
          // This file was automatically generated from OpenAPI schemas with x-codegen annotations.
    additionalProperties: false

required:
  - openapi

additionalProperties: false
