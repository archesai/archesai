# yaml-language-server: $schema=https://json-schema.org/draft/2020-12/schema
description: Schema for Run entity
x-codegen:
  repository:
    operations: [create, read, update, delete, list]
    indices: [pipelineID, organizationID, toolID]
    additional_methods:
      - name: ListByPipeline
        params: [pipelineID]
        returns: multiple
      - name: ListByOrganization
        params: [organizationID]
        returns: multiple
      - name: ListByTool
        params: [toolID]
        returns: multiple
allOf:
  - $ref: ./Base.yaml
  - type: object
    properties:
      completedAt:
        description: The timestamp when the run completed
        type: string
        format: date-time
        example: '2024-01-15T09:30:00Z'
        minLength: 1
      error:
        description: The error message
        type: string
        example: example-string
        minLength: 1
      organizationID:
        allOf:
          - $ref: ./UUID.yaml
      pipelineID:
        allOf:
          - $ref: ./UUID.yaml
      progress:
        description: The percent progress of the run
        type: number
        example: 42
      startedAt:
        description: The timestamp when the run started
        type: string
        format: date-time
        example: '2024-01-15T09:30:00Z'
        minLength: 1
      status:
        type: string
        enum:
          - COMPLETED
          - FAILED
          - PROCESSING
          - QUEUED
        example: COMPLETED
        minLength: 1
      toolID:
        allOf:
          - $ref: ./UUID.yaml
    required:
      - organizationID
      - pipelineID
      - progress
      - status
      - toolID
    additionalProperties: false
