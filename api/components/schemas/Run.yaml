# yaml-language-server: $schema=./xcodegen/JSONSchemaDraft7Extended.yaml
description: Schema for Run entity
title: Run
x-codegen:
  schemaType: entity
  repository:
    operations: [create, read, update, delete, list]
    indices: [pipelineID, organizationID, toolID]
    excludeFromCreate:
      - CompletedAt
      - Error
      - StartedAt
    excludeFromUpdate:
      - OrganizationID
    additionalMethods:
      - name: ListRunsByPipeline
        params:
          - name: pipelineID
            type: string
            format: uuid
        returns: multiple
      - name: ListRunsByOrganization
        params:
          - name: organizationID
            type: string
            format: uuid
        returns: multiple
      - name: ListRunsByTool
        params:
          - name: toolID
            type: string
            format: uuid
        returns: multiple
allOf:
  - $ref: ./Base.yaml
  - type: object
    properties:
      completedAt:
        description: The timestamp when the run completed
        type: string
        format: date-time
        example: '2024-01-15T09:30:00Z'
        minLength: 1
      error:
        description: The error message
        type: string
        example: example-string
        minLength: 1
      organizationID:
        description: The organization this run belongs to
        type: string
        format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
        minLength: 36
      pipelineID:
        description: The pipeline this run is executing
        type: string
        format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
        minLength: 36
      progress:
        description: The percent progress of the run
        type: number
        example: 42
      startedAt:
        description: The timestamp when the run started
        type: string
        format: date-time
        example: '2024-01-15T09:30:00Z'
        minLength: 1
      status:
        type: string
        enum:
          - COMPLETED
          - FAILED
          - PROCESSING
          - QUEUED
        example: COMPLETED
      toolID:
        description: The tool being used in this run
        type: string
        format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
        minLength: 36
    required:
      - organizationID
      - pipelineID
      - progress
      - status
      - toolID
unevaluatedProperties: false
