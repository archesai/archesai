# yaml-language-server: $schema=./xcodegen/JSONSchemaDraft7Extended.yaml
description: Schema for User entity
title: User
x-codegen:
  schemaType: entity
  repository:
    operations: [read, update, delete, list] # No create endpoint in API
    indices: [email]
    additional_methods:
      - name: GetByEmail
        params: [email]
        returns: single
  commands:
    operations: [update, delete] # No create command
  queries:
    operations: [get, list]
  controller:
    operations: [read, update, delete, list]
allOf:
  - $ref: ./Base.yaml
  - type: object
    properties:
      email:
        description: The user's email address
        type: string
        format: email
        minLength: 5
        maxLength: 255
        example: user@example.com
      emailVerified:
        description: Whether the user's email has been verified
        type: boolean
        default: false
        example: true
      image:
        description: The user's avatar image URL
        type: string
        minLength: 5
        maxLength: 2048
        format: uri
        example: 'https://example.com/avatar.jpg'
      name:
        description: The user's display name
        type: string
        minLength: 1
        maxLength: 255
        example: John Doe
    required:
      - email
      - emailVerified
      - name
unevaluatedProperties: false
