# yaml-language-server: $schema=./xcodegen/JSONSchemaDraft7Extended.yaml
title: Invitation
description: Schema for Invitation entity
x-codegen:
  schemaType: entity
  repository:
    operations: [create, read, update, delete, list]
    indices: [organizationID, email, inviterID]
    excludeFromUpdate:
      - InviterID
      - OrganizationID
    additionalMethods:
      - name: ListInvitationsByOrganization
        params:
          - name: organizationID
            type: string
            format: uuid
        returns: multiple
      - name: GetInvitationByEmail
        params:
          - name: email
            type: string
          - name: organizationID
            type: string
            format: uuid
        returns: single
      - name: ListInvitationsByInviter
        params:
          - name: inviterID
            type: string
            format: uuid
        returns: multiple
allOf:
  - $ref: ./Base.yaml
  - type: object
    properties:
      email:
        description: The email of the invitated user
        type: string
        example: example-string
        minLength: 1
      expiresAt:
        description: The date and time when the invitation expires
        type: string
        format: date-time
        minLength: 1
        example: '2023-12-31T23:59:59Z'
      inviterID:
        description: The ID of the user who sent this invitation
        type: string
        format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
        minLength: 36
      organizationID:
        description: The organization the user is being invited to join
        type: string
        format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
        minLength: 36
      role:
        description: The role of the invitation
        type: string
        enum:
          - admin
          - owner
          - basic
        example: admin
      status:
        description: The status of the invitation, e.g., pending, accepted, declined
        type: string
        minLength: 1
        example: example-string
    required:
      - email
      - expiresAt
      - inviterID
      - organizationID
      - role
      - status
unevaluatedProperties: false
