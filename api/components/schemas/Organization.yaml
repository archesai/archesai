# yaml-language-server: $schema=./xcodegen/JSONSchemaDraft7Extended.yaml
title: Organization
description: Schema for Organization entity
x-codegen:
  schemaType: entity
  repository:
    operations: [create, read, update, delete, list]
    indices: [slug, stripeCustomerID]
    additional_methods:
      - name: GetBySlug
        params: [slug]
        returns: single
      - name: GetByStripeCustomerID
        params: [stripeCustomerID]
        returns: single
  service:
    generate: true
    transaction_support: true
    error_handling: error_return
    logging:
      level: info
      structured: true
allOf:
  - $ref: ./Base.yaml
  - type: object
    properties:
      name:
        description: The organization's display name
        type: string
        minLength: 1
        maxLength: 255
        example: Acme Corporation
      slug:
        description: URL-friendly unique identifier for the organization
        type: string
        pattern: ^[a-z0-9]+(?:-[a-z0-9]+)*$
        minLength: 3
        maxLength: 50
        example: acme-corp
      logo:
        description: The organization's logo URL
        type: string
        example: 'https://example.com/org-logo.png'
      billingEmail:
        description: Email address for billing communications
        type: string
        format: email
        example: billing@acme.com
      plan:
        description: The current subscription plan
        type: string
        enum:
          - FREE
          - BASIC
          - STANDARD
          - PREMIUM
          - UNLIMITED
        default: FREE
        example: STANDARD
      credits:
        description: Available credits for this organization
        type: integer
        format: int32
        minimum: 0
        default: 0
        example: 1000
      stripeCustomerID:
        description: Stripe customer identifier
        type: string
        example: 'cus_1234567890'
        x-sensitive: true
    required:
      - name
      - slug
      - plan
      - credits
unevaluatedProperties: false
