# yaml-language-server: $schema=./JSONSchemaDraft7Extended.yaml
$schema: https://json-schema.org/draft-07/schema
title: XCodegenExtension
description: Configuration for code generation from OpenAPI schemas
type: object
required: [schemaType]
properties:
  schemaType:
    description: Type of domain object (entity, valueobject)
    type: string
    enum: [entity, valueobject]

  repository:
    description: Repository generation configuration
    type: object
    properties:
      operations:
        description: Standard CRUD operations to generate
        type: array
        items:
          type: string
          enum: [create, read, update, delete, list]
        default: [create, read, update, delete, list]
      indices:
        description: Database indices to create
        type: array
        items:
          type: string
      additional_methods:
        description: Additional repository methods to generate
        type: array
        items:
          type: object
          properties:
            name:
              description: Method name
              type: string
            params:
              description: Method parameters
              type: array
              items:
                type: string
            returns:
              description: Return type (single or multiple)
              type: string
              enum: [single, multiple]
          required: [name, returns]
          additionalProperties: false
      table_name:
        description: Override default table name
        type: string
    additionalProperties: false
# This schema defines the x-codegen extension structure
# It needs x-codegen to generate the Go types for parsing
x-codegen:
  schemaType: valueobject
