get:
  x-codegen-custom-handler: true
  operationId: GetPipelineExecutionPlan
  summary: Get execution plan for a pipeline
  tags:
    - Pipeline
  description: Get the DAG execution plan showing which steps can run in parallel
  parameters:
    - name: id
      in: path
      required: true
      description: Pipeline ID
      schema:
        description: UUID identifier
        type: string
        format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
        minLength: 36
        maxLength: 36
  security:
    - bearerAuth: []
  responses:
    '200':
      description: Execution plan retrieved successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: object
                example:
                  pipelineID: 550e8400-e29b-41d4-a716-446655440000
                  levels:
                    - level: 0
                      steps:
                        - 550e8400-e29b-41d4-a716-446655440010
                    - level: 1
                      steps:
                        - 550e8400-e29b-41d4-a716-446655440012
                  totalSteps: 3
                  isValid: true
                  estimatedDuration: 3600
                properties:
                  pipelineID:
                    description: UUID identifier
                    type: string
                    format: uuid
                    example: 550e8400-e29b-41d4-a716-446655440000
                    minLength: 36
                    maxLength: 36
                  levels:
                    type: array
                    maxItems: 1000
                    items:
                      type: object
                      properties:
                        level:
                          type: integer
                          format: int32
                          minimum: 0
                          maximum: 2147483647
                          description: Execution level (0-based)
                          example: 0
                        steps:
                          type: array
                          maxItems: 10000
                          items:
                            type: string
                            format: uuid
                            example: 550e8400-e29b-41d4-a716-446655440000
                            minLength: 36
                            description: Step IDs that can run in parallel at this level
                            maxLength: 36
                      required:
                        - level
                        - steps
                  totalSteps:
                    type: integer
                    format: int32
                    minimum: 0
                    maximum: 2147483647
                    description: Total number of steps in the pipeline
                    example: 5
                  isValid:
                    type: boolean
                    description: Whether the pipeline DAG is valid (no cycles)
                    example: true
                  estimatedDuration:
                    type: integer
                    format: int32
                    minimum: 0
                    maximum: 2147483647
                    description: Estimated execution time in seconds
                    example: 3600
                required:
                  - pipelineID
                  - levels
                  - totalSteps
                  - isValid
            required:
              - data
            additionalProperties: false
          example:
            data:
              pipelineID: 550e8400-e29b-41d4-a716-446655440000
              levels:
                - level: 0
                  steps:
                    - 550e8400-e29b-41d4-a716-446655440010
                    - 550e8400-e29b-41d4-a716-446655440011
                - level: 1
                  steps:
                    - 550e8400-e29b-41d4-a716-446655440012
              totalSteps: 3
              isValid: true
              estimatedDuration: 3600
      headers:
        X-RateLimit-Limit:
          description: The maximum number of requests allowed per time window
          schema:
            type: integer
            example: 1000
            format: int32
            minimum: 1
            maximum: 1000000
        X-RateLimit-Remaining:
          description: The number of requests remaining in the current time window
          schema:
            type: integer
            example: 999
            format: int32
            minimum: 0
            maximum: 1000000
        X-RateLimit-Reset:
          description: The time at which the current rate limit window resets (Unix timestamp)
          schema:
            type: integer
            example: 1640995200
            format: int64
            minimum: 0
            maximum: 9223372036854775807
    '400':
      $ref: ../components/responses/BadRequest.yaml
    '404':
      $ref: ../components/responses/NotFound.yaml
    '401':
      $ref: ../components/responses/Unauthorized.yaml
    '422':
      $ref: ../components/responses/UnprocessableEntity.yaml
    '429':
      $ref: ../components/responses/TooManyRequests.yaml
    '500':
      $ref: ../components/responses/InternalServerError.yaml
post:
  x-codegen-custom-handler: true
  operationId: ValidatePipelineExecutionPlan
  summary: Validate a pipeline configuration
  tags:
    - Pipeline
  description: Validate that a pipeline can be executed without issues
  parameters:
    - name: id
      in: path
      required: true
      description: Pipeline ID
      schema:
        description: UUID identifier
        type: string
        format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
        minLength: 36
        maxLength: 36
  security:
    - bearerAuth: []
  responses:
    '200':
      description: Pipeline is valid
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: object
                properties:
                  valid:
                    type: boolean
                    example: true
                  issues:
                    type: array
                    maxItems: 1000
                    items:
                      type: string
                      maxLength: 1000
                      pattern: ^[\w\s\-.,!?()@#+/]*$
                    description: List of any warnings or non-critical issues
                required:
                  - valid
            required:
              - data
            additionalProperties: false
          example:
            data:
              valid: true
              issues: []
      headers:
        X-RateLimit-Limit:
          description: The maximum number of requests allowed per time window
          schema:
            type: integer
            example: 1000
            format: int32
            minimum: 1
            maximum: 1000000
        X-RateLimit-Remaining:
          description: The number of requests remaining in the current time window
          schema:
            type: integer
            example: 999
            format: int32
            minimum: 0
            maximum: 1000000
        X-RateLimit-Reset:
          description: The time at which the current rate limit window resets (Unix timestamp)
          schema:
            type: integer
            example: 1640995200
            format: int64
            minimum: 0
            maximum: 9223372036854775807
    '400':
      $ref: ../components/responses/BadRequest.yaml
    '404':
      $ref: ../components/responses/NotFound.yaml
    '401':
      $ref: ../components/responses/Unauthorized.yaml
    '422':
      $ref: ../components/responses/UnprocessableEntity.yaml
    '429':
      $ref: ../components/responses/TooManyRequests.yaml
    '500':
      $ref: ../components/responses/InternalServerError.yaml
