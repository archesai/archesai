post:
  operationId: RequestMagicLink
  summary: Request a magic link
  description: Request a magic link to be sent via email or generate an OTP code
  tags:
    - Auth
  security: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            identifier:
              description: Email address or username
              type: string
              minLength: 1
              example: 'user@example.com'
            deliveryMethod:
              description: How to deliver the magic link
              type: string
              enum:
                - email
                - console
                - otp
                - webhook
              default: email
              example: email
            redirectUrl:
              description: URL to redirect to after successful authentication
              type: string
              format: uri
              example: 'https://app.archesai.com/dashboard'
          required:
            - identifier
  responses:
    '200':
      description: Magic link requested successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: 'Magic link sent to user@example.com'
              otpCode:
                description: OTP code (only returned if deliveryMethod is 'otp')
                type: string
                minLength: 6
                maxLength: 6
                example: '123456'
              expiresIn:
                description: Token expiry in seconds
                type: integer
                example: 900
              token:
                description: Magic link token details (for internal use)
                $ref: '../components/schemas/MagicLinkToken.yaml'
    '400':
      $ref: '../components/responses/BadRequest.yaml'
    '429':
      $ref: '../components/responses/TooManyRequests.yaml'
    '500':
      $ref: '../components/responses/InternalServerError.yaml'
  x-codegen-custom-handler: true
