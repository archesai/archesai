get:
  operationId: getPipelineExecutionPlan
  summary: Get execution plan for a pipeline
  tags:
    - Pipelines
  description: Get the DAG execution plan showing which steps can run in parallel
  parameters:
    - name: id
      in: path
      required: true
      description: Pipeline ID
      schema:
        description: UUID identifier
        type: string
        format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
        minLength: 36
  security:
    - bearerAuth: []
  responses:
    '200':
      description: Execution plan retrieved successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: object
                properties:
                  pipelineID:
                    description: UUID identifier
                    type: string
                    format: uuid
                    example: 550e8400-e29b-41d4-a716-446655440000
                    minLength: 36
                  levels:
                    type: array
                    items:
                      type: object
                      properties:
                        level:
                          type: integer
                          description: Execution level (0-based)
                          example: 0
                        steps:
                          type: array
                          items:
                            type: string
                            format: uuid
                            example: 550e8400-e29b-41d4-a716-446655440000
                            minLength: 36
                            description: Step IDs that can run in parallel at this level
                      required:
                        - level
                        - steps
                  totalSteps:
                    type: integer
                    description: Total number of steps in the pipeline
                    example: 5
                  isValid:
                    type: boolean
                    description: Whether the pipeline DAG is valid (no cycles)
                    example: true
                  estimatedDuration:
                    type: integer
                    description: Estimated execution time in seconds
                    example: 3600
                required:
                  - pipelineID
                  - levels
                  - totalSteps
                  - isValid
            required:
              - data
            additionalProperties: false
    '400':
      $ref: ../components/responses/BadRequest.yaml
    '404':
      $ref: ../components/responses/NotFound.yaml
    '401':
      $ref: ../components/responses/Unauthorized.yaml

post:
  operationId: validatePipelineExecutionPlan
  summary: Validate a pipeline configuration
  tags:
    - Pipelines
  description: Validate that a pipeline can be executed without issues
  parameters:
    - name: id
      in: path
      required: true
      description: Pipeline ID
      schema:
        description: UUID identifier
        type: string
        format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
        minLength: 36
  security:
    - bearerAuth: []
  responses:
    '200':
      description: Pipeline is valid
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: object
                properties:
                  valid:
                    type: boolean
                    example: true
                  issues:
                    type: array
                    items:
                      type: string
                    description: List of any warnings or non-critical issues
                required:
                  - valid
            required:
              - data
            additionalProperties: false
    '400':
      $ref: ../components/responses/BadRequest.yaml
    '404':
      $ref: ../components/responses/NotFound.yaml
    '401':
      $ref: ../components/responses/Unauthorized.yaml
