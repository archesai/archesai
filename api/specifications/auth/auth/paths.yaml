paths:
  /sign-up:
    post:
      operationId: register
      summary: Register
      tags: [Auth]
      description: This endpoint will register you with your e-mail and password
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  description: The email address associated with the account
                  type: string
                  format: email
                  pattern: ^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$
                name:
                  description: The name of the user creating the account
                  type: string
                  minLength: 1
                password:
                  description: The password for the account
                  type: string
              required:
                - email
                - name
                - password
        required: true
      responses:
        '201':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  # data:
                  #   $ref: '#/components/schemas/UserEntity'
                required:
                  - data
                additionalProperties: false
        '401':
          $ref: '../../common/responses/schemas.yaml#/components/responses/Unauthorized'
  /sign-in:
    post:
      operationId: login
      summary: Login
      tags: [Auth]
      description: This endpoint will log you in with your e-mail and password
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  description: The email address associated with the account
                  type: string
                  format: email
                  pattern: ^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$
                password:
                  description: The password for the account
                  type: string
              required:
                - email
                - password
        required: true
      responses:
        '200':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  # data:
                  #   $ref: '#/components/schemas/UserEntity'
                required:
                  - data
                additionalProperties: false
        '401':
          $ref: '../../common/responses/schemas.yaml#/components/responses/Unauthorized'
  /sign-out:
    post:
      operationId: logout
      summary: Logout
      tags: [Auth]
      description: This endpoint will log you out of the current session
      responses:
        '204':
          $ref: '../../common/responses/schemas.yaml#/components/responses/NotFound'
        '401':
          $ref: '../../common/responses/schemas.yaml#/components/responses/Unauthorized'
  /email-verification/verify:
    post:
      operationId: confirmEmailVerification
      summary: Confirm e-mail verification
      tags: [Auth]
      description: This endpoint will confirm your e-mail with a token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  description: The password reset token
                  type: string
              required:
                - token
        required: true
      responses:
        '200':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  # session:
                  #   $ref: '#/components/schemas/SessionEntity'
                  # user:
                  #   $ref: '#/components/schemas/UserEntity'
                required:
                  - session
                  - user
                additionalProperties: false
        '401':
          $ref: '../../common/responses/schemas.yaml#/components/responses/Unauthorized'
        '404':
          $ref: '../../common/responses/schemas.yaml#/components/responses/NotFound'
  /email-verification/request:
    post:
      operationId: requestEmailVerification
      summary: Request e-mail verification
      tags: [Auth]
      description: This endpoint will send an e-mail verification link to you. ADMIN ONLY.
      security:
        - bearerAuth: []
      responses:
        '204':
          $ref: '../../common/responses/schemas.yaml#/components/responses/NotFound'
  /email-change/verify:
    post:
      operationId: confirmEmailChange
      summary: Verify e-mail change
      tags: [Auth]
      description: This endpoint will verify your e-mail change with a token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                newEmail:
                  description: The e-mail to send the confirmation token to
                  type: string
                  format: email
                  pattern: ^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$
                token:
                  description: The password reset token
                  type: string
                userId:
                  description: The user ID of the user requesting the email change
                  type: string
                  format: uuid
                  pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$
              required:
                - newEmail
                - token
                - userId
        required: true
      responses:
        '204':
          $ref: '../../common/responses/schemas.yaml#/components/responses/NotFound'
        '401':
          $ref: '../../common/responses/schemas.yaml#/components/responses/Unauthorized'
        '404':
          $ref: '../../common/responses/schemas.yaml#/components/responses/NotFound'
  /email-change/request:
    post:
      operationId: requestEmailChange
      summary: Request e-mail change
      tags: [Auth]
      description: This endpoint will request your e-mail change with a token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                newEmail:
                  description: The e-mail to send the confirmation token to
                  type: string
                  format: email
                  pattern: ^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$
                userId:
                  description: The user ID of the user requesting the email change
                  type: string
                  format: uuid
                  pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$
              required:
                - newEmail
                - userId
        required: true
      responses:
        '204':
          $ref: '../../common/responses/schemas.yaml#/components/responses/NotFound'
  /password-reset/verify:
    post:
      operationId: confirmPasswordReset
      summary: Verify password reset
      tags: [Auth]
      description: This endpoint will verify your password change with a token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                newPassword:
                  description: The new password
                  type: string
                token:
                  description: The password reset token
                  type: string
              required:
                - newPassword
                - token
        required: true
      responses:
        '204':
          $ref: '../../common/responses/schemas.yaml#/components/responses/NotFound'
        '401':
          $ref: '../../common/responses/schemas.yaml#/components/responses/Unauthorized'
        '404':
          $ref: '../../common/responses/schemas.yaml#/components/responses/NotFound'
  /password-reset/request:
    post:
      operationId: requestPasswordReset
      summary: Request password reset
      tags: [Auth]
      description: This endpoint will request a password reset link
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  description: The e-mail to send the password reset token to
                  type: string
              required:
                - email
        required: true
      responses:
        '204':
          $ref: '../../common/responses/schemas.yaml#/components/responses/NoContent'
