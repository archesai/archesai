title: Invitation
description: Schema for Invitation entity
x-codegen-schema-type: entity
x-codegen:
  repository:
    indices:
      - organizationID
      - inviterID
    excludeFromUpdate:
      - InviterID
      - OrganizationID
    relations:
      - field: inviterID
        references: user
        onDelete: CASCADE
        onUpdate: NO_ACTION
      - field: organizationID
        references: organization
        onDelete: CASCADE
        onUpdate: NO_ACTION
    additionalMethods:
      - name: ListInvitationsByOrganization
        params:
          - name: organizationID
            type: string
            format: uuid
            maxLength: 36
        returns: multiple
      - name: GetInvitationByEmail
        params:
          - name: email
            type: string
          - name: organizationID
            type: string
            format: uuid
            maxLength: 36
        returns: single
      - name: ListInvitationsByInviter
        params:
          - name: inviterID
            type: string
            format: uuid
            maxLength: 36
        returns: multiple
x-internal: auth
allOf:
  - $ref: Base.yaml
  - type: object
    properties:
      email:
        description: The email of the invitated user
        type: string
        format: email
        example: user@example.com
        minLength: 1
        maxLength: 255
      expiresAt:
        description: The date and time when the invitation expires
        type: string
        format: date-time
        minLength: 1
        example: '2023-12-31T23:59:59Z'
        maxLength: 255
      inviterID:
        description: The ID of the user who sent this invitation
        type: string
        format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
        minLength: 36
        maxLength: 36
      organizationID:
        description: The organization the user is being invited to join
        type: string
        format: uuid
        example: 550e8400-e29b-41d4-a716-446655440000
        minLength: 36
        maxLength: 36
      role:
        description: The role of the invitation
        type: string
        enum:
          - admin
          - owner
          - basic
        example: admin
        default: basic
      status:
        description: The status of the invitation, e.g., pending, accepted, declined
        type: string
        enum:
          - pending
          - accepted
          - declined
          - expired
        example: pending
        default: pending
    required:
      - email
      - expiresAt
      - inviterID
      - organizationID
      - role
      - status
unevaluatedProperties: false
