// Code generated by archesai. DO NOT EDIT.

package schemas

import (
	"context"
	"fmt"
	"time"

	"github.com/archesai/archesai/pkg/events"
	"github.com/google/uuid"
)

var (
	// ErrLabelNotFound is returned when a Label entity is not found.
	ErrLabelNotFound = fmt.Errorf("label not found")
)

// Label represents Schema for Label entity
type Label struct {

	// ID Unique identifier for the resource
	ID uuid.UUID `json:"id" yaml:"id"`

	// CreatedAt The date and time when the resource was created
	CreatedAt time.Time `json:"createdAt" yaml:"createdAt"`

	// UpdatedAt The date and time when the resource was last updated
	UpdatedAt time.Time `json:"updatedAt" yaml:"updatedAt"`

	// Name The name of the label
	Name string `json:"name" yaml:"name"`

	// OrganizationID The organization this label belongs to
	OrganizationID uuid.UUID `json:"organizationID" yaml:"organizationID"`

	events []events.Event `json:"-" yaml:"-"`
}

// NewLabel creates a new Label entity.
// All required fields must be provided and valid.
func NewLabel(
	name string,
	organizationID uuid.UUID,
) (*Label, error) {
	// Validate required fields
	if name == "" {
		return nil, fmt.Errorf("Name cannot be empty")
	}
	if organizationID == uuid.Nil {
		return nil, fmt.Errorf("OrganizationID cannot be nil UUID")
	}
	now := time.Now().UTC()
	id := uuid.New()
	label := &Label{
		ID:             id,
		CreatedAt:      now,
		UpdatedAt:      now,
		Name:           name,
		OrganizationID: organizationID,
		events:         []events.Event{},
	}
	label.addEvent(NewLabelCreatedEvent(id))

	return label, nil
}

// ZeroLabel returns the zero value for Label.
// This is useful for comparisons and as a default value.
func ZeroLabel() Label {
	return Label{}
}

// GetID returns the ID
func (e *Label) GetID() uuid.UUID {
	return e.ID
}

// GetCreatedAt returns the CreatedAt
func (e *Label) GetCreatedAt() time.Time {
	return e.CreatedAt
}

// GetUpdatedAt returns the UpdatedAt
func (e *Label) GetUpdatedAt() time.Time {
	return e.UpdatedAt
}

// GetName returns the Name
func (e *Label) GetName() string {
	return e.Name
}

// GetOrganizationID returns the OrganizationID
func (e *Label) GetOrganizationID() uuid.UUID {
	return e.OrganizationID
}

// Events returns the domain events
func (e *Label) Events() []events.Event {
	return e.events
}

// ClearEvents clears the domain events
func (e *Label) ClearEvents() {
	e.events = []events.Event{}
}

// addEvent adds a domain event
func (e *Label) addEvent(event events.Event) {
	e.events = append(e.events, event)
}

// Event type constants for Label.
const (
	EventLabelCreated = "label.created"
	EventLabelUpdated = "label.updated"
	EventLabelDeleted = "label.deleted"
)

// LabelCreatedEvent represents a created event for Label.
type LabelCreatedEvent struct {
	events.BaseEvent
	LabelID uuid.UUID `json:"label_id"`
}

// NewLabelCreatedEvent creates a new Label created event.
func NewLabelCreatedEvent(id uuid.UUID) *LabelCreatedEvent {
	return &LabelCreatedEvent{
		BaseEvent: events.NewBaseEvent("label", EventLabelCreated),
		LabelID:   id,
	}
}

// EventType returns the type of this event.
func (e *LabelCreatedEvent) EventType() string {
	return EventLabelCreated
}

// EventData returns the event data.
func (e *LabelCreatedEvent) EventData() any {
	return e
}

// LabelUpdatedEvent represents an updated event for Label.
type LabelUpdatedEvent struct {
	events.BaseEvent
	LabelID uuid.UUID `json:"label_id"`
}

// NewLabelUpdatedEvent creates a new Label updated event.
func NewLabelUpdatedEvent(id uuid.UUID) *LabelUpdatedEvent {
	return &LabelUpdatedEvent{
		BaseEvent: events.NewBaseEvent("label", EventLabelUpdated),
		LabelID:   id,
	}
}

// EventType returns the type of this event.
func (e *LabelUpdatedEvent) EventType() string {
	return EventLabelUpdated
}

// EventData returns the event data.
func (e *LabelUpdatedEvent) EventData() any {
	return e
}

// LabelDeletedEvent represents a deleted event for Label.
type LabelDeletedEvent struct {
	events.BaseEvent
	LabelID uuid.UUID `json:"label_id"`
}

// NewLabelDeletedEvent creates a new Label deleted event.
func NewLabelDeletedEvent(id uuid.UUID) *LabelDeletedEvent {
	return &LabelDeletedEvent{
		BaseEvent: events.NewBaseEvent("label", EventLabelDeleted),
		LabelID:   id,
	}
}

// EventType returns the type of this event.
func (e *LabelDeletedEvent) EventType() string {
	return EventLabelDeleted
}

// EventData returns the event data.
func (e *LabelDeletedEvent) EventData() any {
	return e
}

// LabelRepository handles label persistence
type LabelRepository interface {
	// Basic CRUD operations (always included)
	Create(ctx context.Context, entity *Label) (*Label, error)
	Get(ctx context.Context, id uuid.UUID) (*Label, error)
	Update(ctx context.Context, id uuid.UUID, entity *Label) (*Label, error)
	Delete(ctx context.Context, id uuid.UUID) error
	List(ctx context.Context, limit, offset int32) ([]*Label, int64, error)

	// ListLabelsByOrganization retrieves multiple labels by organizationID
	ListLabelsByOrganization(ctx context.Context, organizationID string) ([]*Label, error)

	// GetLabelByName retrieves a single label by name and organizationID
	GetLabelByName(ctx context.Context, name string, organizationID string) (*Label, error)
}
