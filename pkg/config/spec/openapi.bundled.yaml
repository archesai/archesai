openapi: 3.1.0
x-project-name: github.com/archesai/archesai/pkg/config
info:
  title: Arches Configuration API
  description: Configuration schemas for Arches platform
  version: v0.0.0
tags:
  - name: Config
    description: Configuration management
  - name: Health
    description: Health check operations
paths:
  /config:
    $ref: '#/components/pathItems/config'
  /health:
    $ref: '#/components/pathItems/health'
components:
  schemas:
    Config:
      description: Arches AI configuration schema
      title: Config
      x-codegen-schema-type: valueobject
      x-internal: config
      type: object
      properties:
        api:
          $ref: '#/components/schemas/ConfigAPI'
        auth:
          $ref: '#/components/schemas/ConfigAuth'
        billing:
          $ref: '#/components/schemas/ConfigBilling'
        database:
          $ref: '#/components/schemas/ConfigDatabase'
        intelligence:
          $ref: '#/components/schemas/ConfigIntelligence'
        logging:
          $ref: '#/components/schemas/ConfigLogging'
        platform:
          $ref: '#/components/schemas/ConfigPlatform'
        redis:
          $ref: '#/components/schemas/ConfigRedis'
        storage:
          $ref: '#/components/schemas/ConfigStorage'
        kubernetes:
          $ref: '#/components/schemas/ConfigKubernetes'
      additionalProperties: false
    Base:
      title: Base
      description: Base schema for all entities with common fields
      x-internal: server
      type: object
      properties:
        id:
          description: Unique identifier for the resource
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
          minLength: 36
          maxLength: 36
        createdAt:
          description: The date and time when the resource was created
          type: string
          format: date-time
          example: '2024-01-15T09:30:00Z'
          minLength: 1
          maxLength: 255
        updatedAt:
          description: The date and time when the resource was last updated
          type: string
          format: date-time
          example: '2024-01-15T10:45:00Z'
          minLength: 1
          maxLength: 255
      required:
        - id
        - createdAt
        - updatedAt
    ConfigAPI:
      title: APIConfig
      description: Configuration schema for the API server
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      properties:
        cors:
          description: A comma-separated list of allowed origins for CORS requests
          type: string
          default: localhost
          minLength: 1
          example: localhost,https://platform.archesai.com
          maxLength: 2048
          pattern: ^[\w\-\.,:/@]+$
        url:
          description: The public URL for the API
          default: http://localhost:3001
          type: string
          format: uri
          example: http://localhost:3001
          maxLength: 2048
        docs:
          description: Enable or disable API documentation
          type: boolean
          default: true
          example: true
        email:
          $ref: '#/components/schemas/ConfigEmail'
        environment:
          description: Deployment environment (development, staging, production)
          type: string
          enum:
            - development
            - staging
            - production
          default: development
          example: development
        host:
          description: The host address on which the API server will listen
          type: string
          default: 0.0.0.0
          minLength: 1
          example: 0.0.0.0
          maxLength: 255
          pattern: ^[\w\-\.:]+$
        port:
          description: The port on which the API server will listen
          type: integer
          format: int32
          minimum: 1
          maximum: 65535
          default: 3001
          example: 3001
        validation:
          description: Enable or disable request validation
          type: boolean
          default: true
          example: true
        image:
          $ref: '#/components/schemas/ConfigImage'
        resources:
          $ref: '#/components/schemas/ConfigResource'
      required:
        - cors
        - docs
        - environment
        - host
        - port
        - validation
      additionalProperties: false
    ConfigAuth:
      description: Authentication configuration for the API server
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: AuthConfig
      properties:
        enabled:
          description: Enable authentication
          type: boolean
          default: true
          example: true
        firebase:
          $ref: '#/components/schemas/ConfigAuthFirebase'
        local:
          $ref: '#/components/schemas/ConfigAuthLocal'
        magicLink:
          $ref: '#/components/schemas/ConfigAuthMagicLink'
        twitter:
          $ref: '#/components/schemas/ConfigAuthTwitter'
        google:
          $ref: '#/components/schemas/ConfigAuthGoogle'
        github:
          $ref: '#/components/schemas/ConfigAuthGithub'
        microsoft:
          $ref: '#/components/schemas/ConfigAuthMicrosoft'
      required:
        - enabled
      additionalProperties: false
    ConfigAuthFirebase:
      description: Firebase authentication configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: FirebaseAuthConfig
      properties:
        enabled:
          description: Enable Firebase authentication
          type: boolean
          default: false
          example: true
        clientEmail:
          description: Firebase service account client email address
          type: string
          format: email
          example: firebase@project.iam.gserviceaccount.com
          maxLength: 255
          pattern: ^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$
        privateKey:
          description: Firebase service account private key (PEM format)
          type: string
          minLength: 1
          maxLength: 10000
          pattern: ^[\w\s\-.,!?()@#+/=\n\r]*$
        projectID:
          description: Firebase project ID for authentication
          type: string
          maxLength: 255
          pattern: ^[\w\-]+$
          example: example-id-123
      required:
        - enabled
      additionalProperties: false
    ConfigAuthGithub:
      description: GitHub OAuth configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: GitHubAuthConfig
      properties:
        enabled:
          description: Enable GitHub OAuth
          type: boolean
          default: false
          example: false
        clientId:
          description: GitHub OAuth App client ID
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\.\-]+$
          example: Iv1.abc123def456ghi7
        clientSecret:
          description: GitHub OAuth App client secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
          example: abc123def456ghi789jkl012mno345pqr678stu901
        redirectUrl:
          description: OAuth callback URL
          type: string
          format: uri
          example: http://localhost:8080/auth/oauth/github/callback
          maxLength: 2048
        scopes:
          description: OAuth scopes to request
          type: array
          items:
            type: string
            maxLength: 255
            pattern: ^[\w\s\-:]+$
          default:
            - user:email
          example:
            - read:user
          maxItems: 1000
      required:
        - enabled
      additionalProperties: false
    ConfigAuthGoogle:
      description: Google OAuth configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: GoogleAuthConfig
      properties:
        enabled:
          description: Enable Google OAuth
          type: boolean
          default: false
          example: false
        clientId:
          description: Google OAuth client ID
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\.\-]+$
          example: 123456789012-abcdefghijklmnopqrstuvwxyz123456.apps.googleusercontent.com
        clientSecret:
          description: Google OAuth client secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
          example: GOCSPX-abc123def456ghi789jkl012
        redirectUrl:
          description: OAuth callback URL
          type: string
          format: uri
          example: http://localhost:8080/auth/oauth/google/callback
          maxLength: 2048
        scopes:
          description: OAuth scopes to request
          type: array
          items:
            type: string
            minLength: 1
            maxLength: 255
            pattern: ^[\w\s\-:\.]+$
          default:
            - openid
            - profile
            - email
          example:
            - openid
            - profile
          maxItems: 1000
      required:
        - enabled
      additionalProperties: false
    ConfigAuthLocal:
      description: Local username/password authentication
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: LocalAuthConfig
      properties:
        enabled:
          description: Enable local authentication
          type: boolean
          default: true
          example: true
        jwtSecret:
          description: Secret key for JWT token signing
          type: string
          default: change-me-in-production
          minLength: 32
          example: your-256-bit-secret-key-here-change-in-production
          maxLength: 512
          pattern: ^[\w\-+=/.]+$
        accessTokenTTL:
          description: Access token time-to-live duration (e.g., "15m", "1h")
          type: string
          pattern: ^(\d+[smhd])+$
          minLength: 2
          maxLength: 20
          default: 15m
          example: 15m
        refreshTokenTTL:
          description: Refresh token time-to-live duration (e.g., "7d", "168h")
          type: string
          pattern: ^(\d+[smhd])+$
          minLength: 2
          maxLength: 20
          default: 168h
          example: 168h
      required:
        - enabled
        - jwtSecret
        - accessTokenTTL
        - refreshTokenTTL
      additionalProperties: false
    ConfigAuthMagicLink:
      description: Magic link authentication configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: MagicLinkAuthConfig
      properties:
        enabled:
          description: Enable magic link authentication
          type: boolean
          default: false
          example: true
        tokenExpiry:
          description: Token expiry duration in minutes
          type: integer
          format: int32
          minimum: 1
          maximum: 60
          default: 15
          example: 15
        otpLength:
          description: Length of OTP code
          type: integer
          format: int32
          minimum: 4
          maximum: 8
          default: 6
          example: 6
        deliveryMethods:
          description: Available delivery methods
          type: object
          properties:
            email:
              type: object
              properties:
                enabled:
                  type: boolean
                  default: true
                  example: true
                from:
                  type: string
                  format: email
                  example: noreply@archesai.com
                  maxLength: 255
              additionalProperties: false
            console:
              type: object
              properties:
                enabled:
                  description: Enable console output (development only)
                  type: boolean
                  default: false
                  example: false
              additionalProperties: false
            otp:
              type: object
              properties:
                enabled:
                  type: boolean
                  default: true
                  example: true
              additionalProperties: false
            webhook:
              type: object
              properties:
                enabled:
                  type: boolean
                  default: false
                  example: false
                url:
                  type: string
                  format: uri
                  example: https://hooks.example.com/magic-link
                  maxLength: 2048
              additionalProperties: false
          additionalProperties: false
        rateLimit:
          description: Rate limiting configuration
          type: object
          properties:
            maxAttempts:
              description: Maximum number of attempts within window
              type: integer
              format: int32
              minimum: 1
              maximum: 2147483647
              default: 5
              example: 5
            windowMinutes:
              description: Time window in minutes
              type: integer
              format: int32
              minimum: 1
              maximum: 2147483647
              default: 15
              example: 15
          additionalProperties: false
      required:
        - enabled
      additionalProperties: false
    ConfigAuthMicrosoft:
      description: Microsoft/Azure AD OAuth configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: MicrosoftAuthConfig
      properties:
        enabled:
          description: Enable Microsoft OAuth
          type: boolean
          default: false
          example: false
        clientId:
          description: Azure AD Application (client) ID
          type: string
          format: uuid
          minLength: 1
          maxLength: 255
          example: 12345678-1234-1234-1234-123456789012
        clientSecret:
          description: Azure AD client secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-~]+$
          example: abc~def123GHI456jkl789MNO012pqr345
        redirectUrl:
          description: OAuth callback URL
          type: string
          format: uri
          example: http://localhost:8080/auth/oauth/microsoft/callback
          maxLength: 2048
        tenant:
          description: Azure AD tenant ID (use 'common' for multi-tenant)
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
          default: common
          example: common
        scopes:
          description: OAuth scopes to request
          type: array
          items:
            type: string
            maxLength: 255
            pattern: ^[\w\s\-:\.]+$
          default:
            - openid
            - profile
            - email
            - User.Read
          example:
            - openid
            - profile
          maxItems: 1000
      required:
        - enabled
      additionalProperties: false
    ConfigAuthTwitter:
      description: Twitter OAuth configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: TwitterAuthConfig
      properties:
        enabled:
          description: Enable Twitter OAuth
          type: boolean
          default: false
          example: true
        callbackURL:
          description: OAuth callback URL
          type: string
          format: uri
          minLength: 1
          example: http://localhost:8080/auth/oauth/twitter/callback
          maxLength: 2048
        consumerKey:
          description: Twitter API consumer key
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
        consumerSecret:
          description: Twitter API consumer secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
      required:
        - enabled
      additionalProperties: false
    ConfigBilling:
      description: Billing configuration for Stripe
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: BillingConfig
      properties:
        enabled:
          description: Enable billing functionality
          type: boolean
          default: false
          example: true
        stripe:
          $ref: '#/components/schemas/ConfigStripe'
      required:
        - enabled
      additionalProperties: false
    ConfigDatabase:
      title: DatabaseConfig
      description: Database configuration for PostgreSQL
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      properties:
        enabled:
          description: Enable database
          type: boolean
          default: true
          example: true
        url:
          description: Database connection url/string
          type: string
          format: uri
          default: postgresql://admin:password@127.0.0.1:5432/archesai
          minLength: 1
          example: postgresql://admin:password@127.0.0.1:5432/archesai
          maxLength: 2048
        type:
          description: Database type (postgresql or sqlite)
          type: string
          enum:
            - postgresql
            - sqlite
          default: postgresql
          example: postgresql
        maxConns:
          description: Maximum number of connections in pool (PostgreSQL)
          type: integer
          minimum: 1
          maximum: 2147483647
          format: int32
          default: 25
          example: 25
        minConns:
          description: Minimum number of connections in pool (PostgreSQL)
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
          default: 5
          example: 5
        connMaxLifetime:
          description: Maximum connection lifetime (e.g., "30m")
          type: string
          pattern: ^(\d+[smh])+$
          minLength: 2
          maxLength: 20
          example: 30m
        connMaxIdleTime:
          description: Maximum connection idle time (e.g., "5m")
          type: string
          pattern: ^(\d+[smh])+$
          minLength: 2
          maxLength: 20
          example: 5m
        healthCheckPeriod:
          description: Health check period for connections (PostgreSQL)
          type: string
          pattern: ^(\d+[smh])+$
          minLength: 2
          maxLength: 20
          example: 30s
        runMigrations:
          description: Automatically run database migrations on startup
          type: boolean
          default: false
          example: true
        managed:
          description: Use managed database deployment
          type: boolean
          default: false
          example: true
        image:
          $ref: '#/components/schemas/ConfigImage'
        persistence:
          $ref: '#/components/schemas/ConfigPersistence'
        resources:
          $ref: '#/components/schemas/ConfigResource'
      required:
        - enabled
        - url
        - type
        - maxConns
        - minConns
        - runMigrations
        - managed
      additionalProperties: false
    ConfigEmail:
      description: Email configuration for sending emails
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: EmailConfig
      properties:
        enabled:
          description: Enable email functionality
          type: boolean
          default: false
          example: true
        service:
          description: Email service provider (e.g., "gmail", "sendgrid", etc.)
          type: string
          pattern: ^[\w\-]+$
          example: sendgrid
          maxLength: 255
        user:
          description: Username for the email service
          type: string
          format: email
          pattern: ^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$
          example: user@example.com
          maxLength: 255
        password:
          description: Password for the email service
          type: string
          pattern: ^[\w\s\-.,!?()@#+/=]*$
          example: secret-password-123
          maxLength: 255
      required:
        - enabled
      additionalProperties: false
    ConfigGrafana:
      description: Grafana monitoring dashboard configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: GrafanaConfig
      properties:
        enabled:
          description: Enable Grafana
          type: boolean
          default: false
          example: true
        managed:
          description: Use managed Grafana deployment
          type: boolean
          default: false
          example: true
        image:
          $ref: '#/components/schemas/ConfigImage'
        resources:
          $ref: '#/components/schemas/ConfigResource'
      required:
        - enabled
      additionalProperties: false
    ConfigImage:
      description: Container image configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: ImageConfig
      properties:
        pullPolicy:
          description: Kubernetes image pull policy
          type: string
          enum:
            - Always
            - IfNotPresent
            - Never
          default: IfNotPresent
          example: Always
        repository:
          description: Container image repository
          type: string
          minLength: 1
          example: archesai/archesai
          maxLength: 255
          pattern: ^[a-z0-9]+(([._]|__|[-]+)[a-z0-9]+)*(\/[a-z0-9]+(([._]|__|[-]+)[a-z0-9]+)*)*$
        tag:
          description: Container image tag
          type: string
          default: latest
          minLength: 1
          example: v1.0.0
          maxLength: 255
          pattern: ^[a-zA-Z0-9_][a-zA-Z0-9._-]*$
      required:
        - pullPolicy
        - tag
      additionalProperties: false
    ConfigImages:
      description: Container image configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: ImagesConfig
      properties:
        imagePullSecrets:
          description: List of Kubernetes secrets for pulling private images
          type: array
          items:
            type: string
            minLength: 1
            example: regcred
            maxLength: 255
            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
          default: []
          maxItems: 1000
        imageRegistry:
          description: Custom container registry URL (leave empty for Docker Hub)
          type: string
          default: ''
          example: gcr.io
          maxLength: 2048
          pattern: ^(|[a-z0-9]([-a-z0-9\.]*[a-z0-9])?(:[0-9]+)?)$
      required:
        - imagePullSecrets
        - imageRegistry
      additionalProperties: false
    ConfigInfrastructure:
      description: Infrastructure configuration for Kubernetes deployments
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: InfrastructureConfig
      properties:
        images:
          $ref: '#/components/schemas/ConfigImages'
        migrations:
          $ref: '#/components/schemas/ConfigMigrations'
        namespace:
          description: Kubernetes namespace where all resources will be deployed
          type: string
          default: arches-system
          minLength: 1
          example: arches-system
          maxLength: 255
          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
        serviceAccount:
          $ref: '#/components/schemas/ConfigServiceAccount'
      required:
        - images
        - migrations
        - namespace
        - serviceAccount
      additionalProperties: false
    ConfigIngress:
      description: Ingress configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: IngressConfig
      properties:
        enabled:
          description: Enable ingress
          type: boolean
          default: false
          example: true
        domain:
          description: Primary domain name for ingress routing
          type: string
          format: hostname
          default: archesai.dev
          minLength: 1
          example: archesai.dev
          maxLength: 255
        tls:
          $ref: '#/components/schemas/ConfigTLS'
      required:
        - enabled
      additionalProperties: false
    ConfigIntelligence:
      description: Intelligence configuration (LLMs, embeddings, scraper, speech, etc.)
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: IntelligenceConfig
      properties:
        embedding:
          $ref: '#/components/schemas/ConfigLLM'
        llm:
          $ref: '#/components/schemas/ConfigLLM'
        runpod:
          $ref: '#/components/schemas/ConfigRunPod'
        scraper:
          $ref: '#/components/schemas/ConfigScraper'
        speech:
          $ref: '#/components/schemas/ConfigSpeech'
        unstructured:
          $ref: '#/components/schemas/ConfigUnstructured'
      additionalProperties: false
    ConfigKubernetes:
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: KubernetesConfig
      description: Kubernetes-specific deployment configuration
      properties:
        infrastructure:
          $ref: '#/components/schemas/ConfigInfrastructure'
        ingress:
          $ref: '#/components/schemas/ConfigIngress'
        monitoring:
          $ref: '#/components/schemas/ConfigMonitoring'
      additionalProperties: false
    ConfigLLM:
      description: Large Language Model configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: LLMConfig
      properties:
        type:
          description: LLM provider type
          type: string
          enum:
            - ollama
            - openai
          default: ollama
          example: ollama
        endpoint:
          description: LLM service endpoint URL
          type: string
          format: uri
          minLength: 1
          example: http://localhost:11434
          maxLength: 2048
        token:
          description: Authentication token for LLM service
          type: string
          minLength: 1
          example: sk-...
          maxLength: 512
          pattern: ^[a-zA-Z0-9_\-\.]+$
      required:
        - type
      additionalProperties: false
    ConfigLogging:
      description: Logging configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: LoggingConfig
      properties:
        level:
          description: Minimum log level to output
          type: string
          enum:
            - fatal
            - error
            - warn
            - info
            - debug
            - trace
            - silent
          default: info
          example: fatal
        pretty:
          description: Enable pretty-printed logs for development
          type: boolean
          default: false
          example: true
      required:
        - level
        - pretty
      additionalProperties: false
    ConfigLoki:
      description: Loki log aggregation service configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: LokiConfig
      properties:
        enabled:
          description: Enable Loki
          type: boolean
          default: false
          example: true
        managed:
          description: Use managed Loki deployment
          type: boolean
          default: false
          example: true
        host:
          description: Loki host URL
          type: string
          format: uri
          default: http://localhost:3100
          minLength: 1
          example: http://localhost:3100
          maxLength: 2048
        image:
          $ref: '#/components/schemas/ConfigImage'
        resources:
          $ref: '#/components/schemas/ConfigResource'
      required:
        - enabled
      additionalProperties: false
    ConfigMigrations:
      description: Database migration configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: MigrationsConfig
      properties:
        enabled:
          description: Enable automatic DB migrations
          type: boolean
          default: false
          example: true
      required:
        - enabled
      additionalProperties: false
    ConfigMonitoring:
      description: Monitoring configuration for Grafana and Loki
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: MonitoringConfig
      properties:
        grafana:
          $ref: '#/components/schemas/ConfigGrafana'
        loki:
          $ref: '#/components/schemas/ConfigLoki'
      required:
        - grafana
        - loki
      additionalProperties: false
    ConfigPersistence:
      description: Persistent storage configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: PersistenceConfig
      properties:
        enabled:
          description: Enable persistent storage
          type: boolean
          default: true
          example: true
        size:
          description: Size of persistent volume
          type: string
          default: 10Gi
          minLength: 1
          example: 10Gi
          maxLength: 255
          pattern: ^[0-9]+(Ei|Pi|Ti|Gi|Mi|Ki|E|P|T|G|M|K)?$
      required:
        - enabled
        - size
      additionalProperties: false
    ConfigPlatform:
      description: Platform configuration (host, image, resources)
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: PlatformConfig
      properties:
        enabled:
          description: Enable platform service
          type: boolean
          default: false
          example: true
        managed:
          description: Use managed platform deployment
          type: boolean
          default: false
          example: true
        url:
          description: Platform URL
          type: string
          default: http://localhost:3000
          format: uri
          example: https://platform.archesai.dev
          maxLength: 2048
        image:
          $ref: '#/components/schemas/ConfigImage'
        resources:
          $ref: '#/components/schemas/ConfigResource'
      required:
        - enabled
      additionalProperties: false
    ConfigRedis:
      description: Redis configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: RedisConfig
      properties:
        enabled:
          description: Enable Redis
          type: boolean
          default: false
          example: true
        managed:
          description: Use managed Redis deployment
          type: boolean
          default: false
          example: true
        auth:
          description: Redis authentication password
          type: string
          default: password
          minLength: 1
          example: secure-redis-password
          maxLength: 72
          pattern: ^[\w\-@./#&+!*()]+$
        ca:
          description: Certificate Authority for TLS (optional)
          type: string
          minLength: 1
          example: /etc/ssl/certs/ca.pem
          maxLength: 255
          pattern: ^[\w\s\-./]+$
        host:
          description: Redis hostname or IP
          type: string
          default: localhost
          minLength: 1
          example: redis.example.com
          maxLength: 255
          pattern: ^[a-zA-Z0-9.\-]+$
        port:
          description: Redis port number
          type: integer
          format: int32
          minimum: 1
          maximum: 65535
          default: 6379
          example: 6379
        image:
          $ref: '#/components/schemas/ConfigImage'
        persistence:
          $ref: '#/components/schemas/ConfigPersistence'
        resources:
          $ref: '#/components/schemas/ConfigResource'
      required:
        - enabled
        - auth
        - host
        - port
      additionalProperties: false
    ConfigResource:
      description: Kubernetes resource configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: ResourceConfig
      properties:
        limits:
          description: Resource limits
          type: object
          properties:
            cpu:
              description: Maximum CPU allocation
              type: string
              pattern: ^\d+m?$
              default: 1000m
              minLength: 1
              example: 1000m
              maxLength: 255
            memory:
              description: Maximum memory allocation
              type: string
              pattern: ^\d+(Mi|Gi|Ki)?$
              default: 1Gi
              minLength: 1
              example: 1Gi
              maxLength: 255
          required:
            - cpu
            - memory
          additionalProperties: false
        requests:
          description: Resource requests
          type: object
          properties:
            cpu:
              description: Requested CPU allocation
              type: string
              pattern: ^\d+m?$
              default: 100m
              minLength: 1
              example: 100m
              maxLength: 255
            memory:
              description: Requested memory allocation
              type: string
              pattern: ^\d+(Mi|Gi|Ki)?$
              default: 128Mi
              minLength: 1
              example: 128Mi
              maxLength: 255
          required:
            - cpu
            - memory
          additionalProperties: false
      required:
        - limits
        - requests
      additionalProperties: false
    ConfigRunPod:
      description: RunPod serverless GPU configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: RunPodConfig
      properties:
        enabled:
          description: Enable RunPod integration
          type: boolean
          default: false
          example: true
        token:
          description: RunPod API token
          type: string
          minLength: 1
          example: rp-...
          maxLength: 512
          pattern: ^[a-zA-Z0-9_\-\.]+$
      required:
        - enabled
      additionalProperties: false
    ConfigScraper:
      description: Web scraping service configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: ScraperConfig
      properties:
        enabled:
          description: Enable scraper service
          type: boolean
          default: false
          example: true
        managed:
          description: Use managed scraper deployment
          type: boolean
          default: false
          example: true
        endpoint:
          description: Web scraper service endpoint URL
          type: string
          format: uri
          minLength: 1
          example: http://scraper:8080
          maxLength: 2048
        image:
          $ref: '#/components/schemas/ConfigImage'
        resources:
          $ref: '#/components/schemas/ConfigResource'
      required:
        - enabled
      additionalProperties: false
    ConfigServiceAccount:
      description: Kubernetes service account configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: ServiceAccountConfig
      properties:
        create:
          description: Create dedicated service account
          type: boolean
          default: true
          example: true
        name:
          description: Custom service account name
          type: string
          default: ''
          example: archesai-sa
          maxLength: 255
          pattern: ^(|[a-z0-9]([-a-z0-9]*[a-z0-9])?)$
      required:
        - create
        - name
      additionalProperties: false
    ConfigSpeech:
      description: Speech recognition and TTS services
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      properties:
        enabled:
          description: Enable speech services
          type: boolean
          default: false
          example: true
        token:
          description: Speech-to-text service API token
          type: string
          minLength: 1
          example: sk-...
          maxLength: 512
          pattern: ^[a-zA-Z0-9_\-\.]+$
      required:
        - enabled
      additionalProperties: false
      title: SpeechConfig
    ConfigStorage:
      description: Object storage configuration for MinIO or S3-compatible services
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      properties:
        enabled:
          description: Enable object storage
          type: boolean
          default: false
          example: true
        managed:
          description: Use managed storage deployment
          type: boolean
          default: false
          example: true
        accesskey:
          description: MinIO/S3 access key ID
          type: string
          default: minioadmin
          minLength: 1
          example: AKIAIOSFODNN7EXAMPLE
          maxLength: 255
          pattern: ^[A-Z0-9]+$
        bucket:
          description: S3 bucket name
          type: string
          default: archesai
          minLength: 1
          example: archesai
          maxLength: 255
          pattern: ^[a-z0-9][a-z0-9\-]*[a-z0-9]$
        endpoint:
          description: MinIO server endpoint URL
          type: string
          format: uri
          default: http://localhost:9000
          minLength: 1
          example: http://localhost:9000
          maxLength: 2048
        secretkey:
          description: MinIO/S3 secret access key
          type: string
          default: minioadmin
          minLength: 1
          example: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
          maxLength: 255
          pattern: ^[A-Za-z0-9+/=]+$
        image:
          $ref: '#/components/schemas/ConfigImage'
        persistence:
          $ref: '#/components/schemas/ConfigPersistence'
        resources:
          $ref: '#/components/schemas/ConfigResource'
      required:
        - enabled
        - accesskey
        - bucket
        - endpoint
        - secretkey
      additionalProperties: false
      title: StorageConfig
    ConfigStripe:
      description: Stripe payment configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: StripeConfig
      properties:
        token:
          description: Stripe secret API key
          type: string
          minLength: 1
          example: sk_test_51H...
          maxLength: 512
          pattern: ^[a-zA-Z0-9_]+$
        whsec:
          description: Stripe webhook endpoint secret
          type: string
          minLength: 1
          example: whsec_...
          maxLength: 255
          pattern: ^[a-zA-Z0-9_]+$
      required:
        - token
        - whsec
      additionalProperties: false
    ConfigTLS:
      description: TLS configuration
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: TLSConfig
      properties:
        enabled:
          description: Enable TLS/SSL
          type: boolean
          default: true
          example: true
        issuer:
          description: Cert-manager ClusterIssuer
          type: string
          default: letsencrypt-staging
          minLength: 1
          example: letsencrypt-prod
          maxLength: 255
          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
        secretName:
          description: Kubernetes secret name for TLS certificates
          type: string
          default: archesai-tls
          minLength: 1
          example: archesai-tls
          maxLength: 255
          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
      required:
        - enabled
      additionalProperties: false
    ConfigUnstructured:
      description: Unstructured.io service for document parsing
      x-internal: config
      type: object
      x-codegen-schema-type: valueobject
      title: UnstructuredConfig
      properties:
        enabled:
          description: Enable unstructured document parsing
          type: boolean
          default: false
          example: true
        managed:
          description: Use managed unstructured deployment
          type: boolean
          default: false
          example: true
        image:
          $ref: '#/components/schemas/ConfigImage'
        resources:
          $ref: '#/components/schemas/ConfigResource'
      required:
        - enabled
      additionalProperties: false
    FilterNode:
      title: FilterNode
      description: A recursive filter node that can be a condition or group
      x-internal: server
      x-codegen-schema-type: valueobject
      type: object
      properties:
        type:
          type: string
          enum:
            - and
            - or
            - eq
            - ne
            - gt
            - gte
            - lt
            - lte
            - contains
            - startsWith
            - endsWith
          description: The type of filter operation
          example: eq
        field:
          type: string
          description: The field to filter on (for leaf conditions)
          example: name
          minLength: 1
          maxLength: 255
          pattern: ^[a-zA-Z_][a-zA-Z0-9_]*$
        value:
          description: The value to compare against (for leaf conditions)
          oneOf:
            - type: string
              maxLength: 1000
              pattern: ^[\w\s\-.,!?()@#+/':;]+$
            - type: integer
              format: int64
              minimum: -9223372036854776000
              maximum: 9223372036854776000
            - type: boolean
          example: example-value
      required:
        - type
    Health:
      title: Health
      description: Health check response
      x-internal: server
      x-codegen-schema-type: valueobject
      type: object
      properties:
        services:
          type: object
          properties:
            database:
              type: string
              example: healthy
              enum:
                - healthy
                - unhealthy
                - degraded
            email:
              type: string
              example: healthy
              enum:
                - healthy
                - unhealthy
                - degraded
            redis:
              type: string
              example: healthy
              enum:
                - healthy
                - unhealthy
                - degraded
          required:
            - database
            - email
            - redis
          additionalProperties: false
        timestamp:
          type: string
          format: date-time
          maxLength: 64
          example: '2024-01-15T09:30:00Z'
        uptime:
          description: System uptime in seconds
          type: integer
          format: int64
          minimum: 0
          maximum: 9223372036854776000
          example: 86400
      required:
        - services
        - timestamp
        - uptime
      additionalProperties: false
    Page:
      description: Pagination parameters (limit & offset)
      x-internal: server
      type: object
      title: Page
      additionalProperties: false
      properties:
        limit:
          description: Maximum number of items to return
          type: integer
          format: int32
          minimum: 1
          default: 10
          maximum: 100
          example: 10
        offset:
          description: Number of items to skip before starting to collect the result set
          type: integer
          format: int32
          minimum: 0
          default: 0
          maximum: 9007199254740991
          example: 0
    PaginationMeta:
      description: Pagination metadata
      title: PaginationMeta
      type: object
      properties:
        total:
          description: Total number of items in the collection
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
          example: 42
      required:
        - total
      additionalProperties: false
      x-codegen-schema-type: valueobject
    Problem:
      title: Problem
      description: RFC 7807 (Problem Details) compliant error response
      x-internal: server
      type: object
      additionalProperties: false
      required:
        - status
        - title
      properties:
        status:
          type: integer
          format: int32
          description: HTTP status code
          minimum: 100
          maximum: 599
          example: 400
        type:
          type: string
          format: uri
          description: URI identifying the problem type
          default: about:blank
          example: https://api.example.com/errors/validation-failed
          minLength: 1
          maxLength: 2048
        title:
          type: string
          description: Short, human-readable summary
          example: Validation Failed
          minLength: 1
          maxLength: 255
          pattern: ^[\w\s\-.,!?()]+$
        detail:
          type: string
          description: Human-readable explanation specific to this occurrence
          example: The request body contains invalid fields
          minLength: 1
          maxLength: 255
          pattern: ^[\w\s\-.,!?()]+$
        instance:
          type: string
          format: uri
          description: URI identifying the specific occurrence
          example: https://api.example.com/auth/users/123
          maxLength: 2048
    UUID:
      description: UUID identifier
      x-internal: server
      type: string
      format: uuid
      example: 550e8400-e29b-41d4-a716-446655440000
      minLength: 36
      maxLength: 36
  responses:
    ConfigResponse:
      description: Current configuration
      content:
        application/json:
          schema:
            description: Configuration object
            type: object
            properties:
              data:
                $ref: '#/components/schemas/Config'
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
    BadRequest:
      description: 400 Bad Request
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
    Conflict:
      description: 409 Conflict
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
    HealthResponse:
      description: Health status retrieved successfully
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Health'
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
    InternalServerError:
      description: Internal server error
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
    NoContent:
      description: 204 No Content
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
    NotFound:
      description: 404 Not Found
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
    TooManyRequests:
      description: Too many requests - rate limit exceeded
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
        Retry-After:
          $ref: '#/components/headers/RetryAfter'
    Unauthorized:
      description: 401 Unauthorized
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
    UnprocessableEntity:
      description: 422 Unprocessable Entity
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
  parameters:
    PageQuery:
      in: query
      name: page
      required: false
      style: form
      explode: true
      schema:
        $ref: '#/components/schemas/Page'
      description: The page parameter
      example:
        limit: 10
        offset: 0
    ResourceID:
      schema:
        $ref: '#/components/schemas/UUID'
      in: path
      name: id
      required: true
      description: The unique identifier of the resource.
  headers:
    RateLimitLimit:
      description: The maximum number of requests allowed per time window
      schema:
        type: integer
        example: 1000
        format: int32
        minimum: 1
        maximum: 1000000
      example: 1000
    RateLimitRemaining:
      description: The number of requests remaining in the current time window
      schema:
        type: integer
        example: 999
        format: int32
        minimum: 0
        maximum: 1000000
      example: 999
    RateLimitReset:
      description: The time at which the current rate limit window resets (Unix timestamp)
      schema:
        type: integer
        example: 1640995200
        format: int64
        minimum: 0
        maximum: 9223372036854776000
      example: 1640995200
    RetryAfter:
      description: Number of seconds to wait before making a new request
      schema:
        type: integer
        example: 60
        format: int32
        minimum: 1
        maximum: 3600
      example: 60
  pathItems:
    config:
      get:
        x-internal: config
        x-codegen-custom-handler: true
        operationId: GetConfig
        summary: Get the configuration
        tags:
          - Config
        description: Get the configuration of the application
        responses:
          '200':
            $ref: '#/components/responses/ConfigResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '429':
            $ref: '#/components/responses/TooManyRequests'
          '500':
            $ref: '#/components/responses/InternalServerError'
        security:
          - {}
    health:
      get:
        x-internal: server
        x-codegen-custom-handler: true
        operationId: GetHealth
        summary: Get health status
        tags:
          - Health
        description: Check the health status of the application
        responses:
          '200':
            $ref: '#/components/responses/HealthResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '429':
            $ref: '#/components/responses/TooManyRequests'
          '500':
            $ref: '#/components/responses/InternalServerError'
        security:
          - {}
