openapi: 3.1.0
x-project-name: github.com/archesai/archesai/pkg/config
info:
  title: Arches Configuration API
  description: Configuration schemas for Arches platform
  version: v0.0.0
tags:
  - name: Config
    description: Configuration management
paths:
  /config:
    get:
      operationId: GetConfig
      summary: Get the configuration
      description: Get the configuration of the application
      security:
        - {}
      tags:
        - Config
      responses:
        '200':
          $ref: '#/components/responses/ConfigResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: config
    x-path: /config
  /health:
    get:
      operationId: GetHealth
      summary: Get health status
      description: Check the health status of the application
      security:
        - {}
      tags:
        - Health
      responses:
        '200':
          $ref: '#/components/responses/HealthResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-codegen-custom-handler: true
      x-internal: server
    x-path: /health
components:
  schemas:
    Base:
      title: Base
      description: Base schema for all entities with common fields
      type: object
      properties:
        createdAt:
          description: The date and time when the resource was created
          type: string
          format: date-time
          minLength: 1
          maxLength: 255
          example: '2024-01-15T09:30:00Z'
        id:
          description: Unique identifier for the resource
          type: string
          format: uuid
          minLength: 36
          maxLength: 36
          example: 550e8400-e29b-41d4-a716-446655440000
        updatedAt:
          description: The date and time when the resource was last updated
          type: string
          format: date-time
          minLength: 1
          maxLength: 255
          example: '2024-01-15T10:45:00Z'
      required:
        - id
        - createdAt
        - updatedAt
      x-internal: server
    Config:
      title: Config
      description: Arches AI configuration schema
      type: object
      properties:
        api:
          $ref: '#/components/schemas/ConfigAPI'
        auth:
          $ref: '#/components/schemas/ConfigAuth'
        billing:
          $ref: '#/components/schemas/ConfigBilling'
        database:
          $ref: '#/components/schemas/ConfigDatabase'
        generation:
          $ref: '#/components/schemas/ConfigGeneration'
        intelligence:
          $ref: '#/components/schemas/ConfigIntelligence'
        kubernetes:
          $ref: '#/components/schemas/ConfigKubernetes'
        logging:
          $ref: '#/components/schemas/ConfigLogging'
        platform:
          $ref: '#/components/schemas/ConfigPlatform'
        redis:
          $ref: '#/components/schemas/ConfigRedis'
        storage:
          $ref: '#/components/schemas/ConfigStorage'
      additionalProperties: false
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAPI:
      title: ConfigAPI
      description: Configuration schema for the API server
      type: object
      properties:
        cors:
          description: A comma-separated list of allowed origins for CORS requests
          type: string
          default: localhost
          minLength: 1
          maxLength: 2048
          pattern: ^[\w\-\.,:/@]+$
          example: localhost,https://platform.archesai.com
        docs:
          description: Enable or disable API documentation
          type: boolean
          default: true
          example: true
        email:
          $ref: '#/components/schemas/ConfigEmail'
        environment:
          description: Deployment environment (development, staging, production)
          type: string
          enum:
            - development
            - staging
            - production
          default: development
          example: development
        host:
          description: The host address on which the API server will listen
          type: string
          default: 0.0.0.0
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-\.:]+$
          example: 0.0.0.0
        image:
          $ref: '#/components/schemas/ConfigImage'
        port:
          description: The port on which the API server will listen
          type: integer
          default: 3001
          format: int32
          minimum: 1
          maximum: 65535
          example: 3001
        resources:
          $ref: '#/components/schemas/ConfigResource'
        url:
          description: The public URL for the API
          type: string
          default: http://localhost:3001
          format: uri
          maxLength: 2048
          example: http://localhost:3001
        validation:
          description: Enable or disable request validation
          type: boolean
          default: true
          example: true
      additionalProperties: false
      required:
        - cors
        - docs
        - environment
        - host
        - port
        - validation
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuth:
      title: ConfigAuth
      description: Authentication configuration for the API server
      type: object
      properties:
        enabled:
          description: Enable authentication
          type: boolean
          default: true
          example: true
        github:
          $ref: '#/components/schemas/ConfigAuthGithub'
        google:
          $ref: '#/components/schemas/ConfigAuthGoogle'
        local:
          $ref: '#/components/schemas/ConfigAuthLocal'
        magicLink:
          $ref: '#/components/schemas/ConfigAuthMagicLink'
        microsoft:
          $ref: '#/components/schemas/ConfigAuthMicrosoft'
        twitter:
          $ref: '#/components/schemas/ConfigAuthTwitter'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthGithub:
      title: ConfigAuthGithub
      description: GitHub OAuth configuration
      type: object
      properties:
        clientId:
          description: GitHub OAuth App client ID
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\.\-]+$
          example: Iv1.abc123def456ghi7
        clientSecret:
          description: GitHub OAuth App client secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
          example: abc123def456ghi789jkl012mno345pqr678stu901
        enabled:
          description: Enable GitHub OAuth
          type: boolean
          default: false
          example: false
        redirectUrl:
          description: OAuth callback URL
          type: string
          format: uri
          maxLength: 2048
          example: http://localhost:8080/auth/oauth/github/callback
        scopes:
          description: OAuth scopes to request
          type: array
          default:
            - user:email
          items:
            type: string
            maxLength: 255
            pattern: ^[\w\s\-:]+$
          maxItems: 1000
          example:
            - read:user
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthGoogle:
      title: ConfigAuthGoogle
      description: Google OAuth configuration
      type: object
      properties:
        clientId:
          description: Google OAuth client ID
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\.\-]+$
          example: 123456789012-abcdefghijklmnopqrstuvwxyz123456.apps.googleusercontent.com
        clientSecret:
          description: Google OAuth client secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
          example: GOCSPX-abc123def456ghi789jkl012
        enabled:
          description: Enable Google OAuth
          type: boolean
          default: false
          example: false
        redirectUrl:
          description: OAuth callback URL
          type: string
          format: uri
          maxLength: 2048
          example: http://localhost:8080/auth/oauth/google/callback
        scopes:
          description: OAuth scopes to request
          type: array
          default:
            - openid
            - profile
            - email
          items:
            type: string
            minLength: 1
            maxLength: 255
            pattern: ^[\w\s\-:\.]+$
          maxItems: 1000
          example:
            - openid
            - profile
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthLocal:
      title: ConfigAuthLocal
      description: Local username/password authentication
      type: object
      properties:
        accessTokenTTL:
          description: Access token time-to-live duration (e.g., "15m", "1h")
          type: string
          default: 15m
          minLength: 2
          maxLength: 20
          pattern: ^(\d+[smhd])+$
          example: 15m
        enabled:
          description: Enable local authentication
          type: boolean
          default: true
          example: true
        jwtSecret:
          description: Secret key for JWT token signing
          type: string
          default: change-me-in-production
          minLength: 32
          maxLength: 512
          pattern: ^[\w\-+=/.]+$
          example: your-256-bit-secret-key-here-change-in-production
        refreshTokenTTL:
          description: Refresh token time-to-live duration (e.g., "7d", "168h")
          type: string
          default: 168h
          minLength: 2
          maxLength: 20
          pattern: ^(\d+[smhd])+$
          example: 168h
      additionalProperties: false
      required:
        - enabled
        - jwtSecret
        - accessTokenTTL
        - refreshTokenTTL
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthMagicLink:
      title: ConfigAuthMagicLink
      description: Magic link authentication configuration
      type: object
      properties:
        deliveryMethods:
          description: Available delivery methods
          type: object
          properties:
            console:
              type: object
              properties:
                enabled:
                  description: Enable console output (development only)
                  type: boolean
                  default: false
                  example: false
              additionalProperties: false
            email:
              type: object
              properties:
                enabled:
                  type: boolean
                  default: true
                  example: true
                from:
                  type: string
                  format: email
                  maxLength: 255
                  example: noreply@archesai.com
              additionalProperties: false
            otp:
              type: object
              properties:
                enabled:
                  type: boolean
                  default: true
                  example: true
              additionalProperties: false
            webhook:
              type: object
              properties:
                enabled:
                  type: boolean
                  default: false
                  example: false
                url:
                  type: string
                  format: uri
                  maxLength: 2048
                  example: https://hooks.example.com/magic-link
              additionalProperties: false
          additionalProperties: false
        enabled:
          description: Enable magic link authentication
          type: boolean
          default: false
          example: true
        otpLength:
          description: Length of OTP code
          type: integer
          default: 6
          format: int32
          minimum: 4
          maximum: 8
          example: 6
        rateLimit:
          description: Rate limiting configuration
          type: object
          properties:
            maxAttempts:
              description: Maximum number of attempts within window
              type: integer
              default: 5
              format: int32
              minimum: 1
              maximum: 2147483647
              example: 5
            windowMinutes:
              description: Time window in minutes
              type: integer
              default: 15
              format: int32
              minimum: 1
              maximum: 2147483647
              example: 15
          additionalProperties: false
        tokenExpiry:
          description: Token expiry duration in minutes
          type: integer
          default: 15
          format: int32
          minimum: 1
          maximum: 60
          example: 15
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthMicrosoft:
      title: ConfigAuthMicrosoft
      description: Microsoft/Azure AD OAuth configuration
      type: object
      properties:
        clientId:
          description: Azure AD Application (client) ID
          type: string
          format: uuid
          minLength: 1
          maxLength: 255
          example: 12345678-1234-1234-1234-123456789012
        clientSecret:
          description: Azure AD client secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-~]+$
          example: abc~def123GHI456jkl789MNO012pqr345
        enabled:
          description: Enable Microsoft OAuth
          type: boolean
          default: false
          example: false
        redirectUrl:
          description: OAuth callback URL
          type: string
          format: uri
          maxLength: 2048
          example: http://localhost:8080/auth/oauth/microsoft/callback
        scopes:
          description: OAuth scopes to request
          type: array
          default:
            - openid
            - profile
            - email
            - User.Read
          items:
            type: string
            maxLength: 255
            pattern: ^[\w\s\-:\.]+$
          maxItems: 1000
          example:
            - openid
            - profile
        tenant:
          description: Azure AD tenant ID (use 'common' for multi-tenant)
          type: string
          default: common
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
          example: common
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigAuthTwitter:
      title: ConfigAuthTwitter
      description: Twitter OAuth configuration
      type: object
      properties:
        callbackURL:
          description: OAuth callback URL
          type: string
          format: uri
          minLength: 1
          maxLength: 2048
          example: http://localhost:8080/auth/oauth/twitter/callback
        consumerKey:
          description: Twitter API consumer key
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
        consumerSecret:
          description: Twitter API consumer secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\-]+$
        enabled:
          description: Enable Twitter OAuth
          type: boolean
          default: false
          example: true
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigBilling:
      title: ConfigBilling
      description: Billing configuration for Stripe
      type: object
      properties:
        enabled:
          description: Enable billing functionality
          type: boolean
          default: false
          example: true
        stripe:
          $ref: '#/components/schemas/ConfigStripe'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigDatabase:
      title: ConfigDatabase
      description: Database configuration for PostgreSQL
      type: object
      properties:
        type:
          description: Database type (postgresql or sqlite)
          type: string
          enum:
            - postgresql
            - sqlite
          default: postgresql
          example: postgresql
        connMaxIdleTime:
          description: Maximum connection idle time (e.g., "5m")
          type: string
          minLength: 2
          maxLength: 20
          pattern: ^(\d+[smh])+$
          example: 5m
        connMaxLifetime:
          description: Maximum connection lifetime (e.g., "30m")
          type: string
          minLength: 2
          maxLength: 20
          pattern: ^(\d+[smh])+$
          example: 30m
        enabled:
          description: Enable database
          type: boolean
          default: true
          example: true
        healthCheckPeriod:
          description: Health check period for connections (PostgreSQL)
          type: string
          minLength: 2
          maxLength: 20
          pattern: ^(\d+[smh])+$
          example: 30s
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed database deployment
          type: boolean
          default: false
          example: true
        maxConns:
          description: Maximum number of connections in pool (PostgreSQL)
          type: integer
          default: 25
          format: int32
          minimum: 1
          maximum: 2147483647
          example: 25
        minConns:
          description: Minimum number of connections in pool (PostgreSQL)
          type: integer
          default: 5
          format: int32
          minimum: 0
          maximum: 2147483647
          example: 5
        persistence:
          $ref: '#/components/schemas/ConfigPersistence'
        resources:
          $ref: '#/components/schemas/ConfigResource'
        runMigrations:
          description: Automatically run database migrations on startup
          type: boolean
          default: false
          example: true
        url:
          description: Database connection url/string
          type: string
          default: postgresql://admin:password@127.0.0.1:5432/archesai
          format: uri
          minLength: 1
          maxLength: 2048
          example: postgresql://admin:password@127.0.0.1:5432/archesai
      additionalProperties: false
      required:
        - enabled
        - url
        - type
        - maxConns
        - minConns
        - runMigrations
        - managed
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigEmail:
      title: ConfigEmail
      description: Email configuration for sending emails
      type: object
      properties:
        enabled:
          description: Enable email functionality
          type: boolean
          default: false
          example: true
        password:
          description: Password for the email service
          type: string
          maxLength: 255
          pattern: ^[\w\s\-.,!?()@#+/=]*$
          example: secret-password-123
        service:
          description: Email service provider (e.g., "gmail", "sendgrid", etc.)
          type: string
          maxLength: 255
          pattern: ^[\w\-]+$
          example: sendgrid
        user:
          description: Username for the email service
          type: string
          format: email
          maxLength: 255
          pattern: ^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$
          example: user@example.com
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigGeneration:
      title: ConfigGeneration
      description: Code generation configuration
      type: object
      properties:
        style:
          description: File output style
          type: string
          enum:
            - multi
            - single
          default: multi
        groups:
          description: Generator groups to enable (all enabled by default)
          type: object
          properties:
            schemas:
              description: Generate model schemas
              type: boolean
              default: true
            http:
              description: Generate HTTP handlers
              type: boolean
              default: true
            module:
              description: Generate go.mod and main.go
              type: boolean
              default: true
            operations:
              description: Generate operation types (use cases)
              type: boolean
              default: true
            postgres:
              description: Generate PostgreSQL repositories and migrations
              type: boolean
              default: true
            sqlite:
              description: Generate SQLite repositories
              type: boolean
              default: true
            web:
              description: Generate frontend web files
              type: boolean
              default: true
            wire:
              description: Generate app bootstrap and wiring
              type: boolean
              default: true
          additionalProperties: false
        includes:
          description: Built-in package includes
          type: array
          items:
            type: string
            enum:
              - server
              - auth
              - config
              - pipelines
              - executor
              - storage
          maxItems: 10
        lint:
          description: Enable strict linting
          type: boolean
        output:
          description: Output directory for generated files
          type: string
          minLength: 1
          maxLength: 4096
          pattern: ^[a-zA-Z0-9_./-]+$
        spec:
          description: Path to the OpenAPI specification file
          type: string
          minLength: 1
          maxLength: 4096
          pattern: ^[a-zA-Z0-9_./-]+$
      additionalProperties: false
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigGrafana:
      title: ConfigGrafana
      description: Grafana monitoring dashboard configuration
      type: object
      properties:
        enabled:
          description: Enable Grafana
          type: boolean
          default: false
          example: true
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed Grafana deployment
          type: boolean
          default: false
          example: true
        resources:
          $ref: '#/components/schemas/ConfigResource'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigImage:
      title: ConfigImage
      description: Container image configuration
      type: object
      properties:
        pullPolicy:
          description: Kubernetes image pull policy
          type: string
          enum:
            - Always
            - IfNotPresent
            - Never
          default: IfNotPresent
          example: Always
        repository:
          description: Container image repository
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[a-z0-9]+(([._]|__|[-]+)[a-z0-9]+)*(\/[a-z0-9]+(([._]|__|[-]+)[a-z0-9]+)*)*$
          example: archesai/archesai
        tag:
          description: Container image tag
          type: string
          default: latest
          minLength: 1
          maxLength: 255
          pattern: ^[a-zA-Z0-9_][a-zA-Z0-9._-]*$
          example: v1.0.0
      additionalProperties: false
      required:
        - pullPolicy
        - tag
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigImages:
      title: ConfigImages
      description: Container image configuration
      type: object
      properties:
        imagePullSecrets:
          description: List of Kubernetes secrets for pulling private images
          type: array
          default: []
          items:
            type: string
            minLength: 1
            maxLength: 255
            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
            example: regcred
          maxItems: 1000
        imageRegistry:
          description: Custom container registry URL (leave empty for Docker Hub)
          type: string
          default: ''
          maxLength: 2048
          pattern: ^(|[a-z0-9]([-a-z0-9\.]*[a-z0-9])?(:[0-9]+)?)$
          example: gcr.io
      additionalProperties: false
      required:
        - imagePullSecrets
        - imageRegistry
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigInfrastructure:
      title: ConfigInfrastructure
      description: Infrastructure configuration for Kubernetes deployments
      type: object
      properties:
        images:
          $ref: '#/components/schemas/ConfigImages'
        migrations:
          $ref: '#/components/schemas/ConfigMigrations'
        namespace:
          description: Kubernetes namespace where all resources will be deployed
          type: string
          default: arches-system
          minLength: 1
          maxLength: 255
          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
          example: arches-system
        serviceAccount:
          $ref: '#/components/schemas/ConfigServiceAccount'
      additionalProperties: false
      required:
        - images
        - migrations
        - namespace
        - serviceAccount
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigIngress:
      title: ConfigIngress
      description: Ingress configuration
      type: object
      properties:
        domain:
          description: Primary domain name for ingress routing
          type: string
          default: archesai.dev
          format: hostname
          minLength: 1
          maxLength: 255
          example: archesai.dev
        enabled:
          description: Enable ingress
          type: boolean
          default: false
          example: true
        tls:
          $ref: '#/components/schemas/ConfigTLS'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigIntelligence:
      title: ConfigIntelligence
      description: Intelligence configuration (LLMs, embeddings, scraper, speech, etc.)
      type: object
      properties:
        embedding:
          $ref: '#/components/schemas/ConfigLLM'
        llm:
          $ref: '#/components/schemas/ConfigLLM'
        runpod:
          $ref: '#/components/schemas/ConfigRunPod'
        scraper:
          $ref: '#/components/schemas/ConfigScraper'
        speech:
          $ref: '#/components/schemas/ConfigSpeech'
        unstructured:
          $ref: '#/components/schemas/ConfigUnstructured'
      additionalProperties: false
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigKubernetes:
      title: ConfigKubernetes
      description: Kubernetes-specific deployment configuration
      type: object
      properties:
        infrastructure:
          $ref: '#/components/schemas/ConfigInfrastructure'
        ingress:
          $ref: '#/components/schemas/ConfigIngress'
        monitoring:
          $ref: '#/components/schemas/ConfigMonitoring'
      additionalProperties: false
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigLLM:
      title: ConfigLLM
      description: Large Language Model configuration
      type: object
      properties:
        type:
          description: LLM provider type
          type: string
          enum:
            - ollama
            - openai
          default: ollama
          example: ollama
        endpoint:
          description: LLM service endpoint URL
          type: string
          format: uri
          minLength: 1
          maxLength: 2048
          example: http://localhost:11434
        token:
          description: Authentication token for LLM service
          type: string
          minLength: 1
          maxLength: 512
          pattern: ^[a-zA-Z0-9_\-\.]+$
          example: sk-...
      additionalProperties: false
      required:
        - type
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigLogging:
      title: ConfigLogging
      description: Logging configuration
      type: object
      properties:
        level:
          description: Minimum log level to output
          type: string
          enum:
            - fatal
            - error
            - warn
            - info
            - debug
            - trace
            - silent
          default: info
          example: fatal
        pretty:
          description: Enable pretty-printed logs for development
          type: boolean
          default: false
          example: true
      additionalProperties: false
      required:
        - level
        - pretty
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigLoki:
      title: ConfigLoki
      description: Loki log aggregation service configuration
      type: object
      properties:
        enabled:
          description: Enable Loki
          type: boolean
          default: false
          example: true
        host:
          description: Loki host URL
          type: string
          default: http://localhost:3100
          format: uri
          minLength: 1
          maxLength: 2048
          example: http://localhost:3100
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed Loki deployment
          type: boolean
          default: false
          example: true
        resources:
          $ref: '#/components/schemas/ConfigResource'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigMigrations:
      title: ConfigMigrations
      description: Database migration configuration
      type: object
      properties:
        enabled:
          description: Enable automatic DB migrations
          type: boolean
          default: false
          example: true
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigMonitoring:
      title: ConfigMonitoring
      description: Monitoring configuration for Grafana and Loki
      type: object
      properties:
        grafana:
          $ref: '#/components/schemas/ConfigGrafana'
        loki:
          $ref: '#/components/schemas/ConfigLoki'
      additionalProperties: false
      required:
        - grafana
        - loki
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigPersistence:
      title: ConfigPersistence
      description: Persistent storage configuration
      type: object
      properties:
        enabled:
          description: Enable persistent storage
          type: boolean
          default: true
          example: true
        size:
          description: Size of persistent volume
          type: string
          default: 10Gi
          minLength: 1
          maxLength: 255
          pattern: ^[0-9]+(Ei|Pi|Ti|Gi|Mi|Ki|E|P|T|G|M|K)?$
          example: 10Gi
      additionalProperties: false
      required:
        - enabled
        - size
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigPlatform:
      title: ConfigPlatform
      description: Platform configuration (host, image, resources)
      type: object
      properties:
        enabled:
          description: Enable platform service
          type: boolean
          default: false
          example: true
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed platform deployment
          type: boolean
          default: false
          example: true
        resources:
          $ref: '#/components/schemas/ConfigResource'
        url:
          description: Platform URL
          type: string
          default: http://localhost:3000
          format: uri
          maxLength: 2048
          example: https://platform.archesai.dev
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigRedis:
      title: ConfigRedis
      description: Redis configuration
      type: object
      properties:
        auth:
          description: Redis authentication password
          type: string
          default: password
          minLength: 1
          maxLength: 72
          pattern: ^[\w\-@./#&+!*()]+$
          example: secure-redis-password
        ca:
          description: Certificate Authority for TLS (optional)
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\s\-./]+$
          example: /etc/ssl/certs/ca.pem
        enabled:
          description: Enable Redis
          type: boolean
          default: false
          example: true
        host:
          description: Redis hostname or IP
          type: string
          default: localhost
          minLength: 1
          maxLength: 255
          pattern: ^[a-zA-Z0-9.\-]+$
          example: redis.example.com
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed Redis deployment
          type: boolean
          default: false
          example: true
        persistence:
          $ref: '#/components/schemas/ConfigPersistence'
        port:
          description: Redis port number
          type: integer
          default: 6379
          format: int32
          minimum: 1
          maximum: 65535
          example: 6379
        resources:
          $ref: '#/components/schemas/ConfigResource'
      additionalProperties: false
      required:
        - enabled
        - auth
        - host
        - port
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigResource:
      title: ConfigResource
      description: Kubernetes resource configuration
      type: object
      properties:
        limits:
          description: Resource limits
          type: object
          properties:
            cpu:
              description: Maximum CPU allocation
              type: string
              default: 1000m
              minLength: 1
              maxLength: 255
              pattern: ^\d+m?$
              example: 1000m
            memory:
              description: Maximum memory allocation
              type: string
              default: 1Gi
              minLength: 1
              maxLength: 255
              pattern: ^\d+(Mi|Gi|Ki)?$
              example: 1Gi
          additionalProperties: false
          required:
            - cpu
            - memory
        requests:
          description: Resource requests
          type: object
          properties:
            cpu:
              description: Requested CPU allocation
              type: string
              default: 100m
              minLength: 1
              maxLength: 255
              pattern: ^\d+m?$
              example: 100m
            memory:
              description: Requested memory allocation
              type: string
              default: 128Mi
              minLength: 1
              maxLength: 255
              pattern: ^\d+(Mi|Gi|Ki)?$
              example: 128Mi
          additionalProperties: false
          required:
            - cpu
            - memory
      additionalProperties: false
      required:
        - limits
        - requests
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigRunPod:
      title: ConfigRunPod
      description: RunPod serverless GPU configuration
      type: object
      properties:
        enabled:
          description: Enable RunPod integration
          type: boolean
          default: false
          example: true
        token:
          description: RunPod API token
          type: string
          minLength: 1
          maxLength: 512
          pattern: ^[a-zA-Z0-9_\-\.]+$
          example: rp-...
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigScraper:
      title: ConfigScraper
      description: Web scraping service configuration
      type: object
      properties:
        enabled:
          description: Enable scraper service
          type: boolean
          default: false
          example: true
        endpoint:
          description: Web scraper service endpoint URL
          type: string
          format: uri
          minLength: 1
          maxLength: 2048
          example: http://scraper:8080
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed scraper deployment
          type: boolean
          default: false
          example: true
        resources:
          $ref: '#/components/schemas/ConfigResource'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigServiceAccount:
      title: ConfigServiceAccount
      description: Kubernetes service account configuration
      type: object
      properties:
        name:
          description: Custom service account name
          type: string
          default: ''
          maxLength: 255
          pattern: ^(|[a-z0-9]([-a-z0-9]*[a-z0-9])?)$
          example: archesai-sa
        create:
          description: Create dedicated service account
          type: boolean
          default: true
          example: true
      additionalProperties: false
      required:
        - create
        - name
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigSpeech:
      title: ConfigSpeech
      description: Speech recognition and TTS services
      type: object
      properties:
        enabled:
          description: Enable speech services
          type: boolean
          default: false
          example: true
        token:
          description: Speech-to-text service API token
          type: string
          minLength: 1
          maxLength: 512
          pattern: ^[a-zA-Z0-9_\-\.]+$
          example: sk-...
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigStorage:
      title: ConfigStorage
      description: Object storage configuration for MinIO or S3-compatible services
      type: object
      properties:
        accesskey:
          description: MinIO/S3 access key ID
          type: string
          default: minioadmin
          minLength: 1
          maxLength: 255
          pattern: ^[A-Z0-9]+$
          example: AKIAIOSFODNN7EXAMPLE
        bucket:
          description: S3 bucket name
          type: string
          default: archesai
          minLength: 1
          maxLength: 255
          pattern: ^[a-z0-9][a-z0-9\-]*[a-z0-9]$
          example: archesai
        enabled:
          description: Enable object storage
          type: boolean
          default: false
          example: true
        endpoint:
          description: MinIO server endpoint URL
          type: string
          default: http://localhost:9000
          format: uri
          minLength: 1
          maxLength: 2048
          example: http://localhost:9000
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed storage deployment
          type: boolean
          default: false
          example: true
        persistence:
          $ref: '#/components/schemas/ConfigPersistence'
        resources:
          $ref: '#/components/schemas/ConfigResource'
        secretkey:
          description: MinIO/S3 secret access key
          type: string
          default: minioadmin
          minLength: 1
          maxLength: 255
          pattern: ^[A-Za-z0-9+/=]+$
          example: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
      additionalProperties: false
      required:
        - enabled
        - accesskey
        - bucket
        - endpoint
        - secretkey
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigStripe:
      title: ConfigStripe
      description: Stripe payment configuration
      type: object
      properties:
        token:
          description: Stripe secret API key
          type: string
          minLength: 1
          maxLength: 512
          pattern: ^[a-zA-Z0-9_]+$
          example: sk_test_51H...
        whsec:
          description: Stripe webhook endpoint secret
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[a-zA-Z0-9_]+$
          example: whsec_...
      additionalProperties: false
      required:
        - token
        - whsec
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigTLS:
      title: ConfigTLS
      description: TLS configuration
      type: object
      properties:
        enabled:
          description: Enable TLS/SSL
          type: boolean
          default: true
          example: true
        issuer:
          description: Cert-manager ClusterIssuer
          type: string
          default: letsencrypt-staging
          minLength: 1
          maxLength: 255
          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
          example: letsencrypt-prod
        secretName:
          description: Kubernetes secret name for TLS certificates
          type: string
          default: archesai-tls
          minLength: 1
          maxLength: 255
          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
          example: archesai-tls
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    ConfigUnstructured:
      title: ConfigUnstructured
      description: Unstructured.io service for document parsing
      type: object
      properties:
        enabled:
          description: Enable unstructured document parsing
          type: boolean
          default: false
          example: true
        image:
          $ref: '#/components/schemas/ConfigImage'
        managed:
          description: Use managed unstructured deployment
          type: boolean
          default: false
          example: true
        resources:
          $ref: '#/components/schemas/ConfigResource'
      additionalProperties: false
      required:
        - enabled
      x-codegen-schema-type: valueobject
      x-internal: config
    FilterNode:
      title: FilterNode
      description: A recursive filter node that can be a condition or group
      type: object
      properties:
        type:
          description: The type of filter operation
          type: string
          enum:
            - and
            - or
            - eq
            - ne
            - gt
            - gte
            - lt
            - lte
            - contains
            - startsWith
            - endsWith
          example: eq
        field:
          description: The field to filter on (for leaf conditions)
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[a-zA-Z_][a-zA-Z0-9_]*$
          example: name
        value:
          description: The value to compare against (for leaf conditions)
          oneOf:
            - type: string
              maxLength: 1000
              pattern: ^[\w\s\-.,!?()@#+/':;]+$
            - type: integer
              format: int64
              minimum: -9223372036854775808
              maximum: 9223372036854775807
            - type: boolean
          example: example-value
      required:
        - type
      x-codegen-schema-type: valueobject
      x-internal: server
    Health:
      title: Health
      description: Health check response
      type: object
      properties:
        services:
          type: object
          properties:
            database:
              type: string
              enum:
                - healthy
                - unhealthy
                - degraded
              example: healthy
            email:
              type: string
              enum:
                - healthy
                - unhealthy
                - degraded
              example: healthy
            redis:
              type: string
              enum:
                - healthy
                - unhealthy
                - degraded
              example: healthy
          additionalProperties: false
          required:
            - database
            - email
            - redis
        timestamp:
          type: string
          format: date-time
          maxLength: 64
          example: '2024-01-15T09:30:00Z'
        uptime:
          description: System uptime in seconds
          type: integer
          format: int64
          minimum: 0
          maximum: 9223372036854775807
          example: 86400
      additionalProperties: false
      required:
        - services
        - timestamp
        - uptime
      x-codegen-schema-type: valueobject
      x-internal: server
    Page:
      title: Page
      description: Pagination parameters (limit & offset)
      type: object
      properties:
        limit:
          description: Maximum number of items to return
          type: integer
          default: 10
          format: int32
          minimum: 1
          maximum: 100
          example: 10
        offset:
          description: Number of items to skip before starting to collect the result set
          type: integer
          default: 0
          format: int32
          minimum: 0
          maximum: 9007199254740991
          example: 0
      additionalProperties: false
      x-codegen-schema-type: valueobject
      x-internal: server
    PaginationMeta:
      title: PaginationMeta
      # yaml-language-server: $schema=https://spec.openapis.org/oas/3.2/schema/2025-09-17#/$defs/schema
      description: Pagination metadata
      type: object
      properties:
        total:
          description: Total number of items in the collection
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
          example: 42
      additionalProperties: false
      required:
        - total
      x-codegen-schema-type: valueobject
      x-internal: server
    Problem:
      title: Problem
      description: RFC 7807 (Problem Details) compliant error response
      type: object
      properties:
        title:
          description: Short, human-readable summary
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\s\-.,!?()]+$
          example: Validation Failed
        type:
          description: URI identifying the problem type
          type: string
          default: about:blank
          format: uri
          minLength: 1
          maxLength: 2048
          example: https://api.example.com/errors/validation-failed
        detail:
          description: Human-readable explanation specific to this occurrence
          type: string
          minLength: 1
          maxLength: 255
          pattern: ^[\w\s\-.,!?()]+$
          example: The request body contains invalid fields
        instance:
          description: URI identifying the specific occurrence
          type: string
          format: uri
          maxLength: 2048
          example: https://api.example.com/auth/users/123
        status:
          description: HTTP status code
          type: integer
          format: int32
          minimum: 100
          maximum: 599
          example: 400
      additionalProperties: false
      required:
        - status
        - title
      x-codegen-schema-type: valueobject
      x-internal: server
    UUID:
      title: UUID
      description: UUID identifier
      type: string
      format: uuid
      minLength: 36
      maxLength: 36
      example: 550e8400-e29b-41d4-a716-446655440000
      x-codegen-schema-type: valueobject
      x-internal: server
  responses:
    BadRequest:
      description: 400 Bad Request
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    ConfigResponse:
      description: Current configuration
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            description: Configuration object
            type: object
            properties:
              data:
                $ref: '#/components/schemas/Config'
    Conflict:
      description: 409 Conflict
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    HealthResponse:
      description: Health status retrieved successfully
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Health'
    InternalServerError:
      description: Internal server error
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    NoContent:
      description: 204 No Content
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
    NotFound:
      description: 404 Not Found
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    TooManyRequests:
      description: Too many requests - rate limit exceeded
      headers:
        Retry-After:
          $ref: '#/components/headers/RetryAfter'
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    Unauthorized:
      description: 401 Unauthorized
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    UnprocessableEntity:
      description: 422 Unprocessable Entity
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/RateLimitLimit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/RateLimitRemaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/RateLimitReset'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
  parameters:
    PageQuery:
      name: page
      description: The page parameter
      required: false
      schema:
        $ref: '#/components/schemas/Page'
      example:
        limit: 10
        offset: 0
      in: query
      style: form
      explode: true
    ResourceID:
      name: id
      description: The unique identifier of the resource.
      required: true
      schema:
        $ref: '#/components/schemas/UUID'
      in: path
  headers:
    RateLimitLimit:
      description: The maximum number of requests allowed per time window
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 1000000
        example: 1000
    RateLimitRemaining:
      description: The number of requests remaining in the current time window
      schema:
        type: integer
        format: int32
        minimum: 0
        maximum: 1000000
        example: 999
    RateLimitReset:
      description: The time at which the current rate limit window resets (Unix timestamp)
      schema:
        type: integer
        format: int64
        minimum: 0
        maximum: 9223372036854775807
        example: 1640995200
    RetryAfter:
      description: Number of seconds to wait before making a new request
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 3600
        example: 60
