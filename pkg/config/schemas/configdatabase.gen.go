// Code generated by archesai. DO NOT EDIT.

package schemas

import (
	"fmt"
	"strings"
)

// ConfigDatabaseType represents the enumeration of valid values for Type
type ConfigDatabaseType string

// Valid Type values
const (
	ConfigDatabaseTypePostgresql ConfigDatabaseType = "postgresql"
	ConfigDatabaseTypeSqlite     ConfigDatabaseType = "sqlite"
)

// String returns the string representation
func (e ConfigDatabaseType) String() string {
	return string(e)
}

// IsValid checks if the value is valid
func (e ConfigDatabaseType) IsValid() bool {
	switch e {
	case ConfigDatabaseTypePostgresql:
		return true
	case ConfigDatabaseTypeSqlite:
		return true
	default:
		return false
	}
}

// ParseConfigDatabaseType parses a string into the enum type
func ParseConfigDatabaseType(s string) (ConfigDatabaseType, error) {
	v := ConfigDatabaseType(s)
	if !v.IsValid() {
		return "", fmt.Errorf("invalid Type: %s", s)
	}
	return v, nil
}

// ConfigDatabase represents Database configuration for PostgreSQL
type ConfigDatabase struct {

	// ConnMaxIdleTime Maximum connection idle time (e.g., "5m")
	ConnMaxIdleTime *string `json:"connMaxIdleTime,omitempty" yaml:"connMaxIdleTime,omitempty"`

	// ConnMaxLifetime Maximum connection lifetime (e.g., "30m")
	ConnMaxLifetime *string `json:"connMaxLifetime,omitempty" yaml:"connMaxLifetime,omitempty"`

	// Enabled Enable database
	Enabled bool `json:"enabled" yaml:"enabled"`

	// HealthCheckPeriod Health check period for connections (PostgreSQL)
	HealthCheckPeriod *string      `json:"healthCheckPeriod,omitempty" yaml:"healthCheckPeriod,omitempty"`
	Image             *ConfigImage `json:"image,omitempty" yaml:"image,omitempty"`

	// Managed Use managed database deployment
	Managed bool `json:"managed" yaml:"managed"`

	// MaxConns Maximum number of connections in pool (PostgreSQL)
	MaxConns int32 `json:"maxConns" yaml:"maxConns"`

	// MinConns Minimum number of connections in pool (PostgreSQL)
	MinConns    int32              `json:"minConns" yaml:"minConns"`
	Persistence *ConfigPersistence `json:"persistence,omitempty" yaml:"persistence,omitempty"`
	Resources   *ConfigResource    `json:"resources,omitempty" yaml:"resources,omitempty"`

	// RunMigrations Automatically run database migrations on startup
	RunMigrations bool `json:"runMigrations" yaml:"runMigrations"`

	// Type Database type (postgresql or sqlite)
	Type ConfigDatabaseType `json:"type" yaml:"type"`

	// URL Database connection url/string
	URL string `json:"url" yaml:"url"`
}

// NewConfigDatabase creates a new immutable ConfigDatabase value object.
// Value objects are immutable and validated upon creation.
func NewConfigDatabase(
	connMaxIdleTime *string,
	connMaxLifetime *string,
	enabled bool,
	healthCheckPeriod *string,
	image *ConfigImage,
	managed bool,
	maxConns int32,
	minConns int32,
	persistence *ConfigPersistence,
	resources *ConfigResource,
	runMigrations bool,
	type_ ConfigDatabaseType,
	url string,
) (ConfigDatabase, error) {
	// Validate required fields
	if !type_.IsValid() {
		return ConfigDatabase{}, fmt.Errorf("invalid Type: %s", type_)
	}
	if url == "" {
		return ConfigDatabase{}, fmt.Errorf("URL cannot be empty")
	}
	return ConfigDatabase{
		ConnMaxIdleTime:   connMaxIdleTime,
		ConnMaxLifetime:   connMaxLifetime,
		Enabled:           enabled,
		HealthCheckPeriod: healthCheckPeriod,
		Image:             image,
		Managed:           managed,
		MaxConns:          maxConns,
		MinConns:          minConns,
		Persistence:       persistence,
		Resources:         resources,
		RunMigrations:     runMigrations,
		Type:              type_,
		URL:               url,
	}, nil
}

// ZeroConfigDatabase returns the zero value for ConfigDatabase.
// This is useful for comparisons and as a default value.
func ZeroConfigDatabase() ConfigDatabase {
	return ConfigDatabase{}
}

// GetConnMaxIdleTime returns the ConnMaxIdleTime value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetConnMaxIdleTime() *string {
	return v.ConnMaxIdleTime
}

// GetConnMaxLifetime returns the ConnMaxLifetime value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetConnMaxLifetime() *string {
	return v.ConnMaxLifetime
}

// GetEnabled returns the Enabled value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetEnabled() bool {
	return v.Enabled
}

// GetHealthCheckPeriod returns the HealthCheckPeriod value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetHealthCheckPeriod() *string {
	return v.HealthCheckPeriod
}

// GetImage returns the Image value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetImage() *ConfigImage {
	return v.Image
}

// GetManaged returns the Managed value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetManaged() bool {
	return v.Managed
}

// GetMaxConns returns the MaxConns value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetMaxConns() int32 {
	return v.MaxConns
}

// GetMinConns returns the MinConns value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetMinConns() int32 {
	return v.MinConns
}

// GetPersistence returns the Persistence value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetPersistence() *ConfigPersistence {
	return v.Persistence
}

// GetResources returns the Resources value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetResources() *ConfigResource {
	return v.Resources
}

// GetRunMigrations returns the RunMigrations value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetRunMigrations() bool {
	return v.RunMigrations
}

// GetType returns the Type value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetType() ConfigDatabaseType {
	return v.Type
}

// GetURL returns the URL value.
// Value objects are immutable, so this returns a copy of the value.
func (v ConfigDatabase) GetURL() string {
	return v.URL
}

// Validate validates the ConfigDatabase value object.
// Returns an error if any field fails validation.
func (v ConfigDatabase) Validate() error {
	if !v.Type.IsValid() {
		return fmt.Errorf("invalid Type: %s", v.Type)
	}
	return nil
}

// IsZero returns true if this is the zero value.
func (v ConfigDatabase) IsZero() bool {
	zero := ZeroConfigDatabase()
	// Compare using string representation as a simple equality check
	return v.String() == zero.String()
}

// String returns a string representation of ConfigDatabase
func (v ConfigDatabase) String() string {
	var fields []string
	fields = append(fields, fmt.Sprintf("ConnMaxIdleTime: %v", v.ConnMaxIdleTime))
	fields = append(fields, fmt.Sprintf("ConnMaxLifetime: %v", v.ConnMaxLifetime))
	fields = append(fields, fmt.Sprintf("Enabled: %v", v.Enabled))
	fields = append(fields, fmt.Sprintf("HealthCheckPeriod: %v", v.HealthCheckPeriod))
	fields = append(fields, fmt.Sprintf("Image: %v", v.Image))
	fields = append(fields, fmt.Sprintf("Managed: %v", v.Managed))
	fields = append(fields, fmt.Sprintf("MaxConns: %v", v.MaxConns))
	fields = append(fields, fmt.Sprintf("MinConns: %v", v.MinConns))
	fields = append(fields, fmt.Sprintf("Persistence: %v", v.Persistence))
	fields = append(fields, fmt.Sprintf("Resources: %v", v.Resources))
	fields = append(fields, fmt.Sprintf("RunMigrations: %v", v.RunMigrations))
	fields = append(fields, fmt.Sprintf("Type: %v", v.Type))
	fields = append(fields, fmt.Sprintf("URL: %v", v.URL))
	return fmt.Sprintf("ConfigDatabase{%s}", strings.Join(fields, ", "))
}
