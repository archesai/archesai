apiVersion: v1
kind: Secret
metadata:
  name: archesai-tls
type: kubernetes.io/tls
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVPRENDQXFDZ0F3SUJBZ0lSQUpXWE1YOWVicmpOWTdjYUxpVTN1Ujh3RFFZSktvWklodmNOQVFFTEJRQXcKYnpFZU1Cd0dBMVVFQ2hNVmJXdGpaWEowSUdSbGRtVnNiM0J0Wlc1MElFTkJNU0l3SUFZRFZRUUxEQmxxYjI1aApkR2hoYmtCdGIyOXpaU0FvU205dVlYUm9ZVzRwTVNrd0p3WURWUVFERENCdGEyTmxjblFnYW05dVlYUm9ZVzVBCmJXOXZjMlVnS0VwdmJtRjBhR0Z1S1RBZUZ3MHlOVEEzTURrd056UXhNelphRncweU56RXdNRGt3TnpReE16WmEKTUUweEp6QWxCZ05WQkFvVEhtMXJZMlZ5ZENCa1pYWmxiRzl3YldWdWRDQmpaWEowYVdacFkyRjBaVEVpTUNBRwpBMVVFQ3d3WmFtOXVZWFJvWVc1QWJXOXZjMlVnS0VwdmJtRjBhR0Z1S1RDQ0FTSXdEUVlKS29aSWh2Y05BUUVCCkJRQURnZ0VQQURDQ0FRb0NnZ0VCQU4rUHduajB4M1paR1JRdnRLR005TTJlSXNkaWNSZTcxaS9hWVZVS1J5S3cKWHNWeEJ1NUxHdG1MRUFXdEN4QWx5aWVFbVVwdDAzdlFYRm1jbWI5N0dOTmovVDVSUmNFTVB4MjBVS3Y4dlc4RwovcS9Dc1JObGdGNEMvWExRWEZTK1JaUnlYWE8yZmE5d1JjVVd3M0lRbjFvT2tvNkhTS2tnTkNwM29tRXgrVUFHCjQ1MDBFN05LYTZVbGxPNlJiT3hMVzZ5Z2JtbFBURkM0QVhiTmtVc3U2MFBzelpjbnpJUyszWW02TEVUNlFUTWgKdm9zQnlUOVJNOVBjQlZhQ0loZysveHpRMldTMTR5SlpncWlpM0Q4RWVLVXY2WjhrU1BHZFRCUGttTzBLOFhFaApzSWg4UnNEUm40YUN0akVsZjVVSThoRFdEdmVJcHJ6d1NOVjZSVGRRQ1JjQ0F3RUFBYU54TUc4d0RnWURWUjBQCkFRSC9CQVFEQWdXZ01CTUdBMVVkSlFRTU1Bb0dDQ3NHQVFVRkJ3TUJNQjhHQTFVZEl3UVlNQmFBRkVUYU5MMW4KQVlUaEZ1VlFrWCttck1WL01xV1JNQ2NHQTFVZEVRUWdNQjZDREdGeVkyaGxjMkZwTG1SbGRvSU9LaTVoY21ObwpaWE5oYVM1a1pYWXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnR0JBTFFiYkpseXlYZSt5NG84Q09MOG5VT1Y1WjdaClZ3aEJqUVBTMExMSzl4MnhZS0Y5aHpSZnZGRG85NXdlRFdFeGV1dFh2Qnh5Mkc2TTVWcHlKY3U3Zmw1bDZqWHoKbVJ6d2NHdVFPRGNkQWg0aXRYOVNXcWlGSHMxYW0zMk9yRjlSelhPV1RSVkhmM0ZtN05QYkViOCtpK2RjRzdkeAovRjVaM3VTN2MwaVNpUUpDNkFRbG5GYzFEOEVKKzJWaGI3RFZEdDlMVVBOTjA5ZVh2RDFtbWMzYlNSWnkrMndZClEvSFY0RmNCTTl5L2pNZlN6RDhwTkk5TGpnOGpDZ3JoNFlCRFdLcUdYNERlMmN2bTI4OGpUOVJWa0pCdHlXdHoKSGoyYkY1dlp4RFpVV3N4MFFQZ212UkgzQXQzb3hUK3hCMXlISWlKSHRzL0k4ZWRxeWJaYk9UaC9za2FEREFsdQpWOUx1cnJrVStmQ0dmSHl0cUlBb2RoRHZpZDh3L3B1NzFJdiswZVZmeG5NR01VTWZ1NUtxU1J0STJsT0pvNUV2Cm1FQ0NmdlFjYmFBUFRzelptczc1eUlBdzNEVnVjaUVQNkFhNi9IZWFyTmZPSjk5TUt6d3pMb05JUmpJNHhqT08KeUFwazdRcVJrT1dDRFY0UW0wUXg1RU10M2FzZ1VOYXZ2cnhBcUE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRRGZqOEo0OU1kMldSa1UKTDdTaGpQVE5uaUxIWW5FWHU5WXYybUZWQ2tjaXNGN0ZjUWJ1U3hyWml4QUZyUXNRSmNvbmhKbEtiZE43MEZ4WgpuSm0vZXhqVFkvMCtVVVhCREQ4ZHRGQ3IvTDF2QnY2dndyRVRaWUJlQXYxeTBGeFV2a1dVY2wxenRuMnZjRVhGCkZzTnlFSjlhRHBLT2gwaXBJRFFxZDZKaE1mbEFCdU9kTkJPelNtdWxKWlR1a1d6c1MxdXNvRzVwVDB4UXVBRjIKelpGTEx1dEQ3TTJYSjh5RXZ0Mkp1aXhFK2tFekliNkxBY2svVVRQVDNBVldnaUlZUHY4YzBObGt0ZU1pV1lLbwpvdHcvQkhpbEwrbWZKRWp4blV3VDVKanRDdkZ4SWJDSWZFYkEwWitHZ3JZeEpYK1ZDUElRMWc3M2lLYTg4RWpWCmVrVTNVQWtYQWdNQkFBRUNnZ0VBY3RVR0FGbERKMEFteUo2a2VxTExqOTVkWU9yb3lsY2FjcVFLZ01MeHZSaTQKNVZQa1NueGJnMGlSNTBoMk9Vb2Y1MktOMXBSSkgvenJvci8wblUxZWVCNlJFdlJ1RHZYNmFZaVlNMjl6NGxiRwpkWU5jcjJqZ29lbUpRL05RcWRxK0pMMEYwWXo0VENnd1BrY3VCeVlRcEJKK0p5WElKYzg3M0dCdEVOMjVlSy9iCmNGMzRvbm5IQUpzd3dyMklXbHkrbEJ4aUhjVm5wSFpPZ1JaeTRYbEtuMWZvUTcwS2VTVDhIZ3l1eGZTN2UyMWIKSTlDVU1oZHFwa2xKV2ZYVUZmRDFrZEY4VVNqcS9KbXZnTmFhTTYwTFo5bUM4c2VIbzQwOWFoS21HcGVXd3RoNwppTkVBdW12VGs4MllpdzQxb1RnRG1tRE5aL0lHSDlDZmxpcjZQTGVzOFFLQmdRRHUwT0lHVVRVS3g0VmQ3V0FOClZiNXNGaGhsRlVrVHhnSHVMN21mSE5MNUtjWExveFdBbGVrUnVVTUdZeGFEWWY0NGloRWxMTjdNSUordk4vL3YKS1Zma01FMlFhVFBJNHZWVWNlTWNJQm4vSGF5T3o3Mkh3Skw4Ykh2ZStRMXkwMnNqbUs4MFJLUktoTGpaYVUrMApIdFVkU1hMZW9WbHFuTU9GTkVmVUtnZnBPUUtCZ1FEdnBlSCs1blQ1ZTdwWmgrckZFeVdLcUlveHlOWm1HSFVQCjdiVHdpL0UvOHBLeHhXM1JrZ3V1ZzBkQkhpMHhXdlEzcElOM2ExTzIwS1RXS0x4VVlYM0tTTTNiU3k2S1BVbU0KT2xaeVdDK0tjWFc0aTJrelFWS3pqa0NBMk00d3E5azV1UXpUblBFZi9UMVN3NUliWUkvYnFuSzZIMFJlT0J2cQpvTzAwWEVJVXp3S0JnUUNXNFJkN3dFQ1ByK0I5cUNRQUtNVG15c3JjeWliaVBENHArckwrYUpxTjJxdGhiWVovCk43Y0pnSTlzOEp0ZnBFQ1YvZnk1RFBFeDdBYVhELzA5WDFSdEVXdGZxbWVTS25tdXdVa29Fc3Y1MXdpWExYNWoKenZIT1VzZXI1cE50a1U3bUxXZTcwUVl2SWswYTVxTDVmR1ZPWElJYlQ3c0xWVUZkM2Rybm15cG1XUUtCZ1FDVgpMS0lvQkphTjhmbkczM2RCWTdDN3hqdjN6M2UrSjcwK3hBNGNxay9yS1hrdEZhTk5qK2Fiby9aSHo1djhIQXpuClVnM1AyVXhNQVVhS1ZPTWVkMjFRN003UGtkWVBrU1RtR0M1VmtSVk96VitsRjRyTnIvemw3a2V5ck1KMHc1UTkKZlRaQngzREZJK0wzVU92ekJNR24wRXNJRm94OVJkb0N6RmU3Znk1WE93S0JnRWN4amVMb1V2Q1BtRTFxOEJ5NgpyVEJQc29xRE4xZEh5WE4zZ3BVTkQvL3BhbWVGdkp3Y29idEFnVUVYVUtJaXBzT1NYRWx3aVhMRWFLNjMxa2ovCkdyRHBGdVd4RzE0WHBIS1l1WXJFZmNKd01qRkdidXBnNlZlQmc3ZGpqdW1vV0lXYlRXTlJxeFRTbENtUFlUOVUKQ3FDUXV5dyttekNVeVB4MXJWN1FmeEdxCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K

---
apiVersion: v1
kind: Service
metadata:
  name: api
spec:
  ports:
    - port: 3001
      targetPort: 3001
      protocol: TCP
---
apiVersion: v1
kind: Service
metadata:
  name: platform
spec:
  ports:
    - port: 3000
      targetPort: 3000
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: api
subsets:
  - addresses:
      - ip: 172.18.0.1
    ports:
      - port: 3001
        protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: platform
subsets:
  - addresses:
      - ip: 172.18.0.1
    ports:
      - port: 3000
        protocol: TCP
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: archesai
  annotations:
    traefik.ingress.kubernetes.io/redirect-entry-point: https
spec:
  ingressClassName: traefik
  tls:
    - hosts:
        - api.archesai.dev
        - platform.archesai.dev
      secretName: archesai-tls
  rules:
    - host: api.archesai.dev
      http:
        paths:
          - pathType: Prefix
            path: '/'
            backend:
              service:
                name: api
                port:
                  number: 3001
    - host: platform.archesai.dev
      http:
        paths:
          - pathType: Prefix
            path: '/'
            backend:
              service:
                name: platform
                port:
                  number: 3000
