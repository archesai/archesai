apiVersion: v1
kind: Secret
metadata:
  name: archesai-tls
type: kubernetes.io/tls
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVYekNDQXNlZ0F3SUJBZ0lSQU9MWHo3NGhrRjVZMGZkUGF0NWFEQ0l3RFFZSktvWklodmNOQVFFTEJRQXcKYnpFZU1Cd0dBMVVFQ2hNVmJXdGpaWEowSUdSbGRtVnNiM0J0Wlc1MElFTkJNU0l3SUFZRFZRUUxEQmxxYjI1aApkR2hoYmtCdGIyOXpaU0FvU205dVlYUm9ZVzRwTVNrd0p3WURWUVFERENCdGEyTmxjblFnYW05dVlYUm9ZVzVBCmJXOXZjMlVnS0VwdmJtRjBhR0Z1S1RBZUZ3MHlOVEEzTVRBeU1UQTRORGhhRncweU56RXdNVEF5TVRBNE5EaGEKTUUweEp6QWxCZ05WQkFvVEhtMXJZMlZ5ZENCa1pYWmxiRzl3YldWdWRDQmpaWEowYVdacFkyRjBaVEVpTUNBRwpBMVVFQ3d3WmFtOXVZWFJvWVc1QWJXOXZjMlVnS0VwdmJtRjBhR0Z1S1RDQ0FTSXdEUVlKS29aSWh2Y05BUUVCCkJRQURnZ0VQQURDQ0FRb0NnZ0VCQUtwTU1QSjVpZUh1ZVJMbm5lQ3pnQXJmd2FIMG54WGpGY09WdGI1U3Vtd0oKMHAyRWtPQ2FOWHVVK0JsNnA5NWt2VmxsblIvaGh4bGJhOFluckpOSUVLTUp1REhlSkxWOFBqaWw4NFdsQzJRSQp4WWlua203T3dESjduVUx5NWFQVVNXaFp0SG8rdy80T3JhSzVHU0R5d05SQ0gxaTBlaTVNQ1JrNERGTmRxRDY2CmNOTlFRTC9ONnVOVGRkWDUrdXFkbEM4Q0hkQ3pHWHRpM2lpbWU5TjhXSU1IaTV5T3AzeU5UQ1ozR0dqUVF6RFoKeE8yUTRXMksvaUh6RTkrdGtLeXRqdWxmbGlaTC9nVWNDeTJyRTBNRGMyRkY0V0c2TU1xbFVrT1E4aVVrMXZmUwppSm1JTDZaWDRXLzk4OVQzZzhNL1A3RTF3MzNsWlV6N0NzQy9lYXJRNWFjQ0F3RUFBYU9CbHpDQmxEQU9CZ05WCkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUhBd0V3SHdZRFZSMGpCQmd3Rm9BVVJObzAKdldjQmhPRVc1VkNSZjZhc3hYOHlwWkV3VEFZRFZSMFJCRVV3UTRJTllYSmphR1Z6WVdrdWRHVnpkSUlQS2k1aApjbU5vWlhOaGFTNTBaWE4wZ2dsc2IyTmhiR2h2YzNTSEJIOEFBQUdIRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUV3CkRRWUpLb1pJaHZjTkFRRUxCUUFEZ2dHQkFFeSsvUHBVcVBhNmFJbHJ4SXhNVDdtZW1VNnlMWVVhbUJJb1ZJRUwKZUFoYldMSUp5dlpnM3dZSWpSWnQzcVpGZFJvNkIrNkNVU3ZuTEMyYmFGazAvcXlQVitrTVV0aWY2RFAzNWZWdQpBVG9WMjgwMlFVWG9yUmVnVHVSMzJINDJnNERkNlhyazY3OW5mOXpoM3JMRU9lSUprMERTWHBxbTZkb3k1N3plCjdmVG0rTkVLTXlyRnFNYVduYkxqSUhLV0hPV01zeGlqZTFHK3FmV2d1RzdNbS80WTRuak9kSmF6TjhONU5ENGUKeFdIR2ZQa2JLQ05EbDdpVnNDUXplRjBoRTAwNlFhS2tDSzFlT09RU1ZFblM4ZDNOLzNHMHhCcHpyVVEvSUVhKwozcmlxbS9pQnkyVW9GYnJvWlQrWEVnbk1SbFV4enBtbGREb3k2T2F4MUZFMFVUOFZ1NWU0azZ1NDVnalFmQk5wCmhqQUN3ejJleFhmWW91MXFJOWFYN0hvRElWM3pWa2w4ekJSYm10bk5RN2lhd2E4bklSczViK25lU0JEcm12SjYKWWpyWDM5KzR3SnI3Z09iV0xYSnI1NjY4VHFDT2ZDVkJLTU9JWkhjRHA5Y0JSNDZqUGtmdWxyeFRhbVBvdjFVeAp2QUtwTHVTblNDSzVuYTIySWxYMzM1M3NaUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRQ3FURER5ZVluaDdua1MKNTUzZ3M0QUszOEdoOUo4VjR4WERsYlcrVXJwc0NkS2RoSkRnbWpWN2xQZ1plcWZlWkwxWlpaMGY0WWNaVzJ2RwpKNnlUU0JDakNiZ3gzaVMxZkQ0NHBmT0ZwUXRrQ01XSXA1SnV6c0F5ZTUxQzh1V2oxRWxvV2JSNlBzUCtEcTJpCnVSa2c4c0RVUWg5WXRIb3VUQWtaT0F4VFhhZyt1bkRUVUVDL3plcmpVM1hWK2ZycW5aUXZBaDNRc3hsN1l0NG8KcG52VGZGaURCNHVjanFkOGpVd21keGhvMEVNdzJjVHRrT0Z0aXY0aDh4UGZyWkNzclk3cFg1WW1TLzRGSEFzdApxeE5EQTNOaFJlRmh1akRLcFZKRGtQSWxKTmIzMG9pWmlDK21WK0Z2L2ZQVTk0UERQeit4TmNOOTVXVk0rd3JBCnYzbXEwT1duQWdNQkFBRUNnZ0VBTXh3YzBKa0RkY2hSbEFmcGpTZXlOUkZFbHV2STF4UEpVMkxhSWQzSVQyWi8KVElFZHpocmFGRlg0UkFWWTNsa1Ryd0hkTDFWTGE2UFJhNjQ2a0JWZjBONjQ1bGFLWStGKzl4ZHZSOXZwMkVMOQpyZTdFOXZhY0hrcVZQeU9SSWlNelNOc3JYRWo4SDRLZVFDa1hUcGtzb0VlY0NzNVhvUTkyNTVlM3MwbDNsaU4zCkpoTWVWUUFMOEJ3N243VVBDVDhIYW5BdUpkNnhtZDRtdmRCdUdNREk5SWU4anBIK1NJZGd0Q0NEUVUwUFRKN0sKUGdsejNCTER1RXRvcXdBNnBXTytXK042UnRQamQyWHBiTUs2REhNV3NMWFJwekZtbXkxVnlzY1pac0h4YkdWVQpaYWRzNDdoU2RKczQ4Q0NyL3hZaFFoOGVObjhqVDNvaHRBc09pdWVQT1FLQmdRRFBxeVI1djZHNHZhSE1SNTNVClVzL0xwa2RWMWhXZ3BBakxnaE1PNlI4TThuMDhBTHJrS25tNnpLeDlmTUJFWlVVWVdnWVlTOU9VQzJybzdRZXkKK3RXWk9BZUQyVVpqRjRpN1BNOFZZT2w4OUpHeFBIY1hvWmZMcnlnRDNTOVA2alNFbHE1U3hONklna0owQStLYgpJcmRlMlRGTkRhVWh3TDJ1bUlaRHB4c0M3UUtCZ1FEUjduOExhODRidTVCc3FHVVlma3IwOW0yL2xWZ2xWdy90CjNwNDBEOU1GOTVaV0NNajJTNDlrc0RYOWhDZ0tPaGZwQmFwSXg2cnl4bWhMSklMaW0wRzlQSmtVenhIVithWVkKaG9qV3V3Y0NwaEd5ODBHWFV2MCthN3o0QzJUWWtIT0pQSzVIdU9wT1NIRGpUVXJ5Y1o4aDRPYnRKTng2TGJDbAo2Y1FEUGUxVVl3S0JnSHBKalhFa0oxZGlVNlMzaDNsQVNwemhqYUErTVA0bm1nWTgwbncxU3RPVTk2b2R3L0FZCkV4YXM3K1gxVUVMMlgzbTNpVjlGUjVJbUp3NkNoY1lmYnlpS2xlSk9UK1NLTnpvSzFPY0I2bnhxaUdDVitvc3YKM1BOVWNYdlZBOGRMWXlHd21YYWo5MmJyVGJhRGt5MUhoRE9XTWpIdGx4QUpMNmxncDYrdTkza0JBb0dBSFFJMwp5L3c1bnR0c09aZUxZTGNTNUlhbzQ3QmZYY21LQ2ZTWko5aUg4R3NsK3YxN3g0enBZNkIxMVhKTmxod3c4YUkyCnhaZlJwM3FETHQ3OHR4TjlJZ2tkbmlKKzlISnE0VGkxNy9Zb0lkV1EzSW1BcHNodzlnOHRMWmxsZGdkLzc1YlMKL2xZdkNtSTROekNYQ3Fsb3MrWEFBMFQwc20xZDI0OVI1cURJQ3NFQ2dZQWN0UDdvYWl0NDFzcmljTGN0a1E1dQp3M2c2cEs0MWloRDNGT01IdlVVZVR1OFF1YThySzNhTjR2RDV0ZGFGYXpNZEpERFdmMDJETFdTRmlQNWNyQzVxCnZiTTVnMW1ZNldxazVDVm92NnVJQTBpS0p2bUhqaXBvWEZwNjEvUCtxMGlCL0ZTc0lOZkY4UnliRzZLdWt0Z0QKdXRoT213ak1nSTRWVVBpcEovL3g2Zz09Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K

---
apiVersion: v1
kind: Service
metadata:
  name: api
spec:
  ports:
    - port: 3001
      targetPort: 3001
      protocol: TCP
---
apiVersion: v1
kind: Service
metadata:
  name: platform
spec:
  ports:
    - port: 3000
      targetPort: 3000
      protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: api
subsets:
  - addresses:
      - ip: 172.18.0.1
    ports:
      - port: 3001
        protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: platform
subsets:
  - addresses:
      - ip: 172.18.0.1
    ports:
      - port: 3000
        protocol: TCP
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: archesai
  annotations:
    traefik.ingress.kubernetes.io/redirect-entry-point: https
spec:
  ingressClassName: traefik
  tls:
    - hosts:
        - api.archesai.test
        - platform.archesai.test
      secretName: archesai-tls
  rules:
    - host: api.archesai.test
      http:
        paths:
          - pathType: Prefix
            path: '/'
            backend:
              service:
                name: api
                port:
                  number: 3001
    - host: platform.archesai.test
      http:
        paths:
          - pathType: Prefix
            path: '/'
            backend:
              service:
                name: platform
                port:
                  number: 3000
