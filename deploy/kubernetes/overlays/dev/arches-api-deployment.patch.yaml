apiVersion: apps/v1
kind: Deployment
metadata:
  name: arches-api
spec:
  template:
    spec:
      imagePullSecrets:
        - name: artifact-registry-key
      volumes:
        - name: api-source
          hostPath:
            path: /host/api
            type: Directory
      containers:
        - name: arches-api
          image: arches-api:dev
          command: ["/bin/sh", "-c", "npm install && npm run start:dev"]
          volumeMounts:
            - name: api-source
              mountPath: /usr/src/app
