apiVersion: k3d.io/v1alpha5
kind: Simple
metadata:
  name: tower
# servers: 1
# agents: 2
options:
  k3s:
    extraArgs:
      - arg: '--disable=traefik'
        nodeFilters:
          - server:0
ports:
  - port: 80:80
    nodeFilters:
      - loadbalancer
  - port: 443:443
    nodeFilters:
      - loadbalancer
registries:
  create:
    name: registry.localhost
    host: '0.0.0.0'
    hostPort: '5000'
  # config: |
  #   mirrors:
  #     'localhost:5000':
  #       endpoint:
  #         - http://registry.localhost:5000
hostAliases:
  - ip: '172.18.0.1' # The IP of your host as seen inside the k3d containers
    hostnames:
      - 'storage.localhost'
      - 'storage.archesai.dev'
