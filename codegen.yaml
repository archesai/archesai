# Unified code generation configuration
# This file controls all code generation for the Arches AI project

domains:
  auth:
    openapi: api/openapi.bundled.yaml
    tags:
      - Auth
      - Users
      - Sessions
      - Accounts

    storage:
      postgres:
        enabled: true
        package: github.com/archesai/archesai/internal/database/postgresql
      sqlite:
        enabled: true
        package: github.com/archesai/archesai/internal/database/sqlite

    cache:
      redis:
        enabled: true
        prefix: "auth:"
        default_ttl: 300 # 5 minutes
      memory:
        enabled: true
        max_items: 1000
        default_ttl: 300

    events:
      redis:
        enabled: true
        channel: "auth-events"
      nats:
        enabled: false
        subject: "auth.events"

  organizations:
    openapi: api/openapi.bundled.yaml
    tags:
      - Organizations

    storage:
      postgres:
        enabled: true
        package: github.com/archesai/archesai/internal/database/postgresql
      sqlite:
        enabled: true
        package: github.com/archesai/archesai/internal/database/sqlite

    cache:
      redis:
        enabled: true
        prefix: "org:"
        default_ttl: 600 # 10 minutes
      memory:
        enabled: true
        max_items: 500
        default_ttl: 600

    events:
      redis:
        enabled: true
        channel: "org-events"
      nats:
        enabled: false
        subject: "organizations.events"

  workflows:
    openapi: api/openapi.bundled.yaml
    tags:
      - Workflows

    storage:
      postgres:
        enabled: true
        package: github.com/archesai/archesai/internal/database/postgresql
      sqlite:
        enabled: true
        package: github.com/archesai/archesai/internal/database/sqlite

    cache:
      redis:
        enabled: true
        prefix: "workflow:"
        default_ttl: 120 # 2 minutes (workflows change frequently)
      memory:
        enabled: true
        max_items: 200
        default_ttl: 120

    events:
      redis:
        enabled: true
        channel: "workflow-events"
      nats:
        enabled: false
        subject: "workflows.events"

  content:
    openapi: api/openapi.bundled.yaml
    tags:
      - Content

    storage:
      postgres:
        enabled: true
        package: github.com/archesai/archesai/internal/database/postgresql
      sqlite:
        enabled: true
        package: github.com/archesai/archesai/internal/database/sqlite

    cache:
      redis:
        enabled: true
        prefix: "content:"
        default_ttl: 900 # 15 minutes (content changes less frequently)
      memory:
        enabled: true
        max_items: 2000
        default_ttl: 900

    events:
      redis:
        enabled: true
        channel: "content-events"
      nats:
        enabled: false
        subject: "content.events"

# Global settings
settings:
  # Output directory for generated code
  output: internal

  # Whether to generate tests alongside implementations
  generate_tests: false

  # Whether to overwrite existing manual implementations
  overwrite_manual: false

  # Template customization
  templates:
    # Custom template directory (optional)
    # custom_dir: templates/custom

    # Template overrides (optional)
    overrides:
      # repository: templates/custom/repository.go.tmpl
      # cache: templates/custom/cache.go.tmpl
      # events: templates/custom/events.go.tmpl
